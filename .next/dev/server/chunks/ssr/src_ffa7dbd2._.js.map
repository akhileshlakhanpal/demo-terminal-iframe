{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/panels/WatchlistPanel.tsx"],"sourcesContent":["import { useState, useRef, useEffect, useMemo, useCallback } from 'react'\nimport FlagIcon from '../ui/FlagIcon'\nimport IconButton from '../ui/IconButton'\nimport { LuGripVertical } from 'react-icons/lu'\nimport { FiStar, FiSearch, FiSlash } from 'react-icons/fi'\nimport { useAccount } from '../../context/AccountContext'\nimport { useInstruments } from '../../context/InstrumentContext'\nimport { useWebSocket } from '../../context/WebSocketContext'\nimport { useTrading } from '../../context/TradingContext'\nimport { cn } from '../../lib/utils'\n\n// Extract Row for performance/blink logic\nconst InstrumentRow = ({ item, isVisible, toggleFavorite, lastQuote, handleDragStart, handleDragEnter, handleDragEnd, idx, onSelect, addNavbarTab }) => {\n  // Refs for tracking previous values to trigger blinks\n  const prevBidRef = useRef(item.bid);\n  const prevAskRef = useRef(item.ask);\n\n  // Live Data or Static Fallback\n  const quote = lastQuote || {};\n\n  // Format to 6 significant digits total\n  const formatPrice = (price: number | undefined | null): string => {\n    if (price === undefined || price === null) return '0.00000';\n\n    const priceNum = Number(price);\n    if (isNaN(priceNum) || priceNum === 0) return '0.00000';\n\n    // Use toPrecision(6) for exactly 6 significant digits\n    return parseFloat(priceNum.toPrecision(6)).toString();\n  };\n\n  const bid = formatPrice(quote.bid ?? item.bid);\n  const ask = formatPrice(quote.ask ?? item.ask);\n\n  // Spread calculation\n  const spread = quote.spread !== undefined ? quote.spread : (item.spread || 0);\n\n  // Weekend market closure (all non-crypto instruments)\n  const isWeekend = [0, 6].includes(new Date().getUTCDay());\n  const isCrypto = (item.category || '').toLowerCase().includes('crypto');\n  const isMarketClosed = isWeekend && !isCrypto;\n\n  // Calculate Day Change (as Range %)\n  // \"calculate how much is in +ve or -ve inpercentage based on day high/low and current\"\n  let dayChangeLabel = '0.00%';\n  let changeColor = 'gray';\n\n  if (quote.dayHigh && quote.dayLow && quote.bid) {\n    const range = quote.dayHigh - quote.dayLow;\n    if (range > 0) {\n      const pct = ((quote.bid - quote.dayLow) / range) * 100;\n      // If closer to High = Green? Closer to Low = Red?\n      // Or usually change is vs Open. Since we don't have Open, I will map Range % to a visual indicator\n      // But the column says \"1D Change\". Let's show Range % for now as requested.\n      dayChangeLabel = `${pct.toFixed(2)}%`;\n      changeColor = pct > 50 ? 'green' : 'red';\n    }\n  } else if (item.change) {\n    dayChangeLabel = item.change;\n    changeColor = parseFloat(item.change) >= 0 ? 'green' : 'red';\n  }\n\n  // Blink Logic\n  const [bidColor, setBidColor] = useState('');\n  const [askColor, setAskColor] = useState('');\n\n  useEffect(() => {\n    if (quote.bid && prevBidRef.current !== quote.bid) {\n      const color = quote.bid > prevBidRef.current ? 'text-[#2ebd85]' : 'text-[#f6465d]';\n      setBidColor(color);\n      const timer = setTimeout(() => setBidColor(''), 300); // Blink duration\n      prevBidRef.current = quote.bid;\n      return () => clearTimeout(timer);\n    }\n  }, [quote.bid]);\n\n  useEffect(() => {\n    if (quote.ask && prevAskRef.current !== quote.ask) {\n      const color = quote.ask > prevAskRef.current ? 'text-[#2ebd85]' : 'text-[#f6465d]';\n      setAskColor(color);\n      const timer = setTimeout(() => setAskColor(''), 300);\n      prevAskRef.current = quote.ask;\n      return () => clearTimeout(timer);\n    }\n  }, [quote.ask]);\n\n  // Fallback static color logic\n  const staticBidColor = changeColor === 'green' ? 'text-[#2ebd85]' : 'text-[#f6465d]';\n  const staticAskColor = changeColor === 'green' ? 'text-[#2ebd85]' : 'text-[#f6465d]';\n\n  return (\n    <div\n      draggable\n      onDragStart={(e) => handleDragStart(e, idx)}\n      onDragEnter={(e) => handleDragEnter(e, idx)}\n      onDragEnd={handleDragEnd}\n      onClick={() => {\n        onSelect(item.symbol);\n        // Also add to Navbar if not already there\n        if (addNavbarTab) {\n          addNavbarTab(item.symbol);\n        }\n      }}\n      className=\"group grid grid-cols-[30px_36px_minmax(100px,1fr)_auto_auto_auto_30px] gap-0 items-center border-b border-gray-800 hover:bg-[#1c252f] transition-colors h-[40px] cursor-pointer min-w-0\"\n    >\n      {/* Grip Handle */}\n      <div className=\"flex items-center justify-center text-[#565c66] cursor-grab active:cursor-grabbing bg-[#0b0e14] group-hover:bg-[#1c252f] h-full transition-colors border-r border-gray-800\">\n        <LuGripVertical size={14} />\n      </div>\n\n      {/* Flag */}\n      <div className=\"flex items-center justify-center bg-[#0b0e14] group-hover:bg-[#1c252f] h-full transition-colors border-r border-gray-800 p-1.5\">\n        <div className=\"w-6 h-6 rounded-full overflow-hidden\">\n          <FlagIcon symbol={item.symbol} />\n        </div>\n      </div>\n\n      {/* Symbol */}\n      <div className=\"pl-2 flex flex-col justify-center border-r border-gray-800 bg-[#0b0e14] group-hover:bg-[#1c252f] h-full transition-colors overflow-hidden min-w-[100px] flex-shrink-0\">\n        <span className=\"text-[13px] font-bold text-gray-200 truncate\">{item.symbol}</span>\n        {isVisible('description') && <span className=\"text-[10px] text-gray-500 truncate\">{item.description || item.name}</span>}\n        {isMarketClosed && (\n          <span className=\"flex items-center gap-1 text-amber-400\">\n            <FiSlash size={12} />\n          </span>\n        )}\n      </div>\n\n      {/* Bid */}\n      {isVisible('bid') && (\n        <div className=\"px-1 w-[90px] min-w-[90px] text-center flex items-center justify-center h-full flex-shrink-0\">\n          <span className={cn(\n            \"text-[12px] font-medium px-1.5 py-1 rounded-[4px] w-full block transition-colors bg-[#2ebd85]/10 truncate\",\n            bidColor || staticBidColor\n          )}>\n            {bid}\n          </span>\n        </div>\n      )}\n\n      {/* Ask */}\n      {isVisible('ask') && (\n        <div className=\"px-1 w-[90px] min-w-[90px] text-center flex items-center justify-center h-full flex-shrink-0\">\n          <span className={cn(\n            \"text-[12px] font-medium px-1.5 py-1 rounded-[4px] w-full block transition-colors bg-[#f6465d]/10 truncate\",\n            askColor || staticAskColor\n          )}>\n            {ask}\n          </span>\n        </div>\n      )}\n\n      {/* 1D Change */}\n      {isVisible('change') && (\n        <div className={cn(\n          \"px-1 w-[70px] min-w-[70px] text-center text-[11px] font-medium flex items-center justify-center h-full truncate flex-shrink-0\",\n          changeColor === 'green' ? 'text-[#2ebd85]' : 'text-[#f6465d]'\n        )}>\n          {dayChangeLabel}\n        </div>\n      )}\n\n      {/* Star / Favorite */}\n      <div className=\"flex items-center justify-center h-full\">\n        <button\n          onClick={(e) => { e.stopPropagation(); toggleFavorite(item.id); }}\n          className={`text-[14px] transition-colors ${item.favorite ? 'text-[#f59e0b]' : 'text-gray-600 hover:text-gray-400'}`}\n        >\n          {item.favorite ? <FiStar fill=\"currentColor\" /> : <FiStar />}\n        </button>\n      </div>\n\n    </div>\n  )\n}\n\nexport default function WatchlistPanel({ onClose }) {\n  const { currentAccount } = useAccount()\n  const { setSymbol, addNavbarTab } = useTrading()\n  const {\n    instruments,\n    categories: dynamicCategories,\n    isLoading,\n    toggleFavorite,\n    reorderInstruments\n  } = useInstruments()\n  const { subscribe, unsubscribe, lastQuotes, normalizeSymbol } = useWebSocket()\n\n  const [searchTerm, setSearchTerm] = useState('')\n  const [selectedCategory, setSelectedCategory] = useState('Favorites')\n  const [showCategoryDropdown, setShowCategoryDropdown] = useState(false)\n  const [showPriceHighlight, setShowPriceHighlight] = useState(false)\n\n  // Columns configuration based on \"Image 2\"\n  const [columns, setColumns] = useState([\n    { id: 'flag', label: '', visible: true, draggable: false },\n    { id: 'signal', label: 'Signal', visible: false, draggable: true },\n    { id: 'description', label: 'Description', visible: true, draggable: true },\n    { id: 'bid', label: 'Bid', visible: true, draggable: true },\n    { id: 'spread', label: 'Spread', visible: false, draggable: true },\n    { id: 'ask', label: 'Ask', visible: true, draggable: true },\n    { id: 'change', label: '1D change', visible: true, draggable: true },\n    { id: 'chart', label: 'Show chart', visible: false, draggable: false },\n    { id: 'pl', label: 'P/L', visible: false, draggable: true },\n  ])\n\n  // Drag and drop logic\n  const dragItem = useRef<number | null>(null)\n  const dragOverItem = useRef<number | null>(null)\n\n  const handleDragStart = (e: React.DragEvent, position: number) => {\n    dragItem.current = position\n    e.dataTransfer.effectAllowed = 'move'\n  }\n\n  const handleDragEnter = (e: React.DragEvent, position: number) => {\n    dragOverItem.current = position\n    e.preventDefault()\n  }\n\n  const handleDragEnd = async () => {\n    if (dragItem.current !== null && dragOverItem.current !== null && dragItem.current !== dragOverItem.current) {\n      const newList = [...instruments]\n\n      // Map filtered indices back to original indices\n      const itemToMove = filteredItems[dragItem.current]\n      const targetItem = filteredItems[dragOverItem.current]\n\n      const fromIdx = newList.findIndex(i => i.id === itemToMove.id)\n      const toIdx = newList.findIndex(i => i.id === targetItem.id)\n\n      if (fromIdx !== -1 && toIdx !== -1) {\n        newList.splice(fromIdx, 1)\n        newList.splice(toIdx, 0, itemToMove)\n        await reorderInstruments(newList)\n      }\n    }\n    dragItem.current = null\n    dragOverItem.current = null\n  }\n\n  const items = instruments\n\n  const isVisible = (id: string) => columns.find(c => c.id === id)?.visible\n\n  const toggleColumn = (id: string) => {\n    setColumns(columns.map(col =>\n      col.id === id ? { ...col, visible: !col.visible } : col\n    ))\n  }\n\n  const filteredItems = useMemo(() => {\n    let filtered = items;\n\n    // Filter by Category\n    if (selectedCategory === 'Favorites') {\n      filtered = filtered.filter(item => item.favorite);\n    } else if (selectedCategory !== 'All instruments') {\n      filtered = filtered.filter(item => item.category === selectedCategory);\n    }\n\n    // Filter by Search\n    if (searchTerm) {\n      const lowerTerm = searchTerm.toLowerCase();\n      filtered = filtered.filter(item =>\n        item.symbol.toLowerCase().includes(lowerTerm) ||\n        (item.name && item.name.toLowerCase().includes(lowerTerm)) ||\n        (item.description && item.description.toLowerCase().includes(lowerTerm))\n      );\n    }\n\n    return filtered;\n  }, [items, selectedCategory, searchTerm]);\n\n  // Automatically switch to 'All instruments' if Favorites is selected but empty\n  useEffect(() => {\n    if (selectedCategory === 'Favorites' && filteredItems.length === 0 && items.length > 0) {\n      setSelectedCategory('All instruments');\n    }\n  }, [selectedCategory, filteredItems.length, items.length]);\n\n  // Handle Subscriptions\n  useEffect(() => {\n    const symbols = filteredItems.map(i => i.symbol);\n    subscribe(symbols);\n    return () => unsubscribe(symbols); // Cleanup on unmount/change\n  }, [filteredItems, subscribe, unsubscribe]);\n\n\n  return (\n    <div className=\"flex flex-col h-full overflow-hidden bg-background text-[#b2b5be] font-sans border border-gray-800 rounded-md\">\n\n      {/* New Header Layout: Dropdown Title + Actions */}\n      <header className=\"flex items-center justify-between pl-3 pr-2 py-2 flex-shrink-0 min-h-[44px] border-b border-gray-800/50\">\n\n        {/* Dropdown Title Trigger */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowCategoryDropdown(!showCategoryDropdown)}\n            className=\"flex items-center gap-2 text-[14px] font-semibold text-white hover:text-gray-300 transition-colors\"\n          >\n            {selectedCategory}\n            <svg width=\"10\" height=\"6\" viewBox=\"0 0 10 6\" fill=\"none\" className={`transition-transform duration-200 ${showCategoryDropdown ? 'rotate-180' : ''}`}>\n              <path d=\"M1 1L5 5L9 1\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n            </svg>\n          </button>\n\n          {/* Dropdown Menu */}\n          {showCategoryDropdown && (\n            <>\n              <div className=\"fixed inset-0 z-40\" onClick={() => setShowCategoryDropdown(false)}></div>\n              <div className=\"absolute top-full left-0 mt-2 w-[220px] bg-[#1a1e25] border border-gray-700 rounded-lg shadow-xl z-50 py-1 max-h-[400px] overflow-y-auto\">\n                {dynamicCategories.map(cat => (\n                  <div\n                    key={cat}\n                    onClick={() => {\n                      setSelectedCategory(cat);\n                      setShowCategoryDropdown(false);\n                    }}\n                    className=\"px-4 py-2.5 text-[13px] text-gray-300 hover:bg-[#2a303c] hover:text-white cursor-pointer flex items-center justify-between group transition-colors\"\n                  >\n                    <span>{cat}</span>\n                    {selectedCategory === cat ? (\n                      <svg width=\"10\" height=\"8\" viewBox=\"0 0 10 8\" fill=\"none\" className=\"text-white\">\n                        <path d=\"M1 4L3.5 6.5L9 1\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                      </svg>\n                    ) : (\n                      <span className=\"opacity-0 group-hover:opacity-100 text-[#f59e0b]\">\n                        <FiStar size={12} fill=\"currentColor\" />\n                      </span>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n\n        {/* Actions: Settings + Close */}\n        <div className=\"flex items-center gap-1\">\n\n          <button\n            onClick={onClose}\n            className=\"p-1.5 text-gray-400 hover:text-white hover:bg-gray-800 rounded transition-colors\"\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        </div>\n      </header>\n\n      {/* Search Bar - Below Header */}\n      <div className=\"px-3 py-2 flex-shrink-0 border-b border-gray-800/50\">\n        <div className=\"relative group bg-[#131720] rounded-md border border-gray-800 group-focus-within:border-gray-600 transition-colors\">\n          <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\">\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <circle cx=\"11\" cy=\"11\" r=\"8\" />\n              <line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\" />\n            </svg>\n          </div>\n          <input\n            type=\"text\"\n            placeholder=\"Search\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full pl-9 pr-3 py-1.5 bg-transparent text-[13px] text-white placeholder-gray-600 focus:outline-none\"\n          />\n        </div>\n      </div>\n\n      {/* Table Header */}\n      <div className=\"grid grid-cols-[30px_36px_minmax(100px,1fr)_auto_auto_auto_30px] gap-0 border-b border-gray-800 bg-background text-[11px] font-medium text-gray-500 uppercase min-w-0\">\n        <div className=\"py-2 text-center bg-[#0b0e14] border-r border-gray-800\"></div> {/* Grip placeholder */}\n        <div className=\"py-2 text-center bg-[#0b0e14] border-r border-gray-800\"></div> {/* Flag placeholder */}\n        <div className=\"py-2 pl-2 text-left bg-[#0b0e14] border-r border-gray-800 min-w-[100px] flex-shrink-0\">Symbol</div>\n\n        {isVisible('bid') && <div className=\"py-2 px-1 text-center w-[90px] min-w-[90px] flex-shrink-0\">Bid</div>}\n        {isVisible('ask') && <div className=\"py-2 px-1 text-center w-[90px] min-w-[90px] flex-shrink-0\">Ask</div>}\n        {isVisible('change') && <div className=\"py-2 px-1 text-center w-[70px] min-w-[70px] flex-shrink-0\">1D</div>}\n\n        <div className=\"py-2 text-center\"></div> {/* Star placeholder */}\n      </div>\n\n      {/* Table Content */}\n      <div className=\"flex-1 overflow-y-auto overflow-x-auto custom-scrollbar\">\n        {filteredItems.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-gray-600 grayscale opacity-40 py-10\">\n            <FiSearch size={48} className=\"mb-4\" />\n            <span className=\"text-[14px] font-medium\">No symbols found</span>\n            {currentAccount?.group && <span className=\"text-[11px] mt-1 opacity-60\">for {currentAccount.group}</span>}\n          </div>\n        ) : (\n          <div className=\"min-w-max\">\n            {filteredItems.map((item, idx) => (\n              <InstrumentRow\n                key={item.id}\n                item={item}\n                idx={idx}\n                isVisible={isVisible}\n                toggleFavorite={toggleFavorite}\n                lastQuote={lastQuotes[normalizeSymbol(item.symbol)]}\n                handleDragStart={handleDragStart}\n                handleDragEnter={handleDragEnter}\n                handleDragEnd={handleDragEnd}\n                onSelect={setSymbol}\n                addNavbarTab={addNavbarTab}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 795, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/ui/Tooltip.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react'\nimport { createPortal } from 'react-dom'\n\nexport default function Tooltip({ children, text, className = '', placement = 'bottom' }: { children: React.ReactNode, text: string, className?: string, placement?: 'bottom' | 'top' | 'right' | 'left' }) {\n  const [isVisible, setIsVisible] = useState(false)\n  const [coords, setCoords] = useState({ top: 0, left: 0 })\n  const triggerRef = useRef<HTMLDivElement>(null)\n\n  const updatePosition = () => {\n    if (triggerRef.current) {\n      const rect = triggerRef.current.getBoundingClientRect()\n      const scrollX = window.scrollX\n      const scrollY = window.scrollY\n\n      let top = 0\n      let left = 0\n\n      switch (placement) {\n        case 'bottom':\n          top = rect.bottom + scrollY + 8\n          left = rect.left + scrollX + rect.width / 2\n          break\n        case 'top':\n          top = rect.top + scrollY - 8\n          left = rect.left + scrollX + rect.width / 2\n          break\n        case 'right':\n          top = rect.top + scrollY + rect.height / 2\n          left = rect.right + scrollX + 8\n          break\n        case 'left':\n          top = rect.top + scrollY + rect.height / 2\n          left = rect.left + scrollX - 8\n          break\n        default:\n          top = rect.bottom + scrollY + 8\n          left = rect.left + scrollX + rect.width / 2\n      }\n\n      setCoords({ top, left })\n    }\n  }\n\n  const handleMouseEnter = () => {\n    updatePosition()\n    setIsVisible(true)\n  }\n\n  const handleMouseLeave = () => {\n    setIsVisible(false)\n  }\n\n  const arrowClasses = {\n    bottom: 'bottom-full left-1/2 transform -translate-x-1/2 border-b-[#2a353e]',\n    right: 'right-full top-1/2 transform -translate-y-1/2 border-r-[#2a353e]',\n    top: 'top-full left-1/2 transform -translate-x-1/2 border-t-[#2a353e]',\n    left: 'left-full top-1/2 transform -translate-y-1/2 border-l-[#2a353e]'\n  }\n\n  const tooltipContent = (\n    <div\n      className=\"absolute px-2 py-1 bg-[#2a353e] text-white text-xs rounded shadow-lg whitespace-nowrap z-[9999] border border-[#4a5568] pointer-events-none transition-opacity duration-75\"\n      style={{\n        top: coords.top,\n        left: coords.left,\n        transform: placement === 'left' || placement === 'right' ? 'translateY(-50%)' : 'translateX(-50%)',\n        opacity: isVisible ? 1 : 0\n      }}\n    >\n      {text}\n      {/* Arrow */}\n      <div className={`absolute border-4 border-transparent ${arrowClasses[placement]}`}></div>\n    </div>\n  )\n\n  return (\n    <>\n      <div\n        ref={triggerRef}\n        className={`relative flex items-center justify-center ${className}`}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        {children}\n      </div>\n      {isVisible && createPortal(tooltipContent, document.body)}\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,YAAY,QAAQ,EAAoH;IACxM,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;QAAE,KAAK;QAAG,MAAM;IAAE;IACvD,MAAM,aAAa,IAAA,+MAAM,EAAiB;IAE1C,MAAM,iBAAiB;QACrB,IAAI,WAAW,OAAO,EAAE;YACtB,MAAM,OAAO,WAAW,OAAO,CAAC,qBAAqB;YACrD,MAAM,UAAU,OAAO,OAAO;YAC9B,MAAM,UAAU,OAAO,OAAO;YAE9B,IAAI,MAAM;YACV,IAAI,OAAO;YAEX,OAAQ;gBACN,KAAK;oBACH,MAAM,KAAK,MAAM,GAAG,UAAU;oBAC9B,OAAO,KAAK,IAAI,GAAG,UAAU,KAAK,KAAK,GAAG;oBAC1C;gBACF,KAAK;oBACH,MAAM,KAAK,GAAG,GAAG,UAAU;oBAC3B,OAAO,KAAK,IAAI,GAAG,UAAU,KAAK,KAAK,GAAG;oBAC1C;gBACF,KAAK;oBACH,MAAM,KAAK,GAAG,GAAG,UAAU,KAAK,MAAM,GAAG;oBACzC,OAAO,KAAK,KAAK,GAAG,UAAU;oBAC9B;gBACF,KAAK;oBACH,MAAM,KAAK,GAAG,GAAG,UAAU,KAAK,MAAM,GAAG;oBACzC,OAAO,KAAK,IAAI,GAAG,UAAU;oBAC7B;gBACF;oBACE,MAAM,KAAK,MAAM,GAAG,UAAU;oBAC9B,OAAO,KAAK,IAAI,GAAG,UAAU,KAAK,KAAK,GAAG;YAC9C;YAEA,UAAU;gBAAE;gBAAK;YAAK;QACxB;IACF;IAEA,MAAM,mBAAmB;QACvB;QACA,aAAa;IACf;IAEA,MAAM,mBAAmB;QACvB,aAAa;IACf;IAEA,MAAM,eAAe;QACnB,QAAQ;QACR,OAAO;QACP,KAAK;QACL,MAAM;IACR;IAEA,MAAM,+BACJ,8OAAC;QACC,WAAU;QACV,OAAO;YACL,KAAK,OAAO,GAAG;YACf,MAAM,OAAO,IAAI;YACjB,WAAW,cAAc,UAAU,cAAc,UAAU,qBAAqB;YAChF,SAAS,YAAY,IAAI;QAC3B;;YAEC;0BAED,8OAAC;gBAAI,WAAW,CAAC,qCAAqC,EAAE,YAAY,CAAC,UAAU,EAAE;;;;;;;;;;;;IAIrF,qBACE;;0BACE,8OAAC;gBACC,KAAK;gBACL,WAAW,CAAC,0CAA0C,EAAE,WAAW;gBACnE,cAAc;gBACd,cAAc;0BAEb;;;;;;YAEF,2BAAa,IAAA,4NAAY,EAAC,gBAAgB,SAAS,IAAI;;;AAG9D"}},
    {"offset": {"line": 904, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/ui/IconButton.tsx"],"sourcesContent":["import React from 'react'\nimport Tooltip from './Tooltip'\n\nexport default function IconButton({ children, onClick, tooltip, className = '', ...props }) {\n  const button = (\n    <button \n      className={`p-1 text-[#b2b5be] hover:text-white transition-colors cursor-pointer hover:bg-[#2a353e] hover:border hover:border-[#4a5568] rounded-sm border border-transparent ${className}`}\n      onClick={onClick}\n      {...props}\n    >\n      {children}\n    </button>\n  )\n\n  if (tooltip) {\n    return <Tooltip text={tooltip}>{button}</Tooltip>\n  }\n\n  return button\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAEe,SAAS,WAAW,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,YAAY,EAAE,EAAE,GAAG,OAAO;IACzF,MAAM,uBACJ,8OAAC;QACC,WAAW,CAAC,iKAAiK,EAAE,WAAW;QAC1L,SAAS;QACR,GAAG,KAAK;kBAER;;;;;;IAIL,IAAI,SAAS;QACX,qBAAO,8OAAC,8IAAO;YAAC,MAAM;sBAAU;;;;;;IAClC;IAEA,OAAO;AACT"}},
    {"offset": {"line": 939, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/panels/EconomicCalendarPanel.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from 'react'\nimport IconButton from '../ui/IconButton'\n\nexport default function EconomicCalendarPanel({ onClose }) {\n  const [selectedImpact, setSelectedImpact] = useState('All impacts')\n  const [selectedCountry, setSelectedCountry] = useState('All countries')\n\n  const economicEvents = [\n    {\n      time: '12:00',\n      ampm: 'AM',\n      event: 'ANZ Business Confidence',\n      country: 'NZ',\n      impact: 2, // Medium\n      actual: '67',\n      forecast: '58',\n      previous: '58'\n    },\n    {\n      time: '12:00',\n      ampm: 'AM',\n      event: 'Thanksgiving Day',\n      country: 'US',\n      impact: 1, // Low\n      actual: '-',\n      forecast: '-',\n      previous: '-'\n    },\n    {\n      time: '12:30',\n      ampm: 'AM',\n      event: 'Building Capital Expenditure QoQ',\n      country: 'NZ',\n      impact: 1,\n      actual: '2.1%',\n      forecast: '0.4%',\n      previous: '0.3%'\n    },\n    {\n      time: '12:30',\n      ampm: 'AM',\n      event: 'Plant Machinery Capital Expenditure QoQ',\n      country: 'NZ',\n      impact: 1,\n      actual: '12%',\n      forecast: '0.4%',\n      previous: '0.7%'\n    }\n  ]\n\n  const getCountryFlag = (country) => {\n    const flags = {\n      'NZ': 'üá≥üáø',\n      'US': 'üá∫üá∏',\n      'CN': 'üá®üá≥',\n      'JP': 'üáØüáµ',\n      'AU': 'üá¶üá∫',\n      'DE': 'üá©üá™',\n    }\n    return flags[country] || 'üè≥Ô∏è'\n  }\n\n  return (\n    <div className=\"flex flex-col h-full overflow-hidden bg-background text-[#b2b5be] border border-gray-800 rounded-md\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between pt-4 px-4 flex-shrink-0\">\n        <h2 className=\"text-[#b2b5be] text-[13px] font-medium uppercase tracking-wider\">ECONOMIC CALENDAR</h2>\n        <IconButton onClick={onClose} tooltip=\"Hide panel\">\n          <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n          </svg>\n        </IconButton>\n      </div>\n\n      {/* Filters */}\n      <div className=\"p-4 space-y-4 flex-shrink-0 border-b border-gray-800\">\n        <div className=\"relative\">\n          <select\n            value={selectedImpact}\n            onChange={(e) => setSelectedImpact(e.target.value)}\n            className=\"w-full bg-background border border-gray-800 rounded px-3 py-2.5 text-sm text-[#e1e2e5] appearance-none cursor-pointer focus:outline-none focus:border-[#4a5568]\"\n          >\n            <option>All impacts</option>\n            <option>High impact</option>\n            <option>Medium impact</option>\n            <option>Low impact</option>\n          </select>\n          <svg className=\"absolute right-3 top-3 w-4 h-4 text-[#6f7682] pointer-events-none\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n          </svg>\n        </div>\n\n        <div className=\"relative\">\n          <select\n            value={selectedCountry}\n            onChange={(e) => setSelectedCountry(e.target.value)}\n            className=\"w-full bg-background border border-gray-800 rounded px-3 py-2.5 text-sm text-[#e1e2e5] appearance-none cursor-pointer focus:outline-none focus:border-[#4a5568]\"\n          >\n            <option>All countries</option>\n            <option>United States</option>\n            <option>China</option>\n            <option>Japan</option>\n            <option>Australia</option>\n            <option>Germany</option>\n            <option>New Zealand</option>\n          </select>\n          <svg className=\"absolute right-3 top-3 w-4 h-4 text-[#6f7682] pointer-events-none\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n          </svg>\n        </div>\n      </div>\n\n      {/* Events List */}\n      <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\n        <div className=\"bg-[#1e2830] px-4 py-2.5 text-[13px] font-bold text-[#e1e2e5] sticky top-0 z-10 border-b border-gray-800\">\n          November 27\n        </div>\n        <div>\n          {economicEvents.map((item, index) => (\n            <div key={index} className=\"flex border-b border-gray-800 py-3 px-4 hover:bg-[#1c252f] transition-colors cursor-pointer group\">\n              {/* Left Column: Time & Flag/Impact */}\n              <div className=\"w-[70px] flex flex-col gap-2.5 flex-shrink-0\">\n                <div className=\"flex flex-col leading-none\">\n                  <span className=\"text-[13px] text-[#b2b5be] font-medium\">{item.time}</span>\n                  <span className=\"text-[11px] text-[#6f7682] mt-0.5\">{item.ampm}</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm leading-none\">{getCountryFlag(item.country)}</span>\n                  <div className=\"flex gap-[2px] items-end h-3\">\n                    {[1, 2, 3].map(bar => (\n                      <div\n                        key={bar}\n                        className={`w-[3px] rounded-[1px] ${bar <= item.impact ? 'bg-[#eab308]' : 'bg-[#2a353e]'} ${bar === 1 ? 'h-1.5' : bar === 2 ? 'h-2.5' : 'h-3.5'}`}\n                      />\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              {/* Right Column: Event & Values */}\n              <div className=\"flex-1 min-w-0 pl-1\">\n                <div className=\"flex justify-between items-start mb-2\">\n                  <span className=\"text-[#e1e2e5] text-[13px] font-normal leading-tight pr-2\">{item.event}</span>\n                  <svg className=\"w-4 h-4 text-[#6f7682] group-hover:text-[#b2b5be] transition-colors flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </div>\n                <div className=\"flex justify-between text-[13px] pr-6\">\n                  <span className={`font-medium w-1/3 text-left ${item.actual !== '-' ? 'text-[#e1e2e5]' : 'text-[#6f7682]'}`}>{item.actual}</span>\n                  <span className=\"text-[#6f7682] w-1/3 text-center\">{item.forecast}</span>\n                  <span className=\"text-[#6f7682] w-1/3 text-right\">{item.previous}</span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1405, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/ui/Toggle.tsx"],"sourcesContent":["export default function Toggle({ checked, onChange, label }: { checked: boolean, onChange: (e: React.ChangeEvent<HTMLInputElement>) => void, label?: string }) {\n  return (\n    <label className=\"relative inline-flex items-center cursor-pointer\">\n      <input\n        type=\"checkbox\"\n        checked={checked}\n        onChange={onChange}\n        className=\"sr-only peer\"\n      />\n      <div className=\"w-9 h-5 bg-[#545b64] rounded-full peer peer-checked:bg-[#7f8792] peer-focus:outline-none transition-colors relative\">\n        <div className={`absolute top-0.5 left-0.5 bg-white rounded-full h-4 w-4 transition-transform duration-200 ${checked ? 'translate-x-4' : 'translate-x-0'}`}></div>\n      </div>\n    </label>\n  )\n}\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAoG;IAC3J,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBACC,MAAK;gBACL,SAAS;gBACT,UAAU;gBACV,WAAU;;;;;;0BAEZ,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAW,CAAC,0FAA0F,EAAE,UAAU,kBAAkB,iBAAiB;;;;;;;;;;;;;;;;;AAIlK"}},
    {"offset": {"line": 1450, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/panels/SettingsPanel.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from 'react'\nimport Toggle from '../ui/Toggle'\nimport IconButton from '../ui/IconButton'\n\nexport default function SettingsPanel({ onClose }) {\n  const [settings, setSettings] = useState({\n    signals: false,\n    hmrPeriods: true,\n    priceAlerts: true,\n    openPositions: true,\n    tpsl: false,\n    economicCalendar: true,\n    highImpact: true,\n    middleImpact: false,\n    lowImpact: false,\n    lowestImpact: false,\n    soundPriceAlerts: false,\n    soundClosing: false,\n    autoTPSL: false,\n    orderMode: 'regular',\n    priceSource: 'bid',\n    theme: 'dark',\n    timezone: 'Etc/UTC'\n  })\n\n  const handleToggle = (key) => {\n    setSettings(prev => ({ ...prev, [key]: !prev[key] }))\n  }\n\n  const handleSelect = (key, value) => {\n    setSettings(prev => ({ ...prev, [key]: value }))\n  }\n\n  return (\n    <div className=\"w-full min-w-[240px] flex flex-col h-full overflow-hidden bg-background border border-gray-800 rounded-md\">\n      {/* Header */}\n      <div className=\"pt-4 px-4 flex-shrink-0\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-gray-400 font-medium uppercase text-[13px]\">Settings</h2>\n          <IconButton onClick={onClose} tooltip=\"Hide panel\">\n            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n              <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n            </svg>\n          </IconButton>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 overflow-y-auto min-h-0 p-3 lg:p-4 space-y-4 lg:space-y-6\">\n        {/* Show on chart */}\n        <div>\n          <h3 className=\"text-gray-300 text-xs lg:text-sm font-bold mb-3 lg:mb-4\">Show on chart</h3>\n          <div className=\"space-y-3 lg:space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-200 text-sm lg:text-base\">Signals</span>\n              <Toggle checked={settings.signals} onChange={() => handleToggle('signals')} />\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-200 text-sm lg:text-base\">HMR periods</span>\n              <Toggle checked={settings.hmrPeriods} onChange={() => handleToggle('hmrPeriods')} />\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-200 text-sm lg:text-base\">Price alerts</span>\n              <Toggle checked={settings.priceAlerts} onChange={() => handleToggle('priceAlerts')} />\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-200 text-sm lg:text-base\">Open positions</span>\n              <Toggle checked={settings.openPositions} onChange={() => handleToggle('openPositions')} />\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-200 text-sm lg:text-base\">TP / SL / Stop / Limit</span>\n              <Toggle checked={settings.tpsl} onChange={() => handleToggle('tpsl')} />\n            </div>\n\n            {/* Economic Calendar */}\n            <div>\n              <div className=\"flex items-center justify-between mb-2 lg:mb-3\">\n                <span className=\"text-gray-200 text-sm lg:text-base\">Economic calendar</span>\n                <Toggle checked={settings.economicCalendar} onChange={() => handleToggle('economicCalendar')} />\n              </div>\n              {settings.economicCalendar && (\n                <div className=\"ml-4 lg:ml-6 space-y-2 lg:space-y-3\">\n                  <div className=\"flex items-center gap-2 lg:gap-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={settings.highImpact}\n                      onChange={() => handleToggle('highImpact')}\n                      className=\"w-4 h-4 text-gray-500 bg-gray-700 border-gray-800 rounded focus:ring-gray-500 cursor-pointer\"\n                    />\n                    <span className=\"text-gray-200 text-sm lg:text-base\">High impact</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 lg:gap-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={settings.middleImpact}\n                      onChange={() => handleToggle('middleImpact')}\n                      className=\"w-4 h-4 text-gray-500 bg-gray-700 border-gray-800 rounded focus:ring-gray-500 cursor-pointer\"\n                    />\n                    <span className=\"text-gray-200 text-sm lg:text-base\">Middle impact</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 lg:gap-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={settings.lowImpact}\n                      onChange={() => handleToggle('lowImpact')}\n                      className=\"w-4 h-4 text-gray-500 bg-gray-700 border-gray-800 rounded focus:ring-gray-500 cursor-pointer\"\n                    />\n                    <span className=\"text-gray-200 text-sm lg:text-base\">Low impact</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 lg:gap-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={settings.lowestImpact}\n                      onChange={() => handleToggle('lowestImpact')}\n                      className=\"w-4 h-4 text-gray-500 bg-gray-700 border-gray-800 rounded focus:ring-gray-500 cursor-pointer\"\n                    />\n                    <span className=\"text-gray-200 text-sm lg:text-base\">Lowest impact</span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Sound effects */}\n        <div>\n          <h3 className=\"text-gray-300 text-xs lg:text-sm font-bold mb-3 lg:mb-4\">Sound effects</h3>\n          <div className=\"space-y-3 lg:space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-200 text-sm lg:text-base\">Price alerts</span>\n              <Toggle checked={settings.soundPriceAlerts} onChange={() => handleToggle('soundPriceAlerts')} />\n            </div>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-gray-200 text-sm lg:text-base\">Closing by TP / SL / SO</span>\n              <Toggle checked={settings.soundClosing} onChange={() => handleToggle('soundClosing')} />\n            </div>\n          </div>\n        </div>\n\n        {/* Trading settings */}\n        <div>\n          <h3 className=\"text-gray-300 text-xs lg:text-sm font-bold mb-3 lg:mb-4\">Trading settings</h3>\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-gray-200 text-sm lg:text-base\">Set TP/SL automatically</span>\n            <Toggle checked={settings.autoTPSL} onChange={() => handleToggle('autoTPSL')} />\n          </div>\n        </div>\n\n        {/* Open order mode */}\n        <div>\n          <h3 className=\"text-gray-300 text-xs lg:text-sm font-bold mb-3 lg:mb-4\">Open order mode</h3>\n          <select\n            value={settings.orderMode}\n            onChange={(e) => handleSelect('orderMode', e.target.value)}\n            className=\"w-full bg-[#2a3441] border border-gray-800 rounded px-3 py-2 text-sm lg:text-base text-gray-200 cursor-pointer\"\n          >\n            <option value=\"regular\">Regular form</option>\n            <option value=\"quick\">Quick form</option>\n          </select>\n        </div>\n\n        {/* Price source */}\n        <div>\n          <h3 className=\"text-gray-300 text-xs lg:text-sm font-bold mb-3 lg:mb-4\">Price source</h3>\n          <select\n            value={settings.priceSource}\n            onChange={(e) => handleSelect('priceSource', e.target.value)}\n            className=\"w-full bg-[#2a3441] border border-gray-800 rounded px-3 py-2 text-sm lg:text-base text-gray-200 cursor-pointer\"\n          >\n            <option value=\"bid\">Bid</option>\n            <option value=\"ask\">Ask</option>\n            <option value=\"mid\">Mid</option>\n          </select>\n        </div>\n\n        {/* Appearance */}\n        <div>\n          <h3 className=\"text-gray-300 text-xs lg:text-sm font-bold mb-3 lg:mb-4\">Appearance</h3>\n          <select\n            value={settings.theme}\n            onChange={(e) => handleSelect('theme', e.target.value)}\n            className=\"w-full bg-[#2a3441] border border-gray-800 rounded px-3 py-2 text-sm lg:text-base text-gray-200 cursor-pointer\"\n          >\n            <option value=\"dark\">Always dark</option>\n            <option value=\"light\">Always light</option>\n            <option value=\"auto\">Auto</option>\n          </select>\n        </div>\n\n        {/* Time zone */}\n        <div>\n          <h3 className=\"text-gray-300 text-xs lg:text-sm font-bold mb-3 lg:mb-4\">Time zone</h3>\n          <select\n            value={settings.timezone}\n            onChange={(e) => handleSelect('timezone', e.target.value)}\n            className=\"w-full bg-[#2a3441] border border-gray-800 rounded px-3 py-2 text-sm lg:text-base text-gray-200 cursor-pointer\"\n          >\n            <option value=\"Etc/UTC\">UTC</option>\n            <option value=\"America/New_York\">New York</option>\n            <option value=\"Europe/London\">London</option>\n            <option value=\"Asia/Tokyo\">Tokyo</option>\n          </select>\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2188, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/layout/LeftSidebar.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from 'react'\nimport WatchlistPanel from '../panels/WatchlistPanel'\nimport EconomicCalendarPanel from '../panels/EconomicCalendarPanel'\nimport SettingsPanel from '../panels/SettingsPanel'\nimport ResizablePanel from '../panels/ResizablePanel'\nimport { LuList, LuCalendar, LuSettings } from 'react-icons/lu'\nimport Tooltip from '../ui/Tooltip'\n\ninterface LeftSidebarProps {\n  onPanelStateChange?: (hasActivePanel: boolean) => void;\n  isExpanded?: boolean;\n}\n\nexport default function LeftSidebar({ onPanelStateChange, isExpanded }: LeftSidebarProps) {\n  const [activePanel, setActivePanel] = useState<string | null>('instruments')\n\n  const togglePanel = (panel: string) => {\n    setActivePanel(activePanel === panel ? null : panel)\n  }\n\n  const closePanel = () => {\n    setActivePanel(null)\n  }\n\n  const hasActivePanel = activePanel !== null\n\n  // Reset active panel when sidebar is collapsed externally\n  useEffect(() => {\n    if (!isExpanded) {\n      setActivePanel(null)\n    }\n  }, [isExpanded])\n\n  // Notify parent component about panel state changes\n  useEffect(() => {\n    if (onPanelStateChange) {\n      onPanelStateChange(hasActivePanel)\n    }\n  }, [hasActivePanel, onPanelStateChange])\n\n  return (\n    <div className={`flex h-full overflow-hidden min-h-0 gap-1`}>\n      {/* ${!hasActivePanel ? 'border-r-4 border-gray-600' : ''} */}\n      <aside className={`w-[48px] flex flex-col items-center py-3 gap-4 flex-shrink-0 h-full bg-background rounded-tr-lg border border-gray-800`}>\n        {/* Instruments Button */}\n        <div>\n          <Tooltip text=\"Instruments\" placement=\"right\">\n            <button\n              className={`cursor-pointer w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-200 rounded-sm transition-all duration-200 ${activePanel === 'instruments' ? 'bg-[#263239] border border-gray-400 text-gray-200' : 'hover:bg-[#263239] hover:border hover:border-gray-400 border-2 border-transparent'\n                }`}\n              type=\"button\"\n              data-test=\"aside-panel-watchlist-button\"\n              aria-label=\"Instruments\"\n              onClick={() => togglePanel('instruments')}\n            >\n              <LuList size={20} className={activePanel === 'instruments' ? 'text-gray-200' : 'text-gray-300'} />\n            </button>\n          </Tooltip>\n        </div>\n\n        {/* Economic Calendar Button - HIDDEN */}\n        {false && (\n          <div>\n            <Tooltip text=\"Economic calendar\" placement=\"right\">\n              <button\n                className={`cursor-pointer w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-200 rounded-sm transition-all duration-200 ${activePanel === 'calendar' ? 'bg-[#263239] border border-gray-400 text-gray-200' : 'hover:bg-[#263239] hover:border hover:border-gray-400 border-2 border-transparent'\n                  }`}\n                type=\"button\"\n                data-test=\"aside-panel-calendar-events-button\"\n                aria-label=\"Economic calendar\"\n                onClick={() => togglePanel('calendar')}\n              >\n                <LuCalendar size={20} className={activePanel === 'calendar' ? 'text-white' : 'text-gray-300'} />\n              </button>\n            </Tooltip>\n          </div>\n        )}\n\n        {/* Settings Button */}\n        <div>\n          <Tooltip text=\"Settings\" placement=\"right\">\n            <button\n              className={`cursor-pointer w-8 h-8 flex items-center justify-center text-gray-400 hover:text-white rounded-sm transition-all duration-200 ${activePanel === 'settings' ? 'bg-[#263239] border border-gray-400 text-gray-200' : 'hover:bg-[#263239] hover:border hover:border-gray-400 border-2 border-transparent'\n                }`}\n              type=\"button\"\n              data-test=\"aside-panel-settings-button\"\n              aria-label=\"Settings\"\n              onClick={() => togglePanel('settings')}\n            >\n              <LuSettings size={20} className={activePanel === 'settings' ? 'text-white' : 'text-gray-300'} />\n            </button>\n          </Tooltip>\n        </div>\n      </aside>\n\n      {/* Panel Content - only show when panel is active */}\n      {hasActivePanel && (\n        <>\n          {activePanel === 'instruments' && (\n            <div className=\"bg-background border-r border-gray-700 flex flex-col h-full min-h-0 overflow-hidden flex-1 rounded-t-md\">\n              <WatchlistPanel onClose={closePanel} />\n            </div>\n          )}\n          {false && activePanel === 'calendar' && (\n            <div className=\"bg-background border-r border-gray-700 flex flex-col h-full min-h-0 overflow-hidden flex-1 rounded-t-md\">\n              <EconomicCalendarPanel onClose={closePanel} />\n            </div>\n          )}\n          {activePanel === 'settings' && (\n            <div className=\"bg-background border-r border-gray-700 flex flex-col h-full min-h-0 overflow-hidden flex-1 rounded-t-md\">\n              <SettingsPanel onClose={closePanel} />\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAEA;AACA;AAPA;;;;;;;;AAce,SAAS,YAAY,EAAE,kBAAkB,EAAE,UAAU,EAAoB;IACtF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAE9D,MAAM,cAAc,CAAC;QACnB,eAAe,gBAAgB,QAAQ,OAAO;IAChD;IAEA,MAAM,aAAa;QACjB,eAAe;IACjB;IAEA,MAAM,iBAAiB,gBAAgB;IAEvC,0DAA0D;IAC1D,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,YAAY;YACf,eAAe;QACjB;IACF,GAAG;QAAC;KAAW;IAEf,oDAAoD;IACpD,IAAA,kNAAS,EAAC;QACR,IAAI,oBAAoB;YACtB,mBAAmB;QACrB;IACF,GAAG;QAAC;QAAgB;KAAmB;IAEvC,qBACE,8OAAC;QAAI,WAAW,CAAC,yCAAyC,CAAC;;0BAEzD,8OAAC;gBAAM,WAAW,CAAC,sHAAsH,CAAC;;kCAExI,8OAAC;kCACC,cAAA,8OAAC,8IAAO;4BAAC,MAAK;4BAAc,WAAU;sCACpC,cAAA,8OAAC;gCACC,WAAW,CAAC,iIAAiI,EAAE,gBAAgB,gBAAgB,sDAAsD,qFACjO;gCACJ,MAAK;gCACL,aAAU;gCACV,cAAW;gCACX,SAAS,IAAM,YAAY;0CAE3B,cAAA,8OAAC,wJAAM;oCAAC,MAAM;oCAAI,WAAW,gBAAgB,gBAAgB,kBAAkB;;;;;;;;;;;;;;;;;;;;;oBAMpF,uBACC,8OAAC;kCACC,cAAA,8OAAC,8IAAO;4BAAC,MAAK;4BAAoB,WAAU;sCAC1C,cAAA,8OAAC;gCACC,WAAW,CAAC,iIAAiI,EAAE,gBAAgB,aAAa,sDAAsD,qFAC9N;gCACJ,MAAK;gCACL,aAAU;gCACV,cAAW;gCACX,SAAS,IAAM,YAAY;0CAE3B,cAAA,8OAAC,4JAAU;oCAAC,MAAM;oCAAI,WAAW,gBAAgB,aAAa,eAAe;;;;;;;;;;;;;;;;;;;;;kCAOrF,8OAAC;kCACC,cAAA,8OAAC,8IAAO;4BAAC,MAAK;4BAAW,WAAU;sCACjC,cAAA,8OAAC;gCACC,WAAW,CAAC,8HAA8H,EAAE,gBAAgB,aAAa,sDAAsD,qFAC3N;gCACJ,MAAK;gCACL,aAAU;gCACV,cAAW;gCACX,SAAS,IAAM,YAAY;0CAE3B,cAAA,8OAAC,4JAAU;oCAAC,MAAM;oCAAI,WAAW,gBAAgB,aAAa,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;YAOpF,gCACC;;oBACG,gBAAgB,+BACf,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,yJAAc;4BAAC,SAAS;;;;;;;;;;;oBAG5B,SAAS,gBAAgB,4BACxB,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,gKAAqB;4BAAC,SAAS;;;;;;;;;;;oBAGnC,gBAAgB,4BACf,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,wJAAa;4BAAC,SAAS;;;;;;;;;;;;;;;;;;;AAOtC"}},
    {"offset": {"line": 2401, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/chart/DebugChart.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\n\nexport default function DebugChart() {\n    return (\n        <div className=\"w-full h-full bg-red-500 flex items-center justify-center text-white text-2xl font-bold\">\n            DEBUG CHART COMPONENT - IF YOU SEE THIS, THE LAYOUT IS WORKING\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAIe,SAAS;IACpB,qBACI,8OAAC;QAAI,WAAU;kBAA0F;;;;;;AAIjH"}},
    {"offset": {"line": 2422, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/layout/ChartSection.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\n// import TVChartContainer from '../chart/TVChartContainer';\nimport DebugChart from '../chart/DebugChart';\n\nconst ChartSection = () => {\n    return (\n        <div className=\"flex-1 h-full overflow-hidden bg-[#0F0F0F]\">\n            <DebugChart />\n        </div>\n    );\n};\n\nexport default ChartSection;\n"],"names":[],"mappings":";;;;;AAGA,4DAA4D;AAC5D;AAJA;;;AAMA,MAAM,eAAe;IACjB,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC,oJAAU;;;;;;;;;;AAGvB;uCAEe"}},
    {"offset": {"line": 2451, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/ui/input.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"flex h-10 w-full min-w-0 rounded-md border border-white/8 bg-white/3 px-4 py-2 text-sm text-white\",\n        \"backdrop-blur-sm transition-all duration-200\",\n        \"placeholder:text-white/40\",\n        \"focus:outline-none focus:border-white/12 focus:bg-white/5\",\n        \"disabled:cursor-not-allowed disabled:opacity-50\",\n        \"file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-white\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,qGACA,gDACA,6BACA,6DACA,mDACA,mFACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2477, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/ui/tabs.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn(\"flex flex-col gap-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        \"bg-white/5 text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50\",\n        \"text-white/60 data-[state=active]:text-white data-[state=active]:bg-white/10\",\n        \"hover:text-white/80\",\n        \"[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn(\"flex-1 outline-none\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,8OAAC,wKAAkB;QACjB,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,yGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,6PACA,gFACA,uBACA,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2543, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/modals/OrderModeModal.tsx"],"sourcesContent":["\"use client\";\nimport { X } from 'lucide-react'\nimport { useState } from 'react'\n\nexport default function OrderModeModal({ isOpen, onClose, onConfirm, mode }) {\n  const [dontShowAgain, setDontShowAgain] = useState(false)\n\n  if (!isOpen) return null\n\n  const isRiskCalculator = mode === 'Risk calculator form'\n\n  return (\n    <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n      <div className=\"bg-background w-[500px] rounded-lg shadow-2xl border border-[#2a2f36] flex flex-col max-h-[90vh]\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-[#2a2f36]\">\n          <h2 className=\"text-xl font-bold text-white\">\n            {isRiskCalculator ? 'Risk Calculator mode' : 'One-click trading mode'}\n          </h2>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-white transition-colors\">\n            <X size={20} />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 overflow-y-auto text-[#c0c0c0] text-[14px] leading-relaxed space-y-4 custom-scrollbar\">\n          {isRiskCalculator ? (\n            <>\n              <p>\n                Selecting this option activates the Risk Calculator mode for order placement.\n              </p>\n              <p>\n                In this mode, position size is calculated automatically based on the specified Risk and Stop Loss level.\n              </p>\n              <p>\n                By enabling this mode, you understand that your market or pending orders will be submitted by clicking the Confirm button, using volume, calculated based on entered parameters.\n              </p>\n              <p>\n                You agree to accept all risks associated with the use of the order submission mode you have chosen, including, without limitation, the risk of errors, commissions or mistakes made in submitting any order.\n              </p>\n              <p>To place an order:</p>\n              <ul className=\"list-disc pl-5 space-y-1\">\n                <li>Specify preferred Risk value, this is the maximum amount of loss you are willing to tolerate should the order close by Stop Loss</li>\n                <li>Enter Stop Loss level at which you are willing to risk the specified amount</li>\n                <li>Optionally, specify Take Profit</li>\n                <li>Click on Confirm to place the order with specified Stop Loss and Take Profit, and calculated volume</li>\n              </ul>\n            </>\n          ) : (\n            <>\n              <p>\n                Selecting this option activates One-click Trading mode for order placement.\n              </p>\n              <p>\n                By enabling this mode, you understand that your market or limit orders will be submitted by clicking the bid or ask rate button, without any further order confirmation. You agree to accept all risks associated with the use of the order submission mode you have chosen, including, without limitation, the risk of errors, commissions or mistakes made in submitting any order.\n              </p>\n            </>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-6 py-4 border-t border-[#2a2f36] flex flex-col gap-4\">\n          <div className=\"flex items-center gap-2\">\n            <input\n              type=\"checkbox\"\n              id=\"dont-show\"\n              checked={dontShowAgain}\n              onChange={(e) => setDontShowAgain(e.target.checked)}\n              className=\"w-4 h-4 rounded border-gray-600 bg-[#2a2f36] text-[#8b5cf6] focus:ring-0 focus:ring-offset-0 cursor-pointer\"\n            />\n            <label htmlFor=\"dont-show\" className=\"text-[14px] text-gray-400 cursor-pointer select-none\">\n              Don't show again\n            </label>\n          </div>\n\n          <div className=\"flex items-center justify-end gap-3\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 bg-[#2a2f36] hover:bg-[#363c45] text-white text-[14px] font-medium rounded transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              onClick={() => onConfirm(dontShowAgain)}\n              className=\"px-4 py-2 bg-[#8b5cf6] hover:bg-[#7c3aed] text-white text-[14px] font-bold rounded transition-colors\"\n            >\n              Yes, proceed\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,eAAe,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE;IACzE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IAEnD,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,mBAAmB,SAAS;IAElC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCACX,mBAAmB,yBAAyB;;;;;;sCAE/C,8OAAC;4BAAO,SAAS;4BAAS,WAAU;sCAClC,cAAA,8OAAC,iMAAC;gCAAC,MAAM;;;;;;;;;;;;;;;;;8BAKb,8OAAC;oBAAI,WAAU;8BACZ,iCACC;;0CACE,8OAAC;0CAAE;;;;;;0CAGH,8OAAC;0CAAE;;;;;;0CAGH,8OAAC;0CAAE;;;;;;0CAGH,8OAAC;0CAAE;;;;;;0CAGH,8OAAC;0CAAE;;;;;;0CACH,8OAAC;gCAAG,WAAU;;kDACZ,8OAAC;kDAAG;;;;;;kDACJ,8OAAC;kDAAG;;;;;;kDACJ,8OAAC;kDAAG;;;;;;kDACJ,8OAAC;kDAAG;;;;;;;;;;;;;qDAIR;;0CACE,8OAAC;0CAAE;;;;;;0CAGH,8OAAC;0CAAE;;;;;;;;;;;;;8BAQT,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,IAAG;oCACH,SAAS;oCACT,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,OAAO;oCAClD,WAAU;;;;;;8CAEZ,8OAAC;oCAAM,SAAQ;oCAAY,WAAU;8CAAuD;;;;;;;;;;;;sCAK9F,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS,IAAM,UAAU;oCACzB,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}},
    {"offset": {"line": 2776, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/trading/OrderPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\"\nimport { X, Plus, Minus, HelpCircle } from \"lucide-react\"\nimport { cn, formatSymbolDisplay } from \"@/lib/utils\"\nimport { Input } from \"@/components/ui/input\"\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport Tooltip from \"@/components/ui/Tooltip\"\nimport FlagIcon from \"@/components/ui/FlagIcon\"\nimport { useTrading } from '../../context/TradingContext'\nimport { useWebSocket } from '../../context/WebSocketContext'\nimport { useAccount } from '../../context/AccountContext'\nimport { useInstruments } from '../../context/InstrumentContext'\nimport OrderModeModal from '../modals/OrderModeModal'\nimport ReactDOM from 'react-dom'\n\nexport interface OrderPanelProps extends React.HTMLAttributes<HTMLDivElement> {\n  onClose?: () => void\n  onBuy?: (data: OrderData) => void\n  onSell?: (data: OrderData) => void\n}\n\nexport interface OrderData {\n  orderType: \"market\" | \"pending\" | \"limit\"\n  pendingOrderType?: \"limit\" | \"stop\" // For pending orders: \"limit\" = Buy/Sell Limit, \"stop\" = Buy/Sell Stop\n  volume: number\n  openPrice?: number\n  stopLoss?: number\n  takeProfit?: number\n  risk?: number\n}\n\ntype FormType = \"one-click\" | \"regular\" | \"risk-calculator\"\n\nconst OrderPanel: React.FC<OrderPanelProps> = ({\n  onClose,\n  onBuy,\n  onSell,\n  className,\n  ...props\n}) => {\n  const { symbol } = useTrading()\n  const { subscribe, unsubscribe, lastQuotes, normalizeSymbol, isConnected } = useWebSocket()\n  const { currentBalance } = useAccount()\n  const { instruments } = useInstruments()\n  const [marketClosedToast, setMarketClosedToast] = React.useState<string | null>(null)\n\n  // Get real-time prices from WebSocket\n  const hubSymbol = React.useMemo(() => {\n    const s = (symbol || 'BTCUSD').replace('/', '');\n    // Convert trailing uppercase M or R to lowercase to match instrument feed\n    return s.replace(/M$/, 'm').replace(/R$/, 'r');\n  }, [symbol])\n\n  React.useEffect(() => {\n    if (hubSymbol) {\n      subscribe([hubSymbol])\n      return () => unsubscribe([hubSymbol])\n    }\n  }, [hubSymbol, subscribe, unsubscribe])\n\n  const quote = lastQuotes[normalizeSymbol(hubSymbol)] || lastQuotes[hubSymbol] || {}\n  const instrument = React.useMemo(() => {\n    const norm = normalizeSymbol(hubSymbol)\n    return instruments.find(i => normalizeSymbol(i.symbol) === norm || i.symbol === hubSymbol || i.symbol === symbol)\n  }, [hubSymbol, instruments, normalizeSymbol, symbol])\n\n  const isCrypto = React.useMemo(() => {\n    const cat = (instrument?.category || '').toLowerCase()\n    return cat.includes('crypto')\n  }, [instrument])\n  const isMarketClosed = React.useMemo(() => {\n    if (isCrypto) return false\n    const now = new Date()\n    const day = now.getUTCDay()\n    const minutes = now.getUTCHours() * 60 + now.getUTCMinutes()\n    const isWeekendClosed =\n      (day === 5 && minutes >= 21 * 60) ||\n      day === 6 ||\n      (day === 0 && minutes < 21 * 60 + 5)\n    return isWeekendClosed\n  }, [isCrypto])\n  const marketClosedMessage = \"Market closed for this instrument. Trading resumes Sunday 21:05 UTC.\"\n\n  // Use live prices if available, otherwise fall back to defaults\n  const currentSellPrice = quote.bid ?? 0\n  const currentBuyPrice = quote.ask ?? 0\n  const spreadVal = (quote.spread || 0) * 100\n  const currentSpread = `${spreadVal.toFixed(2)} pips`\n\n  const [formType, setFormType] = React.useState<FormType>(\"regular\")\n  const [orderType, setOrderType] = React.useState<\"market\" | \"limit\" | \"pending\">(\"market\")\n  const [pendingOrderType, setPendingOrderType] = React.useState<\"limit\" | \"stop\">(\"limit\") // For pending orders: limit or stop\n  const [volume, setVolume] = React.useState(\"0.01\")\n  const [risk, setRisk] = React.useState(\"\")\n  const [riskMode, setRiskMode] = React.useState<\"usd\" | \"percent\">(\"usd\")\n  const [takeProfit, setTakeProfit] = React.useState(\"\")\n  const [takeProfitMode, setTakeProfitMode] = React.useState<\"pips\" | \"price\">(\"price\")\n  const [stopLoss, setStopLoss] = React.useState(\"\")\n  const [stopLossMode, setStopLossMode] = React.useState<\"pips\" | \"price\">(\"price\")\n  const [openPrice, setOpenPrice] = React.useState(\"\")\n  const [showMoreDetails, setShowMoreDetails] = React.useState(false)\n  const [showOneClickModal, setShowOneClickModal] = React.useState(false)\n  const [showRiskCalculatorModal, setShowRiskCalculatorModal] = React.useState(false)\n  const [pendingFormType, setPendingFormType] = React.useState<FormType | null>(null)\n  const [pendingOrderSide, setPendingOrderSide] = React.useState<'buy' | 'sell' | null>(null)\n  const [isLoading, setIsLoading] = React.useState(false)\n  const isSyncingFromChart = React.useRef(false)\n  const lastPreviewData = React.useRef<string | null>(null)\n\n  // Check if user has dismissed the one-click modal\n  const shouldShowOneClickModal = React.useCallback(() => {\n    if (typeof window === 'undefined') return false\n    const dismissed = localStorage.getItem('zup_oneclick_modal_dismissed')\n    return dismissed !== 'true'\n  }, [])\n\n  // Check if user has dismissed the risk calculator modal\n  const shouldShowRiskCalculatorModal = React.useCallback(() => {\n    if (typeof window === 'undefined') return false\n    const dismissed = localStorage.getItem('zup_riskcalculator_modal_dismissed')\n    return dismissed !== 'true'\n  }, [])\n\n  // Handle form type change - show modal for one-click or risk calculator if needed\n  const handleFormTypeChange = React.useCallback((newFormType: FormType) => {\n    if (newFormType === \"one-click\" && shouldShowOneClickModal()) {\n      setPendingFormType(newFormType)\n      setShowOneClickModal(true)\n    } else if (newFormType === \"risk-calculator\" && shouldShowRiskCalculatorModal()) {\n      setPendingFormType(newFormType)\n      setShowRiskCalculatorModal(true)\n    } else {\n      setFormType(newFormType)\n    }\n  }, [shouldShowOneClickModal, shouldShowRiskCalculatorModal])\n\n  // Handle one-click modal confirmation\n  const handleOneClickModalConfirm = React.useCallback((dontShowAgain: boolean) => {\n    if (dontShowAgain && typeof window !== 'undefined') {\n      localStorage.setItem('zup_oneclick_modal_dismissed', 'true')\n    }\n    if (pendingFormType) {\n      setFormType(pendingFormType)\n      setPendingFormType(null)\n    }\n    setShowOneClickModal(false)\n  }, [pendingFormType])\n\n  // Ref for orderType to avoid stale usage in event listener\n  const orderTypeRef = React.useRef(orderType)\n  React.useEffect(() => {\n    orderTypeRef.current = orderType\n  }, [orderType])\n\n  // Ref to track the debounce timeout for clearing the sync flag\n  const syncTimeoutRef = React.useRef<NodeJS.Timeout | null>(null)\n\n  // Sync TP/SL from chart preview\n  React.useEffect(() => {\n    const handlePreviewChange = (e: any) => {\n      const { takeProfit: tp, stopLoss: sl, price, source } = e.detail || {}\n\n      // Prevent loops\n      if (source === 'panel') return;\n\n      // Start syncing: Cancel any pending clear\n      if (syncTimeoutRef.current) {\n        clearTimeout(syncTimeoutRef.current)\n        syncTimeoutRef.current = null\n      }\n      isSyncingFromChart.current = true\n\n      console.log('[OrderPanel] Syncing from chart:', e.detail);\n\n      try {\n        if (tp !== undefined) {\n          // If 0 or null, set empty\n          const val = (tp && tp > 0) ? tp.toFixed(5).replace(/\\.?0+$/, \"\") : \"\"\n          setTakeProfit(val)\n          if (val) setTakeProfitMode(\"price\")\n        }\n\n        if (sl !== undefined) {\n          const val = (sl && sl > 0) ? sl.toFixed(5).replace(/\\.?0+$/, \"\") : \"\"\n          setStopLoss(val)\n          if (val) setStopLossMode(\"price\")\n        }\n\n        if (price !== undefined) {\n          setOpenPrice(price.toFixed(5).replace(/\\.?0+$/, \"\"))\n          // Use ref to check current order type\n          if (orderTypeRef.current === 'market') {\n            setOrderType('pending');\n            setPendingOrderType('limit');\n          }\n        }\n      } finally {\n        // Debounce the clearing of the flag\n        syncTimeoutRef.current = setTimeout(() => {\n          isSyncingFromChart.current = false\n          syncTimeoutRef.current = null\n        }, 300)\n      }\n    }\n\n    if (typeof window !== 'undefined') {\n      (window as any).addEventListener('__ON_ORDER_PREVIEW_CHANGE__', handlePreviewChange)\n      return () => {\n        (window as any).removeEventListener('__ON_ORDER_PREVIEW_CHANGE__', handlePreviewChange)\n      }\n    }\n  }, [])\n\n  // TEST FUNCTION - Remove after debugging\n  React.useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      (window as any).testOrderPanelSync = () => {\n        console.log(\"[TEST] Manually triggering __ON_ORDER_PREVIEW_CHANGE__ event\");\n        window.dispatchEvent(new CustomEvent(\"__ON_ORDER_PREVIEW_CHANGE__\", {\n          detail: {\n            id: \"PREVIEW_ORDER_ID\",\n            price: 1.10000,\n            takeProfit: 1.10500,\n            stopLoss: 1.09500,\n            qty: 0.01,\n            source: \"chart\"\n          }\n        }));\n      };\n      console.log(\"[OrderPanel] Test function available: window.testOrderPanelSync()\");\n    }\n  }, []);\n\n\n  // Handle one-click modal cancel\n  const handleOneClickModalCancel = React.useCallback(() => {\n    setShowOneClickModal(false)\n    setPendingFormType(null)\n  }, [])\n\n  // Handle risk calculator modal confirmation\n  const handleRiskCalculatorModalConfirm = React.useCallback((dontShowAgain: boolean) => {\n    if (dontShowAgain && typeof window !== 'undefined') {\n      localStorage.setItem('zup_riskcalculator_modal_dismissed', 'true')\n    }\n    if (pendingFormType) {\n      setFormType(pendingFormType)\n      setPendingFormType(null)\n    }\n    setShowRiskCalculatorModal(false)\n  }, [pendingFormType])\n\n  // Handle risk calculator modal cancel\n  const handleRiskCalculatorModalCancel = React.useCallback(() => {\n    setShowRiskCalculatorModal(false)\n    setPendingFormType(null)\n  }, [])\n\n  // Update dropdown modes when form type changes\n  React.useEffect(() => {\n    if (formType === \"regular\") {\n      setTakeProfitMode(\"price\")\n      setStopLossMode(\"price\")\n    } else if (formType === \"risk-calculator\") {\n      setTakeProfitMode(\"pips\")\n      setStopLossMode(\"pips\")\n      setRiskMode(\"usd\")\n    }\n    // Reset pending order side when form type changes\n    setPendingOrderSide(null)\n  }, [formType])\n\n  // Trigger order preview on chart\n  React.useEffect(() => {\n    if (typeof window === 'undefined' || !(window as any).__SET_ORDER_PREVIEW__) return\n\n    // If we just got an update FROM the chart, don't send it back to the chart\n    if (isSyncingFromChart.current) return;\n\n    if (!pendingOrderSide) {\n      if (lastPreviewData.current !== 'null') {\n        (window as any).__SET_ORDER_PREVIEW__({ side: null })\n        lastPreviewData.current = 'null'\n      }\n      return\n    }\n\n    const previewPrice = orderType === 'market'\n      ? (pendingOrderSide === 'buy' ? currentBuyPrice : currentSellPrice)\n      : parseFloat(openPrice)\n\n    if (isNaN(previewPrice) || previewPrice <= 0) {\n      // If pending but no price, maybe show nothing or keep previous? \n      // Better to clear if invalid price\n      if (orderType !== 'market') {\n        (window as any).__SET_ORDER_PREVIEW__({ side: null })\n        return\n      }\n    }\n\n    const tpVal = parseFloat(takeProfit)\n    const slVal = parseFloat(stopLoss)\n    let tpPrice: number | undefined\n    let slPrice: number | undefined\n\n    if (!isNaN(tpVal) && tpVal > 0) {\n      if (takeProfitMode === 'price') {\n        tpPrice = tpVal\n      } else {\n        // Pips mode (pipSize * value)\n        const pipSize = getPipSize\n        const offset = tpVal * pipSize\n        tpPrice = pendingOrderSide === 'buy' ? previewPrice + offset : previewPrice - offset\n      }\n    }\n\n    if (!isNaN(slVal) && slVal > 0) {\n      if (stopLossMode === 'price') {\n        slPrice = slVal\n      } else {\n        const pipSize = getPipSize\n        const offset = slVal * pipSize\n        slPrice = pendingOrderSide === 'buy' ? previewPrice - offset : previewPrice + offset\n      }\n    }\n\n    // Directional validation (User request: TP must be below for Sell, above for Buy)\n    if (tpPrice !== undefined) {\n      const isValid = pendingOrderSide === 'buy' ? tpPrice > previewPrice : tpPrice < previewPrice\n      if (!isValid) tpPrice = undefined\n    }\n    if (slPrice !== undefined) {\n      const isValid = pendingOrderSide === 'buy' ? slPrice < previewPrice : slPrice > previewPrice\n      if (!isValid) slPrice = undefined\n    }\n\n    const previewPayload = {\n      symbol: symbol,\n      side: pendingOrderSide,\n      qty: parseFloat(volume) || 0.01,\n      price: previewPrice,\n      type: orderType === 'market' ? 'limit' : pendingOrderType,\n      takeProfit: tpPrice || 0,\n      stopLoss: slPrice || 0,\n      text: \" \"\n    }\n\n    // Dirty check: Only update if anything meaningful changed to avoid chart flicker\n    const payloadStr = JSON.stringify(previewPayload)\n    if (lastPreviewData.current === payloadStr) return\n    lastPreviewData.current = payloadStr;\n\n    (window as any).__SET_ORDER_PREVIEW__(previewPayload)\n  }, [pendingOrderSide, orderType, openPrice, volume, currentBuyPrice, currentSellPrice, symbol, pendingOrderType, takeProfit, stopLoss, takeProfitMode, stopLossMode])\n\n  // Get pip size based on symbol type\n  const getPipSize = React.useMemo(() => {\n    const symbolUpper = (symbol || '').toUpperCase()\n    const cat = (instrument?.category || '').toLowerCase()\n\n    if (symbolUpper.includes('JPY')) {\n      return 0.01\n    } else if (cat.includes('crypto') || symbolUpper.includes('BTC') || symbolUpper.includes('ETH')) {\n      return 1.00 // 1 point = 1 dollar\n    } else if (cat.includes('index') || cat.includes('indice') || symbolUpper.includes('US30') || symbolUpper.includes('SPX') || symbolUpper.includes('NAS')) {\n      return 1.00 // 1 point = 1 unit (4500 -> 4520 is 20 points)\n    } else if (cat.includes('metal') || symbolUpper.includes('XAU') || symbolUpper.includes('XAG')) {\n      return 1.00 // 1 point = 1 dollar (2500 -> 2520 is 20 points)\n    } else {\n      return 0.0001 // Forex default (0.0001 = 1 pip)\n    }\n  }, [symbol, instrument])\n\n  // Get default TP/SL offsets in \"points/pips\" (20 for all instruments as requested)\n  const getDefaultOffsets = React.useMemo(() => {\n    return { tp: 20, sl: 20 }\n  }, [])\n\n  // Get pip value per lot based on symbol type\n  const getPipValuePerLot = React.useMemo(() => {\n    const symbolUpper = (symbol || '').toUpperCase()\n    if (symbolUpper.includes('JPY')) {\n      return 10\n    } else if (symbolUpper.includes('XAU') || symbolUpper.includes('GOLD')) {\n      return 10\n    } else if (symbolUpper.includes('XAG') || symbolUpper.includes('SILVER')) {\n      return 10\n    } else if (symbolUpper.includes('BTC') || symbolUpper.includes('BTCUSD')) {\n      return getPipSize\n    } else if (symbolUpper.includes('ETH') || symbolUpper.includes('ETHUSD')) {\n      return getPipSize\n    } else {\n      return 10\n    }\n  }, [symbol, getPipSize])\n\n  // Calculate SL and TP prices from pips (for risk calculator)\n  const calculatePriceFromPips = React.useCallback((pips: number, isBuy: boolean, isStopLoss: boolean = false) => {\n    if (pips === null || pips === undefined || isNaN(pips)) return null\n    const pipSize = getPipSize\n    const priceChange = pips * pipSize\n    if (isBuy) {\n      return currentBuyPrice + priceChange\n    } else {\n      return currentSellPrice - priceChange\n    }\n  }, [getPipSize, currentBuyPrice, currentSellPrice])\n\n  // Auto-set TP/SL upon preview start OR symbol change\n  const lastProcessedSymbol = React.useRef(symbol)\n\n  React.useEffect(() => {\n    // If pendingOrderSide is active, we should show lines\n    if (pendingOrderSide) {\n      const offsets = getDefaultOffsets\n      const pipSize = getPipSize\n\n      // Calculate distances: \n      // For Forex (pipSize 0.0001), 20 * 0.0001 = 0.0020\n      // For Crypto (pipSize 1.00), 1000 * 1.00 = 1000\n      // For Metals/Indices (pipSize 1.00 or 0.01), 20 units\n      const tpDist = offsets.tp * pipSize\n      const slDist = offsets.sl * pipSize\n\n      let basePrice = 0\n      if (orderType === 'market') {\n        basePrice = pendingOrderSide === 'buy' ? currentBuyPrice : currentSellPrice\n      } else {\n        basePrice = parseFloat(openPrice) || 0\n      }\n\n      const isSymbolChanged = lastProcessedSymbol.current !== symbol\n      if (isSymbolChanged) {\n        lastProcessedSymbol.current = symbol\n      }\n\n      if (basePrice > 0) {\n        // Set TP/SL if missing OR if symbol just changed\n        if (!takeProfit || isSymbolChanged) {\n          const tp = pendingOrderSide === 'buy' ? basePrice + tpDist : basePrice - tpDist\n          setTakeProfit(tp.toFixed(instrument?.digits || 2).replace(/\\.?0+$/, \"\"))\n          setTakeProfitMode(\"price\")\n        }\n        if (!stopLoss || isSymbolChanged) {\n          const sl = pendingOrderSide === 'buy' ? basePrice - slDist : basePrice + slDist\n          setStopLoss(sl.toFixed(instrument?.digits || 2).replace(/\\.?0+$/, \"\"))\n          setStopLossMode(\"price\")\n        }\n      }\n    } else {\n      // If side is cleared (e.g. symbol changed but side not set), we can still prep values if we want\n      // but usually wait for side selection ('buy'/'sell')\n    }\n  }, [pendingOrderSide, symbol, currentBuyPrice, currentSellPrice, orderType, openPrice, getDefaultOffsets, getPipSize, instrument])\n\n  // Calculate volume for risk calculator based on Risk and Stop Loss\n  const calculateRiskBasedVolume = React.useMemo(() => {\n    if (formType !== \"risk-calculator\" || !risk || !stopLoss) {\n      return null\n    }\n\n    let riskAmount = parseFloat(risk)\n    // Handle risk in percentage\n    if (riskMode === \"percent\") {\n      const equity = currentBalance?.equity || 0\n      if (equity <= 0) return null\n      riskAmount = (riskAmount / 100) * equity\n    }\n\n    let stopLossPips = 0\n\n    if (stopLossMode === \"pips\") {\n      stopLossPips = Math.abs(parseFloat(stopLoss))\n    } else {\n      // stopLossMode === \"price\"\n      const slPrice = parseFloat(stopLoss)\n      if (isNaN(slPrice) || slPrice <= 0) return null\n\n      let entryPrice = 0\n      if (orderType === \"pending\" || orderType === \"limit\") {\n        entryPrice = openPrice ? parseFloat(openPrice) : 0\n      } else {\n        // For market orders, use mid price as estimation\n        entryPrice = (currentBuyPrice + currentSellPrice) / 2\n      }\n\n      if (entryPrice <= 0) return null\n\n      // Use pipSize from hook\n      const pipSize = getPipSize\n      stopLossPips = Math.abs(entryPrice - slPrice) / pipSize\n    }\n\n    if (!riskAmount || !stopLossPips || stopLossPips <= 0 || riskAmount <= 0) {\n      return null\n    }\n\n    const pipValuePerLot = getPipValuePerLot\n    const calculatedVolume = riskAmount / (stopLossPips * pipValuePerLot)\n    const clampedVolume = Math.max(0.01, Math.min(50.00, calculatedVolume))\n\n    return clampedVolume\n  }, [formType, risk, stopLoss, stopLossMode, riskMode, getPipValuePerLot, currentBalance, orderType, openPrice, currentBuyPrice, currentSellPrice, getPipSize])\n\n  // Calculate SL and TP prices from pips\n  const calculatedStopLossPrice = React.useMemo(() => {\n    if (formType !== \"risk-calculator\" || !stopLoss || stopLossMode !== \"pips\") return null\n    const pips = parseFloat(stopLoss)\n    if (isNaN(pips)) return null\n    return calculatePriceFromPips(pips, true, true)\n  }, [formType, stopLoss, stopLossMode, calculatePriceFromPips])\n\n  const calculatedTakeProfitPrice = React.useMemo(() => {\n    if (formType !== \"risk-calculator\" || !takeProfit || takeProfitMode !== \"pips\") return null\n    const pips = parseFloat(takeProfit)\n    if (isNaN(pips) || pips <= 0) return null\n    return calculatePriceFromPips(pips, true, false)\n  }, [formType, takeProfit, takeProfitMode, calculatePriceFromPips])\n\n  // Update volume when risk calculator values change\n  React.useEffect(() => {\n    if (formType === \"risk-calculator\" && calculateRiskBasedVolume !== null) {\n      setVolume(calculateRiskBasedVolume.toFixed(2))\n    }\n  }, [formType, calculateRiskBasedVolume])\n\n  const handleVolumeChange = (value: string) => {\n    if (value === '') {\n      setVolume('')\n      return\n    }\n\n    const trimmedValue = value.trim()\n\n    if (!/^[\\d.]*$/.test(trimmedValue) || (trimmedValue.match(/\\./g) || []).length > 1) {\n      return\n    }\n\n    const decimalIndex = trimmedValue.indexOf('.')\n    if (decimalIndex !== -1) {\n      const decimalPart = trimmedValue.substring(decimalIndex + 1)\n      if (decimalPart.length > 2) {\n        const truncated = trimmedValue.substring(0, decimalIndex + 3)\n        setVolume(truncated)\n        return\n      }\n    }\n\n    setVolume(trimmedValue)\n  }\n\n  const incrementVolume = () => {\n    const currentValue = parseFloat(volume) || 0.01\n    const roundedCurrent = Math.round(currentValue * 100) / 100\n    const newValue = Math.min(50.00, roundedCurrent + 0.01)\n    setVolume(newValue.toFixed(2))\n  }\n\n  const decrementVolume = () => {\n    const currentValue = parseFloat(volume) || 0.01\n    const roundedCurrent = Math.round(currentValue * 100) / 100\n    const newValue = Math.max(0.01, roundedCurrent - 0.01)\n    setVolume(newValue.toFixed(2))\n  }\n\n  const incrementField = (value: string, setter: (v: string) => void) => {\n    const basePrice = value && !isNaN(parseFloat(value)) ? parseFloat(value) : currentBuyPrice\n    setter((basePrice + 0.001).toFixed(3))\n  }\n\n  const decrementField = (value: string, setter: (v: string) => void) => {\n    const basePrice = value && !isNaN(parseFloat(value)) ? parseFloat(value) : currentBuyPrice\n    setter(Math.max(0, basePrice - 0.001).toFixed(3))\n  }\n\n  // Render buy/sell price buttons with spread overlay - solid backgrounds for one-click\n  const renderPriceButtonsSolid = () => (\n    <div className=\"relative grid grid-cols-2 gap-3\">\n      <button\n        onClick={async () => {\n          if (isMarketClosed) {\n            setMarketClosedToast(marketClosedMessage)\n            return\n          }\n          if (isLoading) return;\n          setPendingOrderSide('sell');\n          setIsLoading(true);\n          try {\n            onSell?.({\n              orderType,\n              pendingOrderType: orderType === \"pending\" ? pendingOrderType : undefined,\n              volume: parseFloat(volume),\n              openPrice: openPrice ? parseFloat(openPrice) : currentSellPrice,\n              stopLoss: undefined,\n              takeProfit: undefined,\n            });\n            setTimeout(() => {\n              setIsLoading(false);\n              setPendingOrderSide(null);\n            }, 1000);\n          } catch (err) {\n            setIsLoading(false);\n            setPendingOrderSide(null);\n          }\n        }}\n        disabled={isLoading}\n        className={cn(\n          \"rounded-md p-3 bg-[#FF5555] hover:bg-[#FF5555]/90 cursor-pointer text-left relative overflow-hidden transition-all text-white\",\n          isLoading && \"opacity-80\"\n        )}\n      >\n        {isLoading && pendingOrderSide === 'sell' && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-[1px] z-10\">\n            <div className=\"flex gap-1\">\n              {[0, 1, 2].map((i) => (\n                <div\n                  key={i}\n                  className=\"w-1.5 h-1.5 bg-white rounded-full opacity-80\"\n                />\n              ))}\n            </div>\n          </div>\n        )}\n        <div className=\"text-xs text-white/80 mb-1\">Sell</div>\n        <div className=\"price-font text-white font-bold text-sm leading-tight\">\n          {Math.floor(currentSellPrice).toLocaleString()}\n          <span className=\"text-lg\">.{String(Math.floor((currentSellPrice % 1) * 100)).padStart(2, '0')}</span>\n          <sup className=\"text-sm\">{String(Math.floor((currentSellPrice % 1) * 1000) % 10)}</sup>\n        </div>\n      </button>\n\n      <button\n        onClick={async () => {\n          if (isMarketClosed) {\n            setMarketClosedToast(marketClosedMessage)\n            return\n          }\n          if (isLoading) return;\n          setPendingOrderSide('buy');\n          setIsLoading(true);\n          try {\n            onBuy?.({\n              orderType,\n              pendingOrderType: orderType === \"pending\" ? pendingOrderType : undefined,\n              volume: parseFloat(volume),\n              openPrice: openPrice ? parseFloat(openPrice) : currentBuyPrice,\n              stopLoss: undefined,\n              takeProfit: undefined,\n            });\n            setTimeout(() => {\n              setIsLoading(false);\n              setPendingOrderSide(null);\n            }, 1000);\n          } catch (err) {\n            setIsLoading(false);\n            setPendingOrderSide(null);\n          }\n        }}\n        disabled={isLoading}\n        className={cn(\n          \"rounded-md p-3 bg-[#4A9EFF] hover:bg-[#4A9EFF]/90 cursor-pointer text-right relative overflow-hidden transition-all text-white\",\n          isLoading && \"opacity-80\"\n        )}\n      >\n        {isLoading && pendingOrderSide === 'buy' && (\n          <div className=\"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-[1px] z-10\">\n            <div className=\"flex gap-1\">\n              {[0, 1, 2].map((i) => (\n                <div\n                  key={i}\n                  className=\"w-1.5 h-1.5 bg-white rounded-full opacity-80\"\n                />\n              ))}\n            </div>\n          </div>\n        )}\n        <div className=\"text-xs text-white/80 mb-1\">Buy</div>\n        <div className=\"price-font text-white font-bold text-sm leading-tight\">\n          {Math.floor(currentBuyPrice).toLocaleString()}\n          <span className=\"text-lg\">.{String(Math.floor((currentBuyPrice % 1) * 100)).padStart(2, '0')}</span>\n          <sup className=\"text-sm\">{String(Math.floor((currentBuyPrice % 1) * 1000) % 10)}</sup>\n        </div>\n      </button>\n\n      <div className=\"absolute left-1/2 bottom-0 -translate-x-1/2 px-2 py-0.5 rounded backdrop-blur-xl bg-white/[0.03] border border-white/10 text-[10px] text-white/80 font-medium whitespace-nowrap z-10\">\n        {currentSpread} {isConnected && <span className=\"text-green-500 ml-1\">‚óè</span>}\n      </div>\n    </div>\n  )\n\n  // Render buy/sell price buttons with spread overlay - bordered for regular/risk calculator\n  // In regular form, clicking these buttons sets pendingOrderSide to show confirmation\n  const renderPriceButtonsBordered = (readOnly: boolean = false, showConfirmation: boolean = false) => {\n    const finalVolume = formType === \"risk-calculator\" && calculateRiskBasedVolume !== null\n      ? calculateRiskBasedVolume\n      : (parseFloat(volume) || 0.01)\n\n    let finalStopLoss: number | undefined = undefined\n    let finalTakeProfit: number | undefined = undefined\n\n    if (formType === \"risk-calculator\") {\n      if (stopLossMode === \"price\") {\n        finalStopLoss = stopLoss ? parseFloat(stopLoss) : undefined\n      } else {\n        finalStopLoss = calculatedStopLossPrice ?? undefined\n      }\n\n      if (takeProfitMode === \"price\") {\n        finalTakeProfit = takeProfit ? parseFloat(takeProfit) : undefined\n      } else {\n        finalTakeProfit = calculatedTakeProfitPrice ?? undefined\n      }\n    } else {\n      // Regular form: convert pips to price if needed\n      if (stopLoss) {\n        if (stopLossMode === \"price\") {\n          finalStopLoss = parseFloat(stopLoss)\n        } else if (stopLossMode === \"pips\") {\n          // Convert pips to price - for buy orders, negative pips means price goes down (SL below entry)\n          // For sell orders, positive pips means price goes up (SL above entry)\n          const pips = parseFloat(stopLoss)\n          if (!isNaN(pips)) {\n            const pipSize = getPipSize\n            const priceChange = pips * pipSize\n            // Use buy price as base for calculation (will be adjusted based on order side in API)\n            finalStopLoss = currentBuyPrice + priceChange\n          }\n        }\n      }\n\n      if (takeProfit) {\n        if (takeProfitMode === \"price\") {\n          finalTakeProfit = parseFloat(takeProfit)\n        } else if (takeProfitMode === \"pips\") {\n          // Convert pips to price - for buy orders, positive pips means price goes up (TP above entry)\n          // For sell orders, negative pips means price goes down (TP below entry)\n          const pips = parseFloat(takeProfit)\n          if (!isNaN(pips) && pips > 0) {\n            const pipSize = getPipSize\n            const priceChange = pips * pipSize\n            // Use buy price as base for calculation\n            finalTakeProfit = currentBuyPrice + priceChange\n          }\n        }\n      }\n    }\n\n    const finalOpenPrice = orderType !== \"market\" && openPrice\n      ? parseFloat(openPrice)\n      : undefined\n\n    // Use violet for risk calculator form buttons, keep red/blue for regular form\n    const isRiskCalculator = formType === \"risk-calculator\"\n    const sellButtonBorder = isRiskCalculator ? 'border-[#8b5cf6]' : 'border-[#FF5555]'\n    const sellButtonHover = isRiskCalculator ? 'hover:bg-[#8b5cf6]/10' : 'hover:bg-[#FF5555]/10'\n    const buyButtonBorder = isRiskCalculator ? 'border-[#8b5cf6]' : 'border-[#4A9EFF]'\n    const buyButtonHover = isRiskCalculator ? 'hover:bg-[#8b5cf6]/10' : 'hover:bg-[#4A9EFF]/10'\n    const sellButtonTextColor = isRiskCalculator ? 'text-[#8b5cf6]' : 'text-[#FF5555]'\n    const buyButtonTextColor = isRiskCalculator ? 'text-[#8b5cf6]' : 'text-[#4A9EFF]'\n\n    return (\n      <div className=\"relative grid grid-cols-2 gap-3\">\n        <button\n          type=\"button\"\n          className={`rounded-md p-3 border-2 ${sellButtonBorder} bg-transparent ${readOnly ? '' : sellButtonHover} text-left cursor-pointer`}\n          onClick={readOnly ? undefined : () => {\n            if (isMarketClosed) {\n              setMarketClosedToast(marketClosedMessage)\n              return\n            }\n            if (showConfirmation) {\n              // In regular form, set pending order side to show confirmation\n              setPendingOrderSide('sell')\n            } else {\n              // In risk calculator or pending orders, place order directly\n              if (!onSell) return\n              if (!finalVolume || finalVolume <= 0) {\n                return\n              }\n              // For pending orders, validate that openPrice is provided\n              if (orderType === 'pending' && !finalOpenPrice) {\n                alert('Please enter an open price for pending orders')\n                return\n              }\n\n              // Calculate Sell-specific SL/TP if in Pips mode\n              let sellStopLoss = finalStopLoss\n              let sellTakeProfit = finalTakeProfit\n\n              if (formType === \"risk-calculator\" && stopLossMode === \"pips\" && stopLoss) {\n                const pips = parseFloat(stopLoss)\n                if (!isNaN(pips)) {\n                  const pipSize = getPipSize\n                  // For Sell: SL is ABOVE entry (Entry + Pips)\n                  const entry = orderType === 'market' ? currentSellPrice : (finalOpenPrice || 0)\n                  sellStopLoss = entry + (pips * pipSize)\n                }\n              }\n\n              if (formType === \"risk-calculator\" && takeProfitMode === \"pips\" && takeProfit) {\n                const pips = parseFloat(takeProfit)\n                if (!isNaN(pips) && pips > 0) {\n                  const pipSize = getPipSize\n                  // For Sell: TP is BELOW entry (Entry - Pips)\n                  const entry = orderType === 'market' ? currentSellPrice : (finalOpenPrice || 0)\n                  sellTakeProfit = entry - (pips * pipSize)\n                }\n              }\n\n              const orderData: OrderData = {\n                orderType,\n                pendingOrderType: orderType === \"pending\" ? pendingOrderType : undefined,\n                volume: finalVolume,\n                openPrice: orderType === 'market' ? currentSellPrice : finalOpenPrice,\n                stopLoss: sellStopLoss,\n                takeProfit: sellTakeProfit,\n              }\n              onSell(orderData)\n            }\n          }}\n          disabled={readOnly}\n        >\n          <div className=\"text-xs text-white/60 mb-1\">Sell</div>\n          <div className={`price-font ${sellButtonTextColor} font-bold text-sm leading-tight`}>\n            {Math.floor(currentSellPrice).toLocaleString()}\n            <span className=\"text-lg\">.{String(Math.floor((currentSellPrice % 1) * 100)).padStart(2, '0')}</span>\n            <sup className=\"text-sm\">{String(Math.floor((currentSellPrice % 1) * 1000) % 10)}</sup>\n          </div>\n        </button>\n\n        <button\n          type=\"button\"\n          className={`rounded-md p-3 border-2 ${buyButtonBorder} bg-transparent ${readOnly ? '' : buyButtonHover} text-right cursor-pointer`}\n          onClick={readOnly ? undefined : () => {\n            if (isMarketClosed) {\n              setMarketClosedToast(marketClosedMessage)\n              return\n            }\n            if (showConfirmation) {\n              // In regular form, set pending order side to show confirmation\n              setPendingOrderSide('buy')\n            } else {\n              // In risk calculator or pending orders, place order directly\n              if (!onBuy) return\n              if (!finalVolume || finalVolume <= 0) {\n                return\n              }\n              // For pending orders, validate that openPrice is provided\n              if (orderType === 'pending' && !finalOpenPrice) {\n                alert('Please enter an open price for pending orders')\n                return\n              }\n\n              // Calculate Buy-specific SL/TP if in Pips mode\n              let buyStopLoss = finalStopLoss\n              let buyTakeProfit = finalTakeProfit\n\n              if (formType === \"risk-calculator\" && stopLossMode === \"pips\" && stopLoss) {\n                const pips = parseFloat(stopLoss)\n                if (!isNaN(pips)) {\n                  const pipSize = getPipSize\n                  // For Buy: SL is BELOW entry (Entry - Pips)\n                  const entry = orderType === 'market' ? currentBuyPrice : (finalOpenPrice || 0)\n                  buyStopLoss = entry - (pips * pipSize)\n                }\n              }\n\n              if (formType === \"risk-calculator\" && takeProfitMode === \"pips\" && takeProfit) {\n                const pips = parseFloat(takeProfit)\n                if (!isNaN(pips) && pips > 0) {\n                  const pipSize = getPipSize\n                  // For Buy: TP is ABOVE entry (Entry + Pips)\n                  const entry = orderType === 'market' ? currentBuyPrice : (finalOpenPrice || 0)\n                  buyTakeProfit = entry + (pips * pipSize)\n                }\n              }\n\n              const orderData: OrderData = {\n                orderType,\n                pendingOrderType: orderType === \"pending\" ? pendingOrderType : undefined,\n                volume: finalVolume,\n                openPrice: orderType === 'market' ? currentBuyPrice : finalOpenPrice,\n                stopLoss: buyStopLoss,\n                takeProfit: buyTakeProfit,\n              }\n              onBuy(orderData)\n            }\n          }}\n          disabled={readOnly}\n        >\n          <div className=\"text-xs text-white/60 mb-1\">Buy</div>\n          <div className={`price-font ${buyButtonTextColor} font-bold text-sm leading-tight`}>\n            {Math.floor(currentBuyPrice).toLocaleString()}\n            <span className=\"text-lg\">.{String(Math.floor((currentBuyPrice % 1) * 100)).padStart(2, '0')}</span>\n            <sup className=\"text-sm\">{String(Math.floor((currentBuyPrice % 1) * 1000) % 10)}</sup>\n          </div>\n        </button>\n\n        <div className=\"absolute left-1/2 bottom-0 -translate-x-1/2 px-2 py-0.5 rounded backdrop-blur-xl bg-white/[0.03] border border-white/10 text-[10px] text-white/80 font-medium whitespace-nowrap z-10\">\n          {currentSpread} {isConnected && <span className=\"text-green-500 ml-1\">‚óè</span>}\n        </div>\n      </div>\n    )\n  }\n\n  // Simple toast for market closed\n  const renderMarketClosedToast = () => {\n    if (!marketClosedToast) return null\n    return ReactDOM.createPortal(\n      <div className=\"fixed bottom-4 left-4 z-[99999] bg-[#0b0e14] text-[#d1d5db] rounded-md shadow-lg border border-amber-500/60 w-[320px] overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-300\">\n        <div className=\"p-4 relative\">\n          <button\n            onClick={() => setMarketClosedToast(null)}\n            className=\"absolute top-2 right-2 text-[#9ca3af] hover:text-white transition-colors\"\n          >\n            √ó\n          </button>\n          <div className=\"flex items-start gap-3\">\n            <div className=\"mt-0.5 text-amber-400\">‚ö†</div>\n            <div className=\"flex-1\">\n              <h3 className=\"text-white font-medium text-[14px] leading-tight mb-1\">Market closed</h3>\n              <p className=\"text-[13px] text-[#d1d5db]\">{marketClosedMessage}</p>\n            </div>\n          </div>\n        </div>\n      </div>,\n      document.body\n    )\n  }\n\n  // Calculate financial metrics in real-time\n  const calculateFinancialMetrics = React.useMemo(() => {\n    const vol = parseFloat(volume) || 0\n    const price = orderType === \"limit\" && openPrice ? parseFloat(openPrice) : currentBuyPrice\n    const symbolUpper = (symbol || '').toUpperCase()\n\n    let contractSize = 100000\n    let pipValue = 0.0001\n\n    if (symbolUpper.includes('XAU') || symbolUpper.includes('XAG')) {\n      contractSize = 100\n      pipValue = 0.01\n    } else if (symbolUpper.includes('BTC') || symbolUpper.includes('ETH')) {\n      contractSize = 1\n      pipValue = 0.01\n    } else {\n      contractSize = 100000\n      pipValue = symbolUpper.includes('JPY') ? 0.01 : 0.0001\n    }\n\n    const leverageStr = String(currentBalance?.leverage || \"1:2000\")\n    // Correctly parse leverage from strings like \"1:2000\" or \"2000\"\n    const leverageMatch = leverageStr.match(/(\\d+)$/)\n    const leverage = leverageMatch ? parseInt(leverageMatch[1], 10) : 2000\n\n    const margin = (vol * contractSize * price) / leverage\n    const tradeValue = vol * contractSize * price\n    const spread = (quote.spread || 0) * 100\n    const fees = vol * spread * 10\n    const calculatedPipValue = contractSize * pipValue * vol\n    const swapLong = -(tradeValue * 0.0001)\n    const swapShort = 0\n    const volumeInUnits = vol * contractSize\n    const volumeInUSD = tradeValue\n    const credit = currentBalance?.credit || 0\n\n    return {\n      fees,\n      leverage: `1:${leverage}`,\n      margin,\n      swapLong,\n      swapShort,\n      pipValue: calculatedPipValue,\n      volumeInUnits,\n      volumeInUSD,\n      credit\n    }\n  }, [volume, currentBuyPrice, openPrice, orderType, symbol, currentBalance, quote.spread])\n\n  // Render financial details section\n  const renderFinancialDetails = () => (\n    <div className=\"space-y-2 pt-2 border-t border-white/10\">\n      <div className=\"flex items-center justify-between text-xs\">\n        <span className=\"text-white/60\">Fees:</span>\n        <div className=\"flex items-center gap-1\">\n          <span className=\"text-white price-font\">‚âà {calculateFinancialMetrics.fees.toFixed(2)} USD</span>\n          <Tooltip text=\"Estimated commission and spread costs\">\n            <HelpCircle className=\"h-3 w-3 text-white/40\" />\n          </Tooltip>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between text-xs\">\n        <span className=\"text-white/60\">Leverage:</span>\n        <div className=\"flex items-center gap-1\">\n          <span className=\"text-white price-font\">{calculateFinancialMetrics.leverage.startsWith('1:') ? calculateFinancialMetrics.leverage : `1:${calculateFinancialMetrics.leverage}`}</span>\n          <Tooltip text=\"Account leverage ratio\">\n            <HelpCircle className=\"h-3 w-3 text-white/40\" />\n          </Tooltip>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between text-xs\">\n        <span className=\"text-white/60\">Margin:</span>\n        <span className=\"text-white price-font\">{calculateFinancialMetrics.margin.toFixed(2)} USD</span>\n      </div>\n\n      {showMoreDetails && (\n        <>\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-white/60\">Swap Long:</span>\n            <div className=\"flex items-center gap-1\">\n              <span className=\"text-white price-font\">{calculateFinancialMetrics.swapLong.toFixed(2)} USD</span>\n              <Tooltip text=\"Overnight swap for long positions\">\n                <HelpCircle className=\"h-3 w-3 text-white/40\" />\n              </Tooltip>\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-white/60\">Swap Short:</span>\n            <div className=\"flex items-center gap-1\">\n              <span className=\"text-white price-font\">{calculateFinancialMetrics.swapShort.toFixed(2)} USD</span>\n              <Tooltip text=\"Overnight swap for short positions\">\n                <HelpCircle className=\"h-3 w-3 text-white/40\" />\n              </Tooltip>\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-white/60\">Pip Value:</span>\n            <span className=\"text-white price-font\">{calculateFinancialMetrics.pipValue.toFixed(2)} USD</span>\n          </div>\n\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-white/60\">Volume in units:</span>\n            <span className=\"text-white price-font\">{calculateFinancialMetrics.volumeInUnits.toFixed(2)} {symbol?.toUpperCase().includes('BTC') ? 'BTC' : symbol?.toUpperCase().includes('ETH') ? 'ETH' : symbol?.toUpperCase().includes('XAU') ? 'oz' : ''}</span>\n          </div>\n\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-white/60\">Volume in USD:</span>\n            <span className=\"text-white price-font\">{calculateFinancialMetrics.volumeInUSD.toFixed(2)} USD</span>\n          </div>\n\n          <div className=\"flex items-center justify-between text-xs\">\n            <span className=\"text-white/60\">Credit:</span>\n            <span className=\"text-white price-font\">{calculateFinancialMetrics.credit.toFixed(2)} USD</span>\n          </div>\n        </>\n      )}\n\n      <button\n        onClick={() => setShowMoreDetails(!showMoreDetails)}\n        className=\"w-full flex items-center justify-center gap-1 text-xs text-white/60 hover:text-white/80 pt-1\"\n      >\n        {showMoreDetails ? (\n          <>\n            <span>Less</span>\n            <svg className=\"h-3 w-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\n            </svg>\n          </>\n        ) : (\n          <>\n            <span>More</span>\n            <svg className=\"h-3 w-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          </>\n        )}\n      </button>\n    </div>\n  )\n\n  // Render input field with dropdown and +/- buttons\n  const renderInputField = (\n    label: string,\n    value: string,\n    onChange: (v: string) => void,\n    mode: string,\n    onModeChange: (v: string) => void,\n    modeOptions: { value: string; label: string }[],\n    showTooltip?: boolean\n  ) => (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"text-xs font-medium text-white/80\">{label}</div>\n        {showTooltip && (\n          <Tooltip text={`Set ${label.toLowerCase()}`}>\n            <HelpCircle className=\"h-3.5 w-3.5 text-white/40\" />\n          </Tooltip>\n        )}\n      </div>\n      <div className=\"flex items-stretch border border-white/10 rounded-md overflow-hidden bg-white/[0.02] focus-within:border-[#8B5CF6]\">\n        <Input\n          type=\"number\"\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          placeholder=\"Not set\"\n          className=\"flex-1 border-0 bg-transparent text-center price-font text-sm h-9 focus-visible:ring-0 focus-visible:ring-offset-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none placeholder:text-white/40\"\n        />\n        <select value={mode} onChange={(e) => onModeChange(e.target.value)} className=\"w-[70px] border-0 h-9 bg-transparent text-xs text-white focus:outline-none focus:ring-0\">\n          {modeOptions.map(opt => (\n            <option key={opt.value} value={opt.value} className=\"bg-[#1a1f28]\">{opt.label}</option>\n          ))}\n        </select>\n        <button\n          onClick={() => decrementField(value, onChange)}\n          className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n        >\n          <Minus className=\"h-3.5 w-3.5 text-white/60\" />\n        </button>\n        <button\n          onClick={() => incrementField(value, onChange)}\n          className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n        >\n          <Plus className=\"h-3.5 w-3.5 text-white/60\" />\n        </button>\n      </div>\n    </div>\n  )\n\n  // Get country code from symbol (simplified - can be enhanced)\n  const getCountryCode = () => {\n    const symbolUpper = (symbol || '').toUpperCase()\n    if (symbolUpper.includes('USD')) return 'US'\n    if (symbolUpper.includes('EUR')) return 'EU'\n    if (symbolUpper.includes('GBP')) return 'GB'\n    if (symbolUpper.includes('JPY')) return 'JP'\n    return 'US'\n  }\n\n  return (\n    <div className={cn(\"w-full h-full flex flex-col glass-card border border-white/10 rounded-lg overflow-hidden\", className)} {...props}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-white/10 bg-white/[0.02]\">\n        <div className=\"flex items-center gap-2.5\">\n          <div className=\"w-5 h-5\">\n            <FlagIcon symbol={symbol || 'BTCUSD'} />\n          </div>\n          <span className=\"text-sm font-semibold text-white\">{formatSymbolDisplay(symbol) || 'Select Symbol'}</span>\n        </div>\n        {onClose && (\n          <button\n            onClick={onClose}\n            className=\"h-7 w-7 flex items-center justify-center rounded-md hover:bg-white/10 hover:border border-transparent hover:border-white/20 cursor-pointer group\"\n            title=\"Close Order Panel\"\n          >\n            <X className=\"h-4 w-4 text-white/60 group-hover:text-white\" />\n          </button>\n        )}\n      </div>\n\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-3 scrollbar-thin\">\n        {/* Form Type Selector */}\n        <select value={formType} onChange={(e) => handleFormTypeChange(e.target.value as FormType)} className=\"w-full bg-white/[0.02] border border-white/10 rounded-md h-9 px-3 text-sm text-white focus:outline-none focus:ring-0 focus:border-[#8B5CF6]\">\n          <option value=\"regular\" className=\"bg-[#1a1f28]\">Regular form</option>\n          <option value=\"one-click\" className=\"bg-[#1a1f28]\">One-click form</option>\n          <option value=\"risk-calculator\" className=\"bg-[#1a1f28]\">Risk calculator form</option>\n        </select>\n\n        {/* ONE-CLICK FORM */}\n        {formType === \"one-click\" && (\n          <>\n            <Tabs value={orderType === \"pending\" ? \"limit\" : orderType} onValueChange={(value: string) => {\n              setOrderType(value === \"limit\" ? \"pending\" : (value as \"market\" | \"pending\"))\n            }}>\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"market\">Market</TabsTrigger>\n                <TabsTrigger value=\"limit\">Limit</TabsTrigger>\n              </TabsList>\n            </Tabs>\n\n            {orderType === \"pending\" && (\n              <>\n                {/* Pending Order Type Selector: Limit vs Stop */}\n                <Tabs value={pendingOrderType} onValueChange={(value: string) => setPendingOrderType(value as \"limit\" | \"stop\")}>\n                  <TabsList className=\"grid w-full grid-cols-2\">\n                    <TabsTrigger value=\"limit\">Limit</TabsTrigger>\n                    <TabsTrigger value=\"stop\">Stop</TabsTrigger>\n                  </TabsList>\n                </Tabs>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"text-xs font-medium text-white/80\">Open price</div>\n                    <Tooltip text={`Set open price for ${pendingOrderType === \"limit\" ? \"limit\" : \"stop\"} order`}>\n                      <HelpCircle className=\"h-3.5 w-3.5 text-white/40\" />\n                    </Tooltip>\n                  </div>\n                  <div className=\"flex items-stretch border border-white/10 rounded-md overflow-hidden bg-white/[0.02] focus-within:border-[#8B5CF6]\">\n                    <Input\n                      type=\"number\"\n                      value={openPrice}\n                      onChange={(e) => setOpenPrice(e.target.value)}\n                      placeholder={currentBuyPrice.toFixed(3)}\n                      className=\"flex-1 border-0 bg-transparent text-center price-font text-sm h-9 focus-visible:ring-0 focus-visible:ring-offset-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none placeholder:text-white/40\"\n                    />\n                    <div className=\"flex items-center justify-center px-3 text-xs text-white/60 min-w-[50px]\">\n                      {pendingOrderType === \"limit\" ? \"Limit\" : \"Stop\"}\n                    </div>\n                    <button\n                      onClick={() => decrementField(openPrice, setOpenPrice)}\n                      className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                    >\n                      <Minus className=\"h-3.5 w-3.5 text-white/60\" />\n                    </button>\n                    <button\n                      onClick={() => incrementField(openPrice, setOpenPrice)}\n                      className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                    >\n                      <Plus className=\"h-3.5 w-3.5 text-white/60\" />\n                    </button>\n                  </div>\n                  {openPrice && (\n                    <div className=\"text-xs text-white/60\">\n                      {((parseFloat(openPrice) - currentBuyPrice) * 10000).toFixed(1)} pips\n                    </div>\n                  )}\n                </div>\n              </>\n            )}\n\n            <div className=\"space-y-2\">\n              <div className=\"text-xs font-medium text-white/80\">Volume</div>\n              <div className=\"flex items-stretch border border-white/10 rounded-md overflow-hidden bg-white/[0.02] focus-within:border-[#8B5CF6]\">\n                <Input\n                  type=\"text\"\n                  inputMode=\"decimal\"\n                  value={volume}\n                  onChange={(e) => handleVolumeChange(e.target.value)}\n                  onBlur={(e) => {\n                    const numValue = parseFloat(e.target.value) || 0.01\n                    const roundedValue = Math.round(numValue * 100) / 100\n                    const clampedValue = Math.max(0.01, Math.min(50.00, roundedValue))\n                    setVolume(clampedValue.toFixed(2))\n                  }}\n                  className=\"flex-1 border-0 bg-transparent text-center price-font text-sm h-9 focus-visible:ring-0 focus-visible:ring-offset-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none\"\n                />\n                <div className=\"flex items-center justify-center px-3 text-xs text-white/60 min-w-[50px]\">\n                  Lots\n                </div>\n                <button\n                  onClick={decrementVolume}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Minus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n                <button\n                  onClick={incrementVolume}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Plus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n              </div>\n            </div>\n\n            {renderPriceButtonsSolid()}\n            {renderFinancialDetails()}\n          </>\n        )}\n\n        {/* REGULAR FORM */}\n        {formType === \"regular\" && (\n          <>\n            {renderPriceButtonsBordered(false, true)}\n\n            <Tabs value={orderType} onValueChange={(value: string) => setOrderType(value as \"market\" | \"limit\" | \"pending\")}>\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"market\">Market</TabsTrigger>\n                <TabsTrigger value=\"pending\">Pending</TabsTrigger>\n              </TabsList>\n            </Tabs>\n\n            {orderType === \"pending\" && (\n              <>\n                {/* Pending Order Type Selector: Limit vs Stop */}\n                <Tabs value={pendingOrderType} onValueChange={(value: string) => setPendingOrderType(value as \"limit\" | \"stop\")}>\n                  <TabsList className=\"grid w-full grid-cols-2\">\n                    <TabsTrigger value=\"limit\">Limit</TabsTrigger>\n                    <TabsTrigger value=\"stop\">Stop</TabsTrigger>\n                  </TabsList>\n                </Tabs>\n\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"text-xs font-medium text-white/80\">Open price</div>\n                    <Tooltip text={`Set open price for ${pendingOrderType === \"limit\" ? \"limit\" : \"stop\"} order`}>\n                      <HelpCircle className=\"h-3.5 w-3.5 text-white/40\" />\n                    </Tooltip>\n                  </div>\n                  <div className=\"flex items-stretch border border-white/10 rounded-md overflow-hidden bg-white/[0.02] focus-within:border-[#8B5CF6]\">\n                    <Input\n                      type=\"number\"\n                      value={openPrice}\n                      onChange={(e) => setOpenPrice(e.target.value)}\n                      placeholder={currentBuyPrice.toFixed(3)}\n                      className=\"flex-1 border-0 bg-transparent text-center price-font text-sm h-9 focus-visible:ring-0 focus-visible:ring-offset-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none placeholder:text-white/40\"\n                    />\n                    <div className=\"flex items-center justify-center px-3 text-xs text-white/60 min-w-[50px]\">\n                      {pendingOrderType === \"limit\" ? \"Limit\" : \"Stop\"}\n                    </div>\n                    <button\n                      onClick={() => decrementField(openPrice, setOpenPrice)}\n                      className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                    >\n                      <Minus className=\"h-3.5 w-3.5 text-white/60\" />\n                    </button>\n                    <button\n                      onClick={() => incrementField(openPrice, setOpenPrice)}\n                      className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                    >\n                      <Plus className=\"h-3.5 w-3.5 text-white/60\" />\n                    </button>\n                  </div>\n                  {openPrice && (\n                    <div className=\"text-xs text-white/60\">\n                      {((parseFloat(openPrice) - currentBuyPrice) * 10000).toFixed(1)} pips\n                      {pendingOrderType === \"limit\" && (\n                        <span className=\"ml-2 text-white/40\">\n                          (Buy Limit: below current, Sell Limit: above current)\n                        </span>\n                      )}\n                      {pendingOrderType === \"stop\" && (\n                        <span className=\"ml-2 text-white/40\">\n                          (Buy Stop: above current, Sell Stop: below current)\n                        </span>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </>\n            )}\n\n            <div className=\"space-y-2\">\n              <div className=\"text-xs font-medium text-white/80\">Volume</div>\n              <div className=\"flex items-stretch border border-white/10 rounded-md overflow-hidden bg-white/[0.02] focus-within:border-[#8B5CF6]\">\n                <Input\n                  type=\"text\"\n                  inputMode=\"decimal\"\n                  value={volume}\n                  onChange={(e) => handleVolumeChange(e.target.value)}\n                  onBlur={(e) => {\n                    const numValue = parseFloat(e.target.value) || 0.01\n                    const roundedValue = Math.round(numValue * 100) / 100\n                    const clampedValue = Math.max(0.01, Math.min(50.00, roundedValue))\n                    setVolume(clampedValue.toFixed(2))\n                  }}\n                  className=\"flex-1 border-0 bg-transparent text-center price-font text-sm h-9 focus-visible:ring-0 focus-visible:ring-offset-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none\"\n                />\n                <div className=\"flex items-center justify-center px-3 text-xs text-white/60 min-w-[50px]\">\n                  Lots\n                </div>\n                <button\n                  onClick={decrementVolume}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Minus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n                <button\n                  onClick={incrementVolume}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Plus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n              </div>\n            </div>\n\n            {renderInputField(\n              \"Take Profit\",\n              takeProfit,\n              setTakeProfit,\n              takeProfitMode,\n              (value: string) => setTakeProfitMode(value as \"pips\" | \"price\"),\n              [\n                { value: \"price\", label: \"Price\" },\n                { value: \"pips\", label: \"Pips\" }\n              ],\n              true\n            )}\n\n            {renderInputField(\n              \"Stop Loss\",\n              stopLoss,\n              setStopLoss,\n              stopLossMode,\n              (value: string) => setStopLossMode(value as \"pips\" | \"price\"),\n              [\n                { value: \"price\", label: \"Price\" },\n                { value: \"pips\", label: \"Pips\" }\n              ],\n              true\n            )}\n\n            {/* Confirmation Buttons - Only show when a side is selected */}\n            {pendingOrderSide && (\n              <>\n                {/* Stop Loss Metrics - Show above confirmation button */}\n                {stopLoss && (\n                  <div className=\"flex items-center justify-center gap-4 pt-2 pb-1 text-xs text-white/60\">\n                    {stopLossMode === \"pips\" ? (\n                      <>\n                        <span>{stopLoss.startsWith('-') ? stopLoss : `-${stopLoss}`} pips</span>\n                        <span className=\"text-white/40\">|</span>\n                        <span>\n                          {(() => {\n                            const pips = Math.abs(parseFloat(stopLoss) || 0)\n                            const isBuy = pendingOrderSide === 'buy'\n                            const calculatedPrice = calculatePriceFromPips(pips, isBuy, true)\n                            if (calculatedPrice !== null) {\n                              const priceDiff = isBuy\n                                ? currentBuyPrice - calculatedPrice\n                                : calculatedPrice - currentSellPrice\n                              const pipValue = pips * getPipValuePerLot * (parseFloat(volume) || 0.01)\n                              return `-${Math.abs(pipValue).toFixed(2)} USD`\n                            }\n                            return '-0.00 USD'\n                          })()}\n                        </span>\n                        <span className=\"text-white/40\">|</span>\n                        <span>\n                          {(() => {\n                            const pips = Math.abs(parseFloat(stopLoss) || 0)\n                            const pipValue = pips * getPipValuePerLot * (parseFloat(volume) || 0.01)\n                            const balance = currentBalance?.equity || 1\n                            const percent = (Math.abs(pipValue) / balance) * 100\n                            return `-${percent.toFixed(2)} %`\n                          })()}\n                        </span>\n                      </>\n                    ) : (\n                      <>\n                        <span>\n                          {(() => {\n                            const slPrice = parseFloat(stopLoss) || 0\n                            const isBuy = pendingOrderSide === 'buy'\n                            const entryPrice = isBuy ? currentBuyPrice : currentSellPrice\n                            const priceDiff = isBuy ? entryPrice - slPrice : slPrice - entryPrice\n                            const pipSize = getPipSize\n                            const pips = priceDiff / pipSize\n                            return `${pips.toFixed(1)} pips`\n                          })()}\n                        </span>\n                        <span className=\"text-white/40\">|</span>\n                        <span>\n                          {(() => {\n                            const slPrice = parseFloat(stopLoss) || 0\n                            const isBuy = pendingOrderSide === 'buy'\n                            const entryPrice = isBuy ? currentBuyPrice : currentSellPrice\n                            const priceDiff = Math.abs(entryPrice - slPrice)\n                            const pipSize = getPipSize\n                            const pips = priceDiff / pipSize\n                            const pipValue = pips * getPipValuePerLot * (parseFloat(volume) || 0.01)\n                            return `-${pipValue.toFixed(2)} USD`\n                          })()}\n                        </span>\n                        <span className=\"text-white/40\">|</span>\n                        <span>\n                          {(() => {\n                            const slPrice = parseFloat(stopLoss) || 0\n                            const isBuy = pendingOrderSide === 'buy'\n                            const entryPrice = isBuy ? currentBuyPrice : currentSellPrice\n                            const priceDiff = Math.abs(entryPrice - slPrice)\n                            const pipSize = getPipSize\n                            const pips = priceDiff / pipSize\n                            const pipValue = pips * getPipValuePerLot * (parseFloat(volume) || 0.01)\n                            const balance = currentBalance?.equity || 1\n                            const percent = (pipValue / balance) * 100\n                            return `-${percent.toFixed(2)} %`\n                          })()}\n                        </span>\n                      </>\n                    )}\n                  </div>\n                )}\n\n                <div className=\"flex flex-col gap-2 pt-2\">\n                  <button\n                    disabled={isLoading}\n                    onClick={async () => {\n                      if (isMarketClosed) {\n                        setMarketClosedToast(marketClosedMessage)\n                        return\n                      }\n                      if (isLoading) return;\n                      const handler = pendingOrderSide === 'buy' ? onBuy : onSell\n                      if (!handler) return\n                      const finalVolume = parseFloat(volume) || 0.01\n                      if (finalVolume <= 0) {\n                        return\n                      }\n                      let finalStopLoss: number | undefined = undefined\n                      let finalTakeProfit: number | undefined = undefined\n\n                      const isBuy = pendingOrderSide === 'buy'\n\n                      if (stopLossMode === \"price\") {\n                        finalStopLoss = stopLoss ? parseFloat(stopLoss) : undefined\n                      } else if (stopLossMode === \"pips\" && stopLoss) {\n                        const pips = parseFloat(stopLoss)\n                        if (!isNaN(pips)) {\n                          const calculatedPrice = calculatePriceFromPips(pips, isBuy, true)\n                          if (calculatedPrice !== null) {\n                            finalStopLoss = calculatedPrice\n                          }\n                        }\n                      }\n\n                      if (takeProfitMode === \"price\") {\n                        finalTakeProfit = takeProfit ? parseFloat(takeProfit) : undefined\n                      } else if (takeProfitMode === \"pips\" && takeProfit) {\n                        const pips = parseFloat(takeProfit)\n                        if (!isNaN(pips) && pips > 0) {\n                          const calculatedPrice = calculatePriceFromPips(pips, isBuy, false)\n                          if (calculatedPrice !== null) {\n                            finalTakeProfit = calculatedPrice\n                          }\n                        }\n                      }\n\n                      // For pending orders, validate that openPrice is provided\n                      if (orderType === 'pending' && !openPrice) {\n                        alert('Please enter an open price for pending orders')\n                        return\n                      }\n\n                      const orderData: OrderData = {\n                        orderType,\n                        pendingOrderType: orderType === \"pending\" ? pendingOrderType : undefined,\n                        volume: finalVolume,\n                        openPrice: orderType === 'market'\n                          ? (pendingOrderSide === 'buy' ? currentBuyPrice : currentSellPrice)\n                          : (openPrice ? parseFloat(openPrice) : undefined),\n                        stopLoss: finalStopLoss,\n                        takeProfit: finalTakeProfit,\n                      }\n\n                      setIsLoading(true);\n                      try {\n                        handler(orderData);\n                        setTimeout(() => {\n                          setIsLoading(false);\n                          setPendingOrderSide(null);\n                        }, 1000);\n                      } catch (err) {\n                        setIsLoading(false);\n                        setPendingOrderSide(null);\n                      }\n                    }}\n                    className={cn(\n                      \"w-full font-semibold py-3 px-4 rounded-md transition-all flex flex-col items-center justify-center relative overflow-hidden text-white\",\n                      pendingOrderSide === 'buy' ? 'bg-[#4A9EFF] hover:bg-[#4A9EFF]/90' : 'bg-[#FF5555] hover:bg-[#FF5555]/90',\n                      isLoading && \"opacity-80\"\n                    )}\n                  >\n                    {isLoading && (\n                      <div className=\"absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-[1px] z-10 focus:outline-none\">\n                        <div className=\"flex gap-1\">\n                          {[0, 1, 2].map((i) => (\n                            <div\n                              key={i}\n                              className=\"w-1.5 h-1.5 bg-white rounded-full opacity-80\"\n                            />\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                    <span className=\"text-sm\">Confirm {pendingOrderSide === 'buy' ? 'Buy' : 'Sell'}</span>\n                    <span className=\"text-xs opacity-90\">{volume} lots</span>\n                  </button>\n                  <button\n                    onClick={() => setPendingOrderSide(null)}\n                    disabled={isLoading}\n                    className=\"w-full bg-[#2a2f36] hover:bg-[#363c45] text-white font-medium py-2.5 px-4 rounded-md text-sm transition-colors disabled:opacity-50\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n\n                {/* Financial Details - Show below confirmation buttons */}\n                {renderFinancialDetails()}\n              </>\n            )}\n          </>\n        )}\n\n        {/* RISK CALCULATOR FORM */}\n        {formType === \"risk-calculator\" && (\n          <>\n            {renderPriceButtonsBordered(false)}\n\n            <Tabs value={orderType} onValueChange={(value: string) => setOrderType(value as \"market\" | \"limit\" | \"pending\")}>\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"market\">Market</TabsTrigger>\n                <TabsTrigger value=\"pending\">Pending</TabsTrigger>\n              </TabsList>\n            </Tabs>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-xs font-medium text-white/80\">Risk</div>\n                <Tooltip text=\"Maximum amount you're willing to risk on this trade\">\n                  <HelpCircle className=\"h-3.5 w-3.5 text-white/40\" />\n                </Tooltip>\n              </div>\n              <div className=\"flex items-stretch border border-white/10 rounded-md overflow-hidden bg-white/[0.02] focus-within:border-[#8B5CF6]\">\n                <Input\n                  type=\"number\"\n                  value={risk}\n                  onChange={(e) => setRisk(e.target.value)}\n                  placeholder=\"Not set\"\n                  className=\"flex-1 border-0 bg-transparent text-center price-font text-sm h-9 focus-visible:ring-0 focus-visible:ring-offset-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none placeholder:text-white/40\"\n                />\n                <select value={riskMode} onChange={(e) => setRiskMode(e.target.value as \"usd\" | \"percent\")} className=\"w-[70px] border-0 h-9 bg-transparent text-xs text-white focus:outline-none focus:ring-0\">\n                  <option value=\"usd\" className=\"bg-[#1a1f28]\">USD</option>\n                  <option value=\"percent\" className=\"bg-[#1a1f28]\">%</option>\n                </select>\n                <button\n                  onClick={() => {\n                    const currentValue = parseFloat(risk) || 0\n                    setRisk(Math.max(0, currentValue - 1).toString())\n                  }}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Minus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n                <button\n                  onClick={() => {\n                    const currentValue = parseFloat(risk) || 0\n                    setRisk((currentValue + 1).toString())\n                  }}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Plus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n              </div>\n              {riskMode === \"percent\" && risk && (\n                <div className=\"text-xs text-white/60 text-center\">\n                  {((parseFloat(risk) || 0) * (currentBalance?.equity || 0) / 100).toFixed(2)} USD\n                </div>\n              )}\n              {riskMode === \"usd\" && calculateRiskBasedVolume !== null && (\n                <div className=\"text-xs text-white/80 text-center font-medium\">\n                  {calculateRiskBasedVolume.toFixed(2)} lots\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-xs font-medium text-white/80\">Stop Loss</div>\n                <Tooltip text=\"Stop loss distance in pips (negative for Buy, positive for Sell)\">\n                  <HelpCircle className=\"h-3.5 w-3.5 text-white/40\" />\n                </Tooltip>\n              </div>\n              <div className=\"flex items-stretch border border-white/10 rounded-md overflow-hidden bg-white/[0.02] focus-within:border-[#8B5CF6]\">\n                <Input\n                  type=\"number\"\n                  value={stopLoss}\n                  onChange={(e) => setStopLoss(e.target.value)}\n                  placeholder=\"Not set\"\n                  className=\"flex-1 border-0 bg-transparent text-center price-font text-sm h-9 focus-visible:ring-0 focus-visible:ring-offset-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none placeholder:text-white/40\"\n                />\n                <select\n                  value={stopLossMode}\n                  onChange={(e) => setStopLossMode(e.target.value as \"pips\" | \"price\")}\n                  className=\"w-[70px] border-0 h-9 bg-transparent text-xs text-white focus:outline-none focus:ring-0 text-center\"\n                >\n                  <option value=\"pips\" className=\"bg-[#1a1f28]\">Pips</option>\n                  <option value=\"price\" className=\"bg-[#1a1f28]\">Price</option>\n                </select>\n                <button\n                  onClick={() => {\n                    const currentValue = parseFloat(stopLoss) || 0\n                    setStopLoss((currentValue - 1).toString())\n                  }}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Minus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n                <button\n                  onClick={() => {\n                    const currentValue = parseFloat(stopLoss) || 0\n                    setStopLoss((currentValue + 1).toString())\n                  }}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Plus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n              </div>\n              {(calculatedStopLossPrice !== null || (stopLossMode === \"price\" && stopLoss)) && calculateRiskBasedVolume !== null && (\n                <div className=\"space-y-0.5\">\n                  {stopLossMode === \"pips\" && stopLoss && !isNaN(parseFloat(stopLoss)) && (\n                    <div className=\"text-xs text-white/60 text-center flex justify-center gap-3\">\n                      <span>B: {(currentBuyPrice - parseFloat(stopLoss) * getPipSize).toFixed(2)}</span>\n                      <span>S: {(currentSellPrice + parseFloat(stopLoss) * getPipSize).toFixed(2)}</span>\n                    </div>\n                  )}\n                  <div className=\"text-xs text-red-400/80 text-center font-medium\">\n                    {(() => {\n                      let riskVal = parseFloat(risk) || 0;\n                      if (riskMode === \"percent\") {\n                        const equity = currentBalance?.equity || 0;\n                        riskVal = (riskVal / 100) * equity;\n                      }\n                      return riskVal.toFixed(2) + \" USD loss\";\n                    })()}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"text-xs font-medium text-white/80\">Take Profit</div>\n                <Tooltip text=\"Take profit distance in pips\">\n                  <HelpCircle className=\"h-3.5 w-3.5 text-white/40\" />\n                </Tooltip>\n              </div>\n              <div className=\"flex items-stretch border border-white/10 rounded-md overflow-hidden bg-white/[0.02] focus-within:border-[#8B5CF6]\">\n                <Input\n                  type=\"number\"\n                  value={takeProfit}\n                  onChange={(e) => setTakeProfit(e.target.value)}\n                  placeholder=\"Not set\"\n                  className=\"flex-1 border-0 bg-transparent text-center price-font text-sm h-9 focus-visible:ring-0 focus-visible:ring-offset-0 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none placeholder:text-white/40\"\n                />\n                <select\n                  value={takeProfitMode}\n                  onChange={(e) => setTakeProfitMode(e.target.value as \"pips\" | \"price\")}\n                  className=\"w-[70px] border-0 h-9 bg-transparent text-xs text-white focus:outline-none focus:ring-0 text-center\"\n                >\n                  <option value=\"pips\" className=\"bg-[#1a1f28]\">Pips</option>\n                  <option value=\"price\" className=\"bg-[#1a1f28]\">Price</option>\n                </select>\n                <button\n                  onClick={() => {\n                    const currentValue = parseFloat(takeProfit) || 0\n                    setTakeProfit(Math.max(0, currentValue - 1).toString())\n                  }}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Minus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n                <button\n                  onClick={() => {\n                    const currentValue = parseFloat(takeProfit) || 0\n                    setTakeProfit((currentValue + 1).toString())\n                  }}\n                  className=\"h-9 w-9 flex items-center justify-center hover:bg-white/5 cursor-pointer\"\n                >\n                  <Plus className=\"h-3.5 w-3.5 text-white/60\" />\n                </button>\n              </div>\n              {(calculatedTakeProfitPrice !== null || (takeProfitMode === \"price\" && takeProfit)) && calculateRiskBasedVolume !== null && (\n                <div className=\"space-y-0.5\">\n                  {takeProfitMode === \"pips\" && calculatedTakeProfitPrice !== null && (\n                    <div className=\"text-xs text-white/60 text-center\">\n                      {calculatedTakeProfitPrice.toFixed(2)}\n                    </div>\n                  )}\n                  <div className=\"text-xs text-green-400/80 text-center font-medium\">\n                    {(() => {\n                      let pips = 0;\n                      if (takeProfitMode === \"pips\") {\n                        pips = parseFloat(takeProfit);\n                      } else {\n                        // Price mode\n                        const tpPrice = parseFloat(takeProfit);\n                        if (!isNaN(tpPrice)) {\n                          let entryPrice = 0;\n                          if (orderType === \"pending\" || orderType === \"limit\") {\n                            entryPrice = openPrice ? parseFloat(openPrice) : 0;\n                          } else {\n                            entryPrice = (currentBuyPrice + currentSellPrice) / 2;\n                          }\n                          if (entryPrice > 0) {\n                            const pipSize = getPipSize;\n                            pips = Math.abs(tpPrice - entryPrice) / pipSize;\n                          }\n                        }\n                      }\n                      const profit = pips * getPipValuePerLot * calculateRiskBasedVolume;\n                      return profit.toFixed(2) + \" USD profit\";\n                    })()}\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {renderFinancialDetails()}\n          </>\n        )}\n\n      </div>\n\n      {/* One-click Trading Modal */}\n      <OrderModeModal\n        isOpen={showOneClickModal}\n        onClose={handleOneClickModalCancel}\n        onConfirm={handleOneClickModalConfirm}\n        mode=\"One-click form\"\n      />\n\n      {/* Risk Calculator Modal */}\n      <OrderModeModal\n        isOpen={showRiskCalculatorModal}\n        onClose={handleRiskCalculatorModalCancel}\n        onConfirm={handleRiskCalculatorModalConfirm}\n        mode=\"Risk calculator form\"\n      />\n\n      {marketClosedToast && ReactDOM.createPortal(\n        <div className=\"fixed bottom-4 left-4 z-[99999] bg-[#0b0e14] text-[#d1d5db] rounded-md shadow-lg border border-amber-500/60 w-[320px] overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-300\">\n          <div className=\"p-4 relative\">\n            <button\n              onClick={() => setMarketClosedToast(null)}\n              className=\"absolute top-2 right-2 text-[#9ca3af] hover:text-white transition-colors\"\n            >\n              √ó\n            </button>\n            <div className=\"flex items-start gap-3\">\n              <div className=\"mt-0.5 text-amber-400\">‚ö†</div>\n              <div className=\"flex-1\">\n                <h3 className=\"text-white font-medium text-[14px] leading-tight mb-1\">Market closed</h3>\n                <p className=\"text-[13px] text-[#d1d5db]\">{marketClosedMessage}</p>\n              </div>\n            </div>\n          </div>\n        </div>,\n        document.body\n      )}\n    </div>\n  )\n}\n\nexport default OrderPanel\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6061, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/ui/resizable.tsx"],"sourcesContent":["import { ComponentProps } from \"react\"\nimport { PiDotsThreeOutlineVerticalFill } from \"react-icons/pi\"\nimport { Panel, PanelGroup, PanelResizeHandle } from \"react-resizable-panels\"\n\nfunction ResizablePanelGroup({ className, ...props }: ComponentProps<typeof PanelGroup>) {\n  return (\n    <PanelGroup\n      className={`flex h-full w-full data-[panel-group-direction=vertical]:flex-col ${className || ''}`}\n      {...props}\n    />\n  )\n}\n\nfunction ResizablePanel({ className, ...props }: ComponentProps<typeof Panel>) {\n  return <Panel className={className} {...props} />\n}\n\nfunction ResizableHandle({ withHandle, className, ...props }) {\n  return (\n    <PanelResizeHandle\n      className={`relative flex w-1 items-center justify-center bg-transparent after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-gray-400 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-1 data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90 hover:bg-gray-700/50 transition-colors ${className || ''}`}\n      {...props}\n    >\n      {withHandle && (\n        <div className=\"z-10 flex h-4 w-0 items-center justify-center rounded-sm border border-gray-600 bg-gray-700\">\n          <PiDotsThreeOutlineVerticalFill className=\"text-gray-400\" />\n        </div>\n      )}\n    </PanelResizeHandle>\n  )\n}\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n"],"names":[],"mappings":";;;;;;;;;AACA;AACA;;;;AAEA,SAAS,oBAAoB,EAAE,SAAS,EAAE,GAAG,OAA0C;IACrF,qBACE,8OAAC,kOAAU;QACT,WAAW,CAAC,kEAAkE,EAAE,aAAa,IAAI;QAChG,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,eAAe,EAAE,SAAS,EAAE,GAAG,OAAqC;IAC3E,qBAAO,8OAAC,6NAAK;QAAC,WAAW;QAAY,GAAG,KAAK;;;;;;AAC/C;AAEA,SAAS,gBAAgB,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,OAAO;IAC1D,qBACE,8OAAC,yOAAiB;QAChB,WAAW,CAAC,srBAAsrB,EAAE,aAAa,IAAI;QACptB,GAAG,KAAK;kBAER,4BACC,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,gLAA8B;gBAAC,WAAU;;;;;;;;;;;;;;;;AAKpD"}},
    {"offset": {"line": 6124, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/modals/CloseAllPositionsDropdown.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useRef, useState } from 'react'\n\nexport default function CloseAllPositionsDropdown({ isOpen, onClose, onConfirm, positions, anchorRef }: any) {\n  const dropdownRef = useRef<HTMLDivElement>(null)\n  const [selectedOption, setSelectedOption] = useState('all')\n\n  // Calculate stats\n  const stats = positions.reduce((acc: any, pos: any) => {\n    const pl = parseFloat(pos.pl.replace('+', ''))\n\n    // All\n    acc.all.count++\n    acc.all.pl += pl\n\n    // Profitable\n    if (pl > 0) {\n      acc.profitable.count++\n      acc.profitable.pl += pl\n    }\n\n    // Losing\n    if (pl < 0) {\n      acc.losing.count++\n      acc.losing.pl += pl\n    }\n\n    // Buy\n    if (pos.type === 'Buy') {\n      acc.buy.count++\n      acc.buy.pl += pl\n    }\n\n    // Sell\n    if (pos.type === 'Sell') {\n      acc.sell.count++\n      acc.sell.pl += pl\n    }\n\n    return acc\n  }, {\n    all: { count: 0, pl: 0 },\n    profitable: { count: 0, pl: 0 },\n    losing: { count: 0, pl: 0 },\n    buy: { count: 0, pl: 0 },\n    sell: { count: 0, pl: 0 }\n  })\n\n  const formatPL = (val: number) => {\n    if (val === 0) return '--'\n    const sign = val > 0 ? '+' : ''\n    return `${sign}${val.toFixed(2)}`\n  }\n\n  const getColor = (val: number) => {\n    if (val === 0) return 'text-[#8b9096]'\n    return val > 0 ? 'text-[#2ebd85]' : 'text-[#f6465d]'\n  }\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as Node;\n      if (dropdownRef.current && !dropdownRef.current.contains(target) &&\n        anchorRef.current && !anchorRef.current.contains(target)) {\n        onClose()\n      }\n    }\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside)\n    }\n\n    return () => document.removeEventListener('mousedown', handleClickOutside)\n  }, [isOpen, onClose, anchorRef])\n\n  if (!isOpen) return null\n\n  // Calculate position\n  const style: React.CSSProperties = {}\n  if (anchorRef?.current) {\n    const rect = anchorRef.current.getBoundingClientRect()\n    style.bottom = `${window.innerHeight - rect.top + 8}px`\n    style.right = `${window.innerWidth - rect.right}px`\n  }\n\n  const options = [\n    { id: 'all', label: 'Close all' },\n    { id: 'profitable', label: 'Close all profitable' },\n    { id: 'losing', label: 'Close all losing' },\n    { id: 'buy', label: 'Close all Buy' },\n    { id: 'sell', label: 'Close all Sell' }\n  ]\n\n  return (\n    <div\n      ref={dropdownRef}\n      style={style}\n      className=\"fixed z-[100] bg-[#02040d] rounded-lg shadow-2xl w-[320px] border border-[#363c47] overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-200\"\n    >\n      <div className=\"p-4\">\n        <h3 className=\"text-white font-medium text-[14px] mb-3\">\n          Close all positions at the market prices?\n        </h3>\n\n        <div className=\"space-y-2\">\n          {options.map(opt => {\n            const stat = stats[opt.id]\n            const isDisabled = stat.count === 0\n\n            return (\n              <label\n                key={opt.id}\n                className={`flex items-center justify-between cursor-pointer group p-2 rounded hover:bg-[#363c47] transition-colors ${isDisabled ? 'opacity-50 pointer-events-none' : ''}`}\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"relative flex items-center justify-center w-4 h-4\">\n                    <input\n                      type=\"radio\"\n                      name=\"closeOption\"\n                      value={opt.id}\n                      checked={selectedOption === opt.id}\n                      onChange={(e) => setSelectedOption(e.target.value)}\n                      disabled={isDisabled}\n                      className=\"peer appearance-none w-4 h-4 border border-[#565c66] rounded-full checked:border-[#8b5cf6] checked:bg-[#8b5cf6] transition-colors\"\n                    />\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-[#e1e3e6] text-[13px]\">{opt.label}</span>\n                    {stat.count > 0 && (\n                      <span className=\"bg-[#141d22] text-[#b2b5be] text-[10px] px-1.5 py-0.5 rounded\">\n                        {stat.count}\n                      </span>\n                    )}\n                  </div>\n                </div>\n                <span className={`text-[13px] font-mono ${getColor(stat.pl)}`}>\n                  {formatPL(stat.pl)}\n                </span>\n              </label>\n            )\n          })}\n        </div>\n\n        <div className=\"flex gap-2 mt-4\">\n          <button\n            onClick={onClose}\n            className=\"flex-1 py-2 text-[13px] font-medium text-[#e1e3e6] bg-[#363c47] hover:bg-[#404652] transition-colors rounded\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => {\n              onConfirm(selectedOption)\n              onClose()\n            }}\n            className=\"flex-1 py-2 text-[13px] font-medium text-[#141d22] bg-[#8b5cf6] hover:bg-[#ffe54f] transition-colors rounded\"\n          >\n            Confirm\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,0BAA0B,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAO;IACzG,MAAM,cAAc,IAAA,+MAAM,EAAiB;IAC3C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,kBAAkB;IAClB,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAC,KAAU;QACxC,MAAM,KAAK,WAAW,IAAI,EAAE,CAAC,OAAO,CAAC,KAAK;QAE1C,MAAM;QACN,IAAI,GAAG,CAAC,KAAK;QACb,IAAI,GAAG,CAAC,EAAE,IAAI;QAEd,aAAa;QACb,IAAI,KAAK,GAAG;YACV,IAAI,UAAU,CAAC,KAAK;YACpB,IAAI,UAAU,CAAC,EAAE,IAAI;QACvB;QAEA,SAAS;QACT,IAAI,KAAK,GAAG;YACV,IAAI,MAAM,CAAC,KAAK;YAChB,IAAI,MAAM,CAAC,EAAE,IAAI;QACnB;QAEA,MAAM;QACN,IAAI,IAAI,IAAI,KAAK,OAAO;YACtB,IAAI,GAAG,CAAC,KAAK;YACb,IAAI,GAAG,CAAC,EAAE,IAAI;QAChB;QAEA,OAAO;QACP,IAAI,IAAI,IAAI,KAAK,QAAQ;YACvB,IAAI,IAAI,CAAC,KAAK;YACd,IAAI,IAAI,CAAC,EAAE,IAAI;QACjB;QAEA,OAAO;IACT,GAAG;QACD,KAAK;YAAE,OAAO;YAAG,IAAI;QAAE;QACvB,YAAY;YAAE,OAAO;YAAG,IAAI;QAAE;QAC9B,QAAQ;YAAE,OAAO;YAAG,IAAI;QAAE;QAC1B,KAAK;YAAE,OAAO;YAAG,IAAI;QAAE;QACvB,MAAM;YAAE,OAAO;YAAG,IAAI;QAAE;IAC1B;IAEA,MAAM,WAAW,CAAC;QAChB,IAAI,QAAQ,GAAG,OAAO;QACtB,MAAM,OAAO,MAAM,IAAI,MAAM;QAC7B,OAAO,GAAG,OAAO,IAAI,OAAO,CAAC,IAAI;IACnC;IAEA,MAAM,WAAW,CAAC;QAChB,IAAI,QAAQ,GAAG,OAAO;QACtB,OAAO,MAAM,IAAI,mBAAmB;IACtC;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,CAAC;YAC1B,MAAM,SAAS,MAAM,MAAM;YAC3B,IAAI,YAAY,OAAO,IAAI,CAAC,YAAY,OAAO,CAAC,QAAQ,CAAC,WACvD,UAAU,OAAO,IAAI,CAAC,UAAU,OAAO,CAAC,QAAQ,CAAC,SAAS;gBAC1D;YACF;QACF;QAEA,IAAI,QAAQ;YACV,SAAS,gBAAgB,CAAC,aAAa;QACzC;QAEA,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IACzD,GAAG;QAAC;QAAQ;QAAS;KAAU;IAE/B,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBAAqB;IACrB,MAAM,QAA6B,CAAC;IACpC,IAAI,WAAW,SAAS;QACtB,MAAM,OAAO,UAAU,OAAO,CAAC,qBAAqB;QACpD,MAAM,MAAM,GAAG,GAAG,OAAO,WAAW,GAAG,KAAK,GAAG,GAAG,EAAE,EAAE,CAAC;QACvD,MAAM,KAAK,GAAG,GAAG,OAAO,UAAU,GAAG,KAAK,KAAK,CAAC,EAAE,CAAC;IACrD;IAEA,MAAM,UAAU;QACd;YAAE,IAAI;YAAO,OAAO;QAAY;QAChC;YAAE,IAAI;YAAc,OAAO;QAAuB;QAClD;YAAE,IAAI;YAAU,OAAO;QAAmB;QAC1C;YAAE,IAAI;YAAO,OAAO;QAAgB;QACpC;YAAE,IAAI;YAAQ,OAAO;QAAiB;KACvC;IAED,qBACE,8OAAC;QACC,KAAK;QACL,OAAO;QACP,WAAU;kBAEV,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA0C;;;;;;8BAIxD,8OAAC;oBAAI,WAAU;8BACZ,QAAQ,GAAG,CAAC,CAAA;wBACX,MAAM,OAAO,KAAK,CAAC,IAAI,EAAE,CAAC;wBAC1B,MAAM,aAAa,KAAK,KAAK,KAAK;wBAElC,qBACE,8OAAC;4BAEC,WAAW,CAAC,wGAAwG,EAAE,aAAa,mCAAmC,IAAI;;8CAE1K,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDACC,MAAK;gDACL,MAAK;gDACL,OAAO,IAAI,EAAE;gDACb,SAAS,mBAAmB,IAAI,EAAE;gDAClC,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;gDACjD,UAAU;gDACV,WAAU;;;;;;;;;;;sDAGd,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DAA8B,IAAI,KAAK;;;;;;gDACtD,KAAK,KAAK,GAAG,mBACZ,8OAAC;oDAAK,WAAU;8DACb,KAAK,KAAK;;;;;;;;;;;;;;;;;;8CAKnB,8OAAC;oCAAK,WAAW,CAAC,sBAAsB,EAAE,SAAS,KAAK,EAAE,GAAG;8CAC1D,SAAS,KAAK,EAAE;;;;;;;2BAzBd,IAAI,EAAE;;;;;oBA6BjB;;;;;;8BAGF,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,SAAS;gCACP,UAAU;gCACV;4BACF;4BACA,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 6383, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/layout/StatusBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useRef, useCallback, useMemo } from 'react'\nimport { GiNetworkBars } from \"react-icons/gi\";\nimport CloseAllPositionsDropdown from \"../modals/CloseAllPositionsDropdown\";\nimport { usePrivacy } from '../../context/PrivacyContext';\nimport { formatCurrency } from '../../lib/utils';\nimport { apiClient } from '../../lib/api';\nimport { useWebSocket } from '../../context/WebSocketContext';\n\nexport default function StatusBar({ openPositions = [], onCloseAll }: any) {\n  const { hideBalance } = usePrivacy();\n  const { ping } = useWebSocket();\n  const [data, setData] = useState<any>(null);\n  const [showDropdown, setShowDropdown] = useState(false)\n  const buttonRef = useRef(null)\n\n  const fetchBalance = useCallback(async () => {\n    try {\n      // Get account ID directly from localStorage to be independent\n      let accountId = localStorage.getItem('defaultMt5Account') || localStorage.getItem('accountId');\n      const token = localStorage.getItem('token');\n\n      // Force demo mock if we are in demo mode (which we are)\n      // or if the accountId looks like a demo ID\n      // Error handling: If accountId is missing, use a default demo ID\n      if (!accountId) accountId = 'demo-10001';\n\n      // Always mock for this demo terminal to avoid connection errors\n      // The user wants a purely frontend demo\n      setData({\n        Balance: 10000.00,\n        Equity: 10000.00,\n        Margin: 0,\n        MarginLevel: 0,\n        success: true\n      });\n      return;\n\n      /* \n      // Original Logic - Commented out for Demo Terminal\n      if (!accountId) return;\n\n      const baseURL = apiClient.getBaseURL();\n      const response = await fetch(`${baseURL}/api/accounts/${accountId}/profile`, {\n        cache: 'no-store',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const result = await response.json();\n\n      if (result.success && result.data) {\n        setData(result.data);\n      }\n      */\n    } catch (err) {\n      // Silently fail - balance fetch errors are not critical\n      // console.error('[StatusBar] Direct Fetch Error:', err);\n      // Fallback to demo data on error\n      setData({\n        Balance: 10000.00,\n        Equity: 10000.00,\n        Margin: 0,\n        MarginLevel: 0,\n        success: true\n      });\n    }\n  }, []);\n\n  // Standalone polling loop\n  useEffect(() => {\n    fetchBalance(); // Initial fetch\n    // Poll less aggressively to prevent connection exhaustion\n    const interval = setInterval(fetchBalance, 5000);\n    return () => clearInterval(interval);\n  }, [fetchBalance]);\n\n  // Map values\n  const equity = data?.Equity ?? data?.equity ?? 0;\n  const balance = data?.Balance ?? data?.balance ?? 0;\n  const margin = data?.Margin ?? data?.margin ?? data?.MarginUsed ?? data?.marginUsed ?? 0;\n\n  // Calculate Free Margin: Always calculate as Equity - Margin (standard MT5 formula)\n  const freeMargin = useMemo(() => {\n    const eq = Number(equity) || 0;\n    const mg = Number(margin) || 0;\n    return parseFloat((eq - mg).toFixed(2));\n  }, [equity, margin]);\n\n  const marginLevel = data?.MarginLevel ?? data?.marginLevel ?? 0;\n\n  // Calculate P/L from open positions (same as CloseAllPositionsDropdown)\n  // Sum up all position P/L values\n  const totalPL = openPositions.reduce((sum, pos) => {\n    const pl = parseFloat(String(pos.pl || '0').replace('+', ''));\n    return sum + (isNaN(pl) ? 0 : pl);\n  }, 0);\n\n  const renderValue = (value: number, suffix: string = 'USD') => {\n    if (hideBalance) return '****';\n    return `${formatCurrency(value, 2)} ${suffix}`;\n  };\n\n  return (\n    <div className=\"bg-background flex items-center justify-between px-4 py-2 text-xs text-gray-400 font-medium rounded-tl-md relative border-t border-gray-800\">\n      {/* Left section - Account info */}\n      <div className=\"flex items-center gap-6\">\n        <span>Equity: <span className=\"text-gray-200 font-mono\">{renderValue(equity)}</span></span>\n        <span>Free Margin: <span className=\"text-gray-200 font-mono\">{renderValue(freeMargin)}</span></span>\n        <span>Balance: <span className=\"text-gray-200 font-mono\">{renderValue(balance)}</span></span>\n        <span>Margin: <span className=\"text-gray-200 font-mono\">{renderValue(margin)}</span></span>\n        <span>Margin level: <span className=\"text-gray-200 font-mono\">\n          {hideBalance ? '****' : `${marginLevel.toFixed(2)}%`}\n        </span></span>\n      </div>\n\n      {/* Right section - P/L, Close all, Connection */}\n      <div className=\"flex items-center gap-4\">\n        <span className=\"text-gray-400\">Total P/L, USD: <span className={`font-mono ${totalPL >= 0 ? 'text-[#2ebd85]' : 'text-[#f6465d]'}`}>\n          {hideBalance ? '****' : <>{totalPL >= 0 ? '+' : ''}{totalPL.toFixed(2)}</>}\n        </span></span>\n\n        <button\n          ref={buttonRef}\n          onClick={() => setShowDropdown(!showDropdown)}\n          disabled={openPositions.length === 0}\n          className={`px-3 mr-20 py-1 rounded text-sm flex items-center gap-2 transition-colors ${openPositions.length === 0\n            ? 'bg-background text-[#565c66] cursor-not-allowed'\n            : 'bg-background hover:bg-[#363c45] text-gray-200 cursor-pointer'\n            }`}\n        >\n          Close all\n          <svg className={`w-3 h-3 text-gray-400 transition-transform ${showDropdown ? 'rotate-180' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n          </svg>\n        </button>\n\n        <div className=\"flex items-end gap-1 ml-2\" title={`Network Latency: ${ping}ms`}>\n          <GiNetworkBars size={14} className={\n            ping < 100 ? \"text-emerald-500\" :\n              ping < 300 ? \"text-yellow-500\" :\n                \"text-red-500 animate-pulse\"\n          } />\n          <span className={`text-[10px] font-mono leading-none mb-0 ${ping === 0 ? \"text-gray-500\" :\n            ping < 100 ? \"text-gray-500\" :\n              ping < 300 ? \"text-yellow-500/80\" :\n                \"text-red-500/80\"\n            }`}>{ping > 0 ? ping : '--'} ms</span>\n        </div>\n      </div>\n\n      <CloseAllPositionsDropdown\n        isOpen={showDropdown}\n        onClose={() => setShowDropdown(false)}\n        onConfirm={onCloseAll}\n        positions={openPositions}\n        anchorRef={buttonRef}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAEA;AARA;;;;;;;;AAUe,SAAS,UAAU,EAAE,gBAAgB,EAAE,EAAE,UAAU,EAAO;IACvE,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,+IAAU;IAClC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,mJAAY;IAC7B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAM;IACtC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,YAAY,IAAA,+MAAM,EAAC;IAEzB,MAAM,eAAe,IAAA,oNAAW,EAAC;QAC/B,IAAI;YACF,8DAA8D;YAC9D,IAAI,YAAY,aAAa,OAAO,CAAC,wBAAwB,aAAa,OAAO,CAAC;YAClF,MAAM,QAAQ,aAAa,OAAO,CAAC;YAEnC,wDAAwD;YACxD,2CAA2C;YAC3C,iEAAiE;YACjE,IAAI,CAAC,WAAW,YAAY;YAE5B,gEAAgE;YAChE,wCAAwC;YACxC,QAAQ;gBACN,SAAS;gBACT,QAAQ;gBACR,QAAQ;gBACR,aAAa;gBACb,SAAS;YACX;YACA;QAEA;;;;;;;;;;;;;;;;MAgBA,GACF,EAAE,OAAO,KAAK;YACZ,wDAAwD;YACxD,yDAAyD;YACzD,iCAAiC;YACjC,QAAQ;gBACN,SAAS;gBACT,QAAQ;gBACR,QAAQ;gBACR,aAAa;gBACb,SAAS;YACX;QACF;IACF,GAAG,EAAE;IAEL,0BAA0B;IAC1B,IAAA,kNAAS,EAAC;QACR,gBAAgB,gBAAgB;QAChC,0DAA0D;QAC1D,MAAM,WAAW,YAAY,cAAc;QAC3C,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;KAAa;IAEjB,aAAa;IACb,MAAM,SAAS,MAAM,UAAU,MAAM,UAAU;IAC/C,MAAM,UAAU,MAAM,WAAW,MAAM,WAAW;IAClD,MAAM,SAAS,MAAM,UAAU,MAAM,UAAU,MAAM,cAAc,MAAM,cAAc;IAEvF,oFAAoF;IACpF,MAAM,aAAa,IAAA,gNAAO,EAAC;QACzB,MAAM,KAAK,OAAO,WAAW;QAC7B,MAAM,KAAK,OAAO,WAAW;QAC7B,OAAO,WAAW,CAAC,KAAK,EAAE,EAAE,OAAO,CAAC;IACtC,GAAG;QAAC;QAAQ;KAAO;IAEnB,MAAM,cAAc,MAAM,eAAe,MAAM,eAAe;IAE9D,wEAAwE;IACxE,iCAAiC;IACjC,MAAM,UAAU,cAAc,MAAM,CAAC,CAAC,KAAK;QACzC,MAAM,KAAK,WAAW,OAAO,IAAI,EAAE,IAAI,KAAK,OAAO,CAAC,KAAK;QACzD,OAAO,MAAM,CAAC,MAAM,MAAM,IAAI,EAAE;IAClC,GAAG;IAEH,MAAM,cAAc,CAAC,OAAe,SAAiB,KAAK;QACxD,IAAI,aAAa,OAAO;QACxB,OAAO,GAAG,IAAA,qIAAc,EAAC,OAAO,GAAG,CAAC,EAAE,QAAQ;IAChD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;4BAAK;0CAAQ,8OAAC;gCAAK,WAAU;0CAA2B,YAAY;;;;;;;;;;;;kCACrE,8OAAC;;4BAAK;0CAAa,8OAAC;gCAAK,WAAU;0CAA2B,YAAY;;;;;;;;;;;;kCAC1E,8OAAC;;4BAAK;0CAAS,8OAAC;gCAAK,WAAU;0CAA2B,YAAY;;;;;;;;;;;;kCACtE,8OAAC;;4BAAK;0CAAQ,8OAAC;gCAAK,WAAU;0CAA2B,YAAY;;;;;;;;;;;;kCACrE,8OAAC;;4BAAK;0CAAc,8OAAC;gCAAK,WAAU;0CACjC,cAAc,SAAS,GAAG,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC;;;;;;;;;;;;;;;;;;0BAKxD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;;4BAAgB;0CAAgB,8OAAC;gCAAK,WAAW,CAAC,UAAU,EAAE,WAAW,IAAI,mBAAmB,kBAAkB;0CAC/H,cAAc,uBAAS;;wCAAG,WAAW,IAAI,MAAM;wCAAI,QAAQ,OAAO,CAAC;;;;;;;;;;;;;;kCAGtE,8OAAC;wBACC,KAAK;wBACL,SAAS,IAAM,gBAAgB,CAAC;wBAChC,UAAU,cAAc,MAAM,KAAK;wBACnC,WAAW,CAAC,0EAA0E,EAAE,cAAc,MAAM,KAAK,IAC7G,oDACA,iEACA;;4BACL;0CAEC,8OAAC;gCAAI,WAAW,CAAC,2CAA2C,EAAE,eAAe,eAAe,IAAI;gCAAE,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CAC1I,cAAA,8OAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAG,GAAE;;;;;;;;;;;;;;;;;kCAIzE,8OAAC;wBAAI,WAAU;wBAA4B,OAAO,CAAC,iBAAiB,EAAE,KAAK,EAAE,CAAC;;0CAC5E,8OAAC,+JAAa;gCAAC,MAAM;gCAAI,WACvB,OAAO,MAAM,qBACX,OAAO,MAAM,oBACX;;;;;;0CAEN,8OAAC;gCAAK,WAAW,CAAC,wCAAwC,EAAE,SAAS,IAAI,kBACvE,OAAO,MAAM,kBACX,OAAO,MAAM,uBACX,mBACF;;oCAAG,OAAO,IAAI,OAAO;oCAAK;;;;;;;;;;;;;;;;;;;0BAIlC,8OAAC,oKAAyB;gBACxB,QAAQ;gBACR,SAAS,IAAM,gBAAgB;gBAC/B,WAAW;gBACX,WAAW;gBACX,WAAW;;;;;;;;;;;;AAInB"}},
    {"offset": {"line": 6702, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/modals/ModifyPositionModal.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport FlagIcon from '../ui/FlagIcon';\nimport Tooltip from '../ui/Tooltip';\n\nimport { useTrading } from '../../context/TradingContext';\n\nconst ModifyPositionModal = () => {\n  const { modifyModalState, setModifyModalState, requestModifyPosition } = useTrading();\n  const { isOpen, position } = modifyModalState;\n\n  const [activeTab, setActiveTab] = useState('modify');\n  const [tpValue, setTpValue] = useState('');\n  const [slValue, setSlValue] = useState('');\n  const [partialVolume, setPartialVolume] = useState('');\n  const [estimatedPL, setEstimatedPL] = useState<number | null>(null);\n\n  const onClose = () => {\n    setModifyModalState({ ...modifyModalState, isOpen: false });\n  };\n\n  // Reset state when position changes or modal opens\n  useEffect(() => {\n    if (isOpen && position) {\n      // Parse TP value, removing commas if present\n      // Only set value if it's already set, otherwise leave empty\n      let tpValueStr = '';\n      if (position?.tp && position?.tp !== 'Add' && position?.tp !== 'Not Set') {\n        // Remove commas from existing TP value\n        tpValueStr = String(position.tp).replace(/,/g, '');\n      }\n\n      // Parse SL value, removing commas if present\n      // Only set value if it's already set, otherwise leave empty\n      let slValueStr = '';\n      if (position?.sl && position?.sl !== 'Add' && position?.sl !== 'Not Set') {\n        // Remove commas from existing SL value\n        slValueStr = String(position.sl).replace(/,/g, '');\n      }\n\n      setTpValue(tpValueStr);\n      setSlValue(slValueStr);\n      setPartialVolume(position?.volume || '');\n    }\n  }, [isOpen, position]);\n\n  // Calculate estimated P/L when TP/SL changes (only for open positions, not pending orders)\n  useEffect(() => {\n    if (!position) return;\n\n    // Check if this is a pending order\n    const isPendingOrder = position.type === 'Buy Limit' || position.type === 'Sell Limit' ||\n      position.type === 'Buy Stop' || position.type === 'Sell Stop';\n\n    // Don't calculate P/L for pending orders\n    if (isPendingOrder) {\n      setEstimatedPL(null);\n      return;\n    }\n\n    // Parse prices, removing commas and formatting\n    const currentPriceStr = String(position.currentPrice || position.price || '0').replace(/,/g, '');\n    const openPriceStr = String(position.openPrice || position.avg_price || position.price || '0').replace(/,/g, '');\n    const currentPrice = parseFloat(currentPriceStr) || 0;\n    const openPrice = parseFloat(openPriceStr) || 0;\n    const volume = parseFloat(position.volume || position.qty || 0);\n    const isBuy = position.type === 'Buy' || position.side === 1;\n    const symbol = (position.symbol || '').toUpperCase();\n\n    // Get contract size based on symbol type\n    let contractSize: number;\n    if (symbol.includes('XAU') || symbol.includes('XAG')) {\n      contractSize = 100; // Metals: 1 lot = 100 oz\n    } else if (symbol.includes('BTC') || symbol.includes('ETH')) {\n      contractSize = 1; // Crypto: 1 lot = 1 unit\n    } else {\n      contractSize = 100000; // Forex: 1 lot = 100,000 units\n    }\n\n    // Calculate current P/L\n    let priceDiff = isBuy ? (currentPrice - openPrice) : (openPrice - currentPrice);\n    let currentPL = priceDiff * volume * contractSize;\n\n    // If TP is set and would be hit, calculate P/L at TP\n    // Remove commas from tpValue before parsing\n    const tpValueClean = String(tpValue || '').replace(/,/g, '');\n    const tp = parseFloat(tpValueClean);\n    if (tp && !isNaN(tp) && tp > 0) {\n      const tpDiff = isBuy ? (tp - openPrice) : (openPrice - tp);\n      const tpPL = tpDiff * volume * contractSize;\n      setEstimatedPL(tpPL);\n      return;\n    }\n\n    // If SL is set and would be hit, calculate P/L at SL\n    // Remove commas from slValue before parsing\n    const slValueClean = String(slValue || '').replace(/,/g, '');\n    const sl = parseFloat(slValueClean);\n    if (sl && !isNaN(sl) && sl > 0) {\n      const slDiff = isBuy ? (sl - openPrice) : (openPrice - sl);\n      const slPL = slDiff * volume * contractSize;\n      setEstimatedPL(slPL);\n      return;\n    }\n\n    // Otherwise show current P/L\n    setEstimatedPL(currentPL);\n  }, [tpValue, slValue, position]);\n\n  if (!isOpen || !position) return null;\n\n  const handleBackdropClick = (e) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  const adjustValue = (setter, currentValue, delta, decimals = 2) => {\n    // Get current price from position, removing commas\n    const currentPriceStr = String(position.currentPrice || position.price || '0').replace(/,/g, '');\n    const currentPrice = parseFloat(currentPriceStr) || 0;\n\n    // If currentValue is empty, \"Not set\", \"Add\", or 0, use current price as base\n    // Also remove commas from currentValue before parsing\n    const isEmpty = !currentValue || currentValue === '' || currentValue === 'Not set' || currentValue === 'Add' || currentValue === '0';\n    const currentValueClean = String(currentValue || '').replace(/,/g, '');\n    const baseVal = isEmpty ? currentPrice : (parseFloat(currentValueClean) || currentPrice);\n\n    // Calculate appropriate delta based on price magnitude\n    // For prices around 88,000, we need a delta of 100, not 0.1\n    let adjustedDelta: number;\n    if (baseVal >= 10000) {\n      adjustedDelta = 100; // For prices >= 10,000 (e.g., BTCUSD)\n    } else if (baseVal >= 1000) {\n      adjustedDelta = 10; // For prices >= 1,000\n    } else if (baseVal >= 100) {\n      adjustedDelta = 1; // For prices >= 100\n    } else if (baseVal >= 10) {\n      adjustedDelta = 0.1; // For prices >= 10\n    } else {\n      adjustedDelta = 0.01; // For prices < 10\n    }\n\n    // Apply the sign from the original delta\n    adjustedDelta = adjustedDelta * (delta > 0 ? 1 : -1);\n\n    // Apply delta and format\n    const newVal = (baseVal + adjustedDelta).toFixed(decimals);\n    setter(newVal);\n  };\n\n  const handleAction = async () => {\n    if (activeTab === 'modify') {\n      try {\n        // Use ticket for pending orders, id for open positions\n        const orderId = position.ticket || position.id;\n\n        console.log('[ModifyPositionModal] handleAction', { position, orderId, tpValue, slValue });\n\n        if (!orderId) {\n          console.error('[ModifyPositionModal] No orderId found');\n          return;\n        }\n\n        // Clean and parse TP/SL values, removing commas\n        let tp: number | undefined = undefined;\n        let sl: number | undefined = undefined;\n\n        if (tpValue && tpValue !== '' && tpValue !== 'Not set' && tpValue !== 'Add') {\n          const tpClean = String(tpValue).replace(/,/g, '').trim();\n          const tpParsed = parseFloat(tpClean);\n          if (!isNaN(tpParsed) && tpParsed > 0 && isFinite(tpParsed)) {\n            tp = tpParsed;\n          }\n        }\n\n        if (slValue && slValue !== '' && slValue !== 'Not set' && slValue !== 'Add') {\n          const slClean = String(slValue).replace(/,/g, '').trim();\n          const slParsed = parseFloat(slClean);\n          if (!isNaN(slParsed) && slParsed > 0 && isFinite(slParsed)) {\n            sl = slParsed;\n          }\n        }\n\n        // Only proceed if at least one value is being modified\n        if (tp === undefined && sl === undefined) {\n          console.log('[ModifyPositionModal] No changes detected');\n          onClose();\n          return;\n        }\n\n        console.log('[ModifyPositionModal] Requesting modify:', { id: orderId, tp, sl });\n        requestModifyPosition({\n          id: orderId,\n          tp: tp,\n          sl: sl\n        });\n      } catch (error) {\n      }\n    }\n    // Add logic for partial close / close by if needed\n    onClose();\n  };\n\n  return ReactDOM.createPortal(\n    <div\n      className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/10\"\n      onClick={handleBackdropClick}\n    >\n      <div className=\"bg-[#02040d] border border-gray-800 rounded-lg w-[400px] shadow-2xl overflow-hidden font-sans text-gray-200\">\n        {/* Header */}\n        <div className=\"px-4 pt-4 pb-2 flex justify-between items-start\">\n          {/* Left Column: Symbol info */}\n          <div>\n            <div className=\"flex items-center gap-3 mb-0.5\">\n              <div className=\"w-6 h-6 relative\">\n                <FlagIcon type={position.flag || 'xauusd'} />\n              </div>\n              <div className=\"flex items-baseline gap-2\">\n                <span className=\"text-[16px] font-bold text-gray-100 tracking-wide\">{position.symbol}</span>\n                <span className=\"text-[13px] text-[#8b9096] font-normal\">{position.volume} lots</span>\n              </div>\n            </div>\n            <div className=\"flex gap-1 pl-9 text-[13px]\">\n              <span className={`font-medium ${position.type === 'Buy' || position.side === 1 ? 'text-[#0099ff]' : 'text-[#f6465d]'}`}>\n                {position.type || (position.side === 1 ? 'Buy' : 'Sell')}\n              </span>\n              <span className=\"text-[#8b9096]\">at {position.openPrice || position.price}</span>\n            </div>\n          </div>\n\n          {/* Right Column: P/L, Price, Close */}\n          <div className=\"flex items-start gap-4\">\n            <div className=\"text-right\">\n              <div className={`flex items-baseline justify-end gap-1 ${parseFloat(position.pl) >= 0 ? 'text-[#00ffaa]' : 'text-[#ff444f]'}`}>\n                <span className=\"text-[15px] font-medium\">{position.pl || '0.00'}</span>\n                <span className=\"text-[11px] text-[#8b9096]\">USD</span>\n              </div>\n              <div className=\"text-[#e1e1e1] font-medium text-[13px]\">\n                {position.currentPrice || position.price}\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-[#8b9096] hover:text-white transition-colors cursor-pointer mt-1\"\n            >\n              <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"px-4 py-3\">\n          <div className=\"flex bg-[#02040d] p-[3px] rounded border border-[#2a3038]\">\n            {['Modify', 'Partial close'].map((tab) => {\n              const id = tab.toLowerCase().replace(' ', '');\n              const isActive = activeTab === id;\n              return (\n                <button\n                  key={id}\n                  onClick={() => setActiveTab(id)}\n                  className={`flex-1 py-1.5 text-[13px] font-medium rounded-[4px] transition-all ${isActive\n                    ? 'bg-[#8b5cf6] text-black shadow-sm'\n                    : 'text-[#8b9096] hover:text-white'\n                    }`}\n                >\n                  {tab}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"px-4 pb-4 space-y-4\">\n          {activeTab === 'modify' ? (\n            <>\n              {/* Take Profit */}\n              <div>\n                <div className=\"flex items-center justify-between mb-1.5\">\n                  <label className=\"text-[12px] text-[#8b9096] font-medium\">Take Profit</label>\n                  <Tooltip text=\"Set a Take Profit if you want your order to close automatically at the price level you have specified. Setting a Take Profit allows you to lock in profits.\" placement=\"top\">\n                    <div className=\"text-[#8b9096] cursor-help hover:text-white transition-colors\">\n                      <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                    </div>\n                  </Tooltip>\n                </div>\n                <div className=\"flex h-[38px] border border-[#2a3038] rounded hover:border-[#8b9096] transition-colors group focus-within:border-[#0099ff] bg-[#1e222d]\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Not set\"\n                    value={tpValue}\n                    onChange={(e) => setTpValue(e.target.value)}\n                    className=\"flex-1 bg-transparent px-3 text-[14px] text-white placeholder-[#585c63] outline-none\"\n                  />\n                  <div className=\"flex items-center border-l border-[#2a3038]\">\n                    <button className=\"px-3 h-full text-[12px] text-[#8b9096] hover:text-white flex items-center gap-1 transition-colors hover:bg-[#2a3038]\">\n                      Price\n                      <svg className=\"w-2.5 h-2.5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path d=\"M7 10l5 5 5-5z\" />\n                      </svg>\n                    </button>\n                    <div className=\"flex h-full border-l border-[#2a3038]\">\n                      <button\n                        onClick={() => adjustValue(setTpValue, tpValue, -0.1)}\n                        className=\"w-[32px] h-full flex items-center justify-center text-[#8b9096] hover:bg-[#2a3038] hover:text-white transition-colors\"\n                      >\n                        <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 12H4\" />\n                        </svg>\n                      </button>\n                      <div className=\"w-[1px] h-full bg-[#2a3038]\"></div>\n                      <button\n                        onClick={() => adjustValue(setTpValue, tpValue, 0.1)}\n                        className=\"w-[32px] h-full flex items-center justify-center text-[#8b9096] hover:bg-[#2a3038] hover:text-white transition-colors\"\n                      >\n                        <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Stop Loss */}\n              <div>\n                <div className=\"flex items-center justify-between mb-1.5\">\n                  <label className=\"text-[12px] text-[#8b9096] font-medium\">Stop Loss</label>\n                  <Tooltip text=\"Set a Stop Loss if you want your order to close automatically at the price level you have specified. Setting a Stop Loss enables you to limit losses.\" placement=\"top\">\n                    <div className=\"text-[#8b9096] cursor-help hover:text-white transition-colors\">\n                      <svg className=\"w-3.5 h-3.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                    </div>\n                  </Tooltip>\n                </div>\n                <div className=\"flex h-[38px] border border-[#2a3038] rounded hover:border-[#8b9096] transition-colors group focus-within:border-[#0099ff] bg-[#1e222d]\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Not set\"\n                    value={slValue}\n                    onChange={(e) => setSlValue(e.target.value)}\n                    className=\"flex-1 bg-transparent px-3 text-[14px] text-white placeholder-[#585c63] outline-none\"\n                  />\n                  <div className=\"flex items-center border-l border-[#2a3038]\">\n                    <button className=\"px-3 h-full text-[12px] text-[#8b9096] hover:text-white flex items-center gap-1 transition-colors hover:bg-[#2a3038]\">\n                      Price\n                      <svg className=\"w-2.5 h-2.5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path d=\"M7 10l5 5 5-5z\" />\n                      </svg>\n                    </button>\n                    <div className=\"flex h-full border-l border-[#2a3038]\">\n                      <button\n                        onClick={() => adjustValue(setSlValue, slValue, -0.1)}\n                        className=\"w-[32px] h-full flex items-center justify-center text-[#8b9096] hover:bg-[#2a3038] hover:text-white transition-colors\"\n                      >\n                        <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 12H4\" />\n                        </svg>\n                      </button>\n                      <div className=\"w-[1px] h-full bg-[#2a3038]\"></div>\n                      <button\n                        onClick={() => adjustValue(setSlValue, slValue, 0.1)}\n                        className=\"w-[32px] h-full flex items-center justify-center text-[#8b9096] hover:bg-[#2a3038] hover:text-white transition-colors\"\n                      >\n                        <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                        </svg>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </>\n          ) : activeTab === 'partialclose' ? (\n            <>\n              {/* Volume to close */}\n              <div>\n                <div className=\"flex items-center justify-between mb-1.5\">\n                  <label className=\"text-[12px] text-[#e1e1e1] font-medium\">Volume to close</label>\n                </div>\n                <div className=\"flex h-[38px] border border-[#2a3038] rounded hover:border-[#8b9096] transition-colors group focus-within:border-[#0099ff] bg-[#1e222d]\">\n                  <div className=\"flex-1 flex items-center px-3\">\n                    <input\n                      type=\"text\"\n                      value={partialVolume}\n                      onChange={(e) => setPartialVolume(e.target.value)}\n                      className=\"w-full bg-transparent text-[14px] text-white placeholder-[#585c63] outline-none\"\n                    />\n                    <span className=\"text-[14px] text-[#8b9096] ml-2\">Lots</span>\n                  </div>\n                  <div className=\"flex h-full border-l border-[#2a3038]\">\n                    <button\n                      onClick={() => adjustValue(setPartialVolume, partialVolume, -0.01)}\n                      className=\"w-[32px] h-full flex items-center justify-center text-[#8b9096] hover:bg-[#2a3038] hover:text-white transition-colors\"\n                    >\n                      <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 12H4\" />\n                      </svg>\n                    </button>\n                    <div className=\"w-[1px] h-full bg-[#2a3038]\"></div>\n                    <button\n                      onClick={() => adjustValue(setPartialVolume, partialVolume, 0.01)}\n                      className=\"w-[32px] h-full flex items-center justify-center text-[#8b9096] hover:bg-[#2a3038] hover:text-white transition-colors\"\n                    >\n                      <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n                <div className=\"mt-1 text-[12px] text-[#8b9096]\">\n                  0.01 - {position.volume}\n                </div>\n              </div>\n            </>\n          ) : null}\n\n          {/* Estimated P/L Display */}\n          {activeTab === 'modify' && estimatedPL !== null && (\n            <div className=\"text-center text-[13px] text-[#8b9096] mb-2\">\n              Estimated P/L: <span className={estimatedPL >= 0 ? 'text-[#00ffaa]' : 'text-[#ff444f]'}>\n                {estimatedPL >= 0 ? '+' : ''}{estimatedPL.toFixed(2)} USD\n              </span>\n            </div>\n          )}\n\n          {/* Action Button */}\n          <button\n            onClick={handleAction}\n            className=\"w-full h-[40px] bg-[#8b5cf6] hover:bg-[#8b5cf6] text-black text-[14px] font-medium rounded transition-colors mt-2\"\n          >\n            {activeTab === 'modify' ? 'Modify position' : 'Close position'}\n          </button>\n\n          {activeTab === 'partialclose' && (\n            <div className=\"text-center text-[13px] text-[#8b9096]\">\n              Estimated profit: <span className={position.plColor}>{position.pl} USD</span>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>,\n    document.body\n  );\n};\n\nexport default ModifyPositionModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7713, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/ui/OrderPlacedToast.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect } from 'react'\nimport ReactDOM from 'react-dom'\n\nexport default function OrderPlacedToast({ order, onClose }) {\n  useEffect(() => {\n    if (!order) return;\n    \n    const timer = setTimeout(() => {\n      onClose()\n    }, 5000)\n    return () => clearTimeout(timer)\n  }, [order]) // Remove onClose from dependencies to prevent timer reset\n\n  if (!order) return null\n\n  // Format the order type display\n  const getOrderTypeLabel = () => {\n    if (order.orderType === 'market') {\n      return order.side === 'buy' ? 'Buy' : 'Sell';\n    } else if (order.orderType === 'limit') {\n      return order.side === 'buy' ? 'Buy Limit' : 'Sell Limit';\n    } else if (order.orderType === 'stop') {\n      return order.side === 'buy' ? 'Buy Stop' : 'Sell Stop';\n    }\n    return order.side === 'buy' ? 'Buy' : 'Sell';\n  };\n\n  // Format price display\n  const priceDisplay = order.price && !isNaN(parseFloat(order.price))\n    ? parseFloat(order.price).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 6 })\n    : null;\n\n  // Format volume display\n  const volumeDisplay = parseFloat(order.volume).toFixed(2);\n\n  // If there's an error, show error toast\n  if (order.error) {\n    return ReactDOM.createPortal(\n      <div className=\"fixed bottom-4 left-4 z-[99999] bg-[#02040d] text-[#b2b5be] rounded-md shadow-lg border border-red-500/50 w-[320px] overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-300\">\n        <div className=\"p-4 relative\">\n          <button\n            onClick={onClose}\n            className=\"absolute top-2 right-2 text-[#6e757c] hover:text-white transition-colors\"\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n\n          <div className=\"flex items-start gap-3\">\n            <div className=\"mt-0.5 text-[#f6465d]\">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" />\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\n                <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\n              </svg>\n            </div>\n\n            <div className=\"flex-1\">\n              <h3 className=\"text-white font-medium text-[14px] leading-tight mb-1\">Not enough money</h3>\n              <p className=\"text-[13px] text-[#b2b5be]\">\n                {order.error}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>,\n      document.body\n    );\n  }\n\n  return ReactDOM.createPortal(\n    <div className=\"fixed bottom-4 left-4 z-[99999] bg-[#02040d] text-[#b2b5be] rounded-md shadow-lg border border-gray-800 w-[320px] overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-300\">\n      <div className=\"p-4 relative\">\n        <button\n          onClick={onClose}\n          className=\"absolute top-2 right-2 text-[#6e757c] hover:text-white transition-colors\"\n        >\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n          </svg>\n        </button>\n\n        <div className=\"flex items-start gap-3\">\n          <div className=\"mt-0.5 text-[#2ebd85]\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\" />\n              <polyline points=\"9 11 12 14 22 4\" />\n            </svg>\n          </div>\n\n          <div className=\"flex-1\">\n            <h3 className=\"text-white font-medium text-[14px] leading-tight mb-1\">\n              {order.isModified ? 'Order Modified' : 'Order placed'}\n            </h3>\n            <p className=\"text-[13px] text-[#b2b5be] mb-3\">\n              {getOrderTypeLabel()} {volumeDisplay} lot {order.symbol} {priceDisplay ? `at ${priceDisplay}` : ''}\n            </p>\n\n            {order.profit !== undefined && order.profit !== null && (\n              <div className=\"flex items-center justify-between text-[13px]\">\n                <span className=\"text-[#b2b5be]\">Profit</span>\n                <span className={`font-medium font-mono ${order.profit >= 0 ? 'text-[#2ebd85]' : 'text-[#f6465d]'}`}>\n                  {order.profit >= 0 ? '+' : ''}{order.profit.toFixed(2)} USD\n                </span>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>,\n    document.body\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8077, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/trading/TradingTerminal.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useEffect, useState, useCallback } from 'react'\nimport { ChevronLeft } from 'lucide-react'\nimport LeftSidebar from '@/components/layout/LeftSidebar'\nimport ChartSection from '@/components/layout/ChartSection'\nimport OrderPanel from '@/components/trading/OrderPanel'\nimport { ResizablePanelGroup, ResizablePanel, ResizableHandle } from '@/components/ui/resizable'\nimport StatusBar from '@/components/layout/StatusBar'\n\nimport { useSidebar } from '@/context/SidebarContext'\nimport { useTrading } from '@/context/TradingContext'\nimport { useInstruments } from '@/context/InstrumentContext'\n\nimport { ImperativePanelHandle } from 'react-resizable-panels'\n\nimport ModifyPositionModal from '@/components/modals/ModifyPositionModal'\nimport OrderPlacedToast from '@/components/ui/OrderPlacedToast'\nimport ReactDOM from 'react-dom'\n\nexport default function TradingTerminal() {\n  const { isSidebarExpanded, setIsSidebarExpanded } = useSidebar();\n  const { symbol } = useTrading();\n  const { instruments } = useInstruments();\n  const [marketClosedToast, setMarketClosedToast] = useState<string | null>(null);\n  const leftPanelRef = useRef<ImperativePanelHandle>(null)\n  const [orderToast, setOrderToast] = useState<any>(null)\n  const [isRightSidebarOpen, setIsRightSidebarOpen] = useState(true)\n\n  // Read-only demo: Close-all is disabled, but we keep the prop for StatusBar API.\n  const handleCloseAll = useCallback((_option: string) => {\n    // no-op in demo mode\n  }, []);\n\n  // Memoize toast close handlers to prevent timer resets\n  const handleOrderToastClose = useCallback(() => {\n    setOrderToast(null);\n  }, []);\n\n  // Read-only demo: no positions or history\n  const openPositions: any[] = [];\n\n  // Order placement handlers\n  const handleBuyOrder = async (orderData: any) => {\n    setOrderToast({\n      side: 'buy',\n      symbol: symbol || 'BTCUSD',\n      volume: orderData.volume || 0,\n      price: null,\n      orderType: orderData.orderType || 'market',\n      profit: null,\n      error: 'Trading is disabled in Demo Mode.',\n    });\n  };\n\n  const handleSellOrder = async (orderData: any) => {\n    setOrderToast({\n      side: 'sell',\n      symbol: symbol || 'BTCUSD',\n      volume: orderData.volume || 0,\n      price: null,\n      orderType: orderData.orderType || 'market',\n      profit: null,\n      error: 'Trading is disabled in Demo Mode.',\n    });\n  };\n\n  // Demo mode: position modification is fully disabled; chart brackets are visual-only\n\n  // Resize the left panel when it expands or collapses\n  useEffect(() => {\n    if (leftPanelRef.current) {\n      if (isSidebarExpanded) {\n        leftPanelRef.current.resize(23) // 15% ‚âà 290px on 1920px screen\n      } else {\n        leftPanelRef.current.resize(0)\n      }\n    }\n  }, [isSidebarExpanded])\n\n  return (\n    <>\n      <ResizablePanelGroup direction=\"horizontal\" className=\"flex-1 overflow-hidden min-h-0\">\n        {/* Left sidebar with panels */}\n        <ResizablePanel\n          ref={leftPanelRef}\n          defaultSize={20}\n          minSize={8}\n          maxSize={40}\n          className={`min-h-0 h-full ${!isSidebarExpanded ? \"!min-w-[48px] !max-w-[48px] !flex-none\" : \"\"}`}\n          collapsedSize={0}\n          collapsible={true}\n          onCollapse={() => setIsSidebarExpanded(false)}\n          onExpand={() => setIsSidebarExpanded(true)}\n        >\n          <LeftSidebar\n            onPanelStateChange={setIsSidebarExpanded}\n            isExpanded={isSidebarExpanded}\n          />\n        </ResizablePanel>\n\n        {/* Horizontal resize handle */}\n        <ResizableHandle withHandle={false} disabled={!isSidebarExpanded} className={!isSidebarExpanded ? \"pointer-events-none w-0\" : \"\"} />\n\n        {/* Main content area with status bar */}\n        <ResizablePanel defaultSize={80} className=\"flex flex-col h-full gap-1 border-2 border-red-500 box-border\">\n          {/* Top content area */}\n          <div className=\"relative flex flex-1 overflow-hidden gap-1\">\n            <div className=\"flex flex-col flex-1 min-w-0 overflow-hidden\">\n              {/* Chart section - Demo Mode: Full Height */}\n              <div className=\"flex-1 min-h-0 overflow-hidden\">\n                <ChartSection />\n              </div>\n            </div>\n\n            {/* Order Panel */}\n            {isRightSidebarOpen && (\n              <div className=\"w-[280px] border-l border-[#2a2f36] bg-background flex-shrink-0\">\n                <OrderPanel\n                  onClose={() => setIsRightSidebarOpen(false)}\n                  onBuy={handleBuyOrder}\n                  onSell={handleSellOrder}\n                />\n              </div>\n            )}\n\n            {/* Floating Open Button */}\n            {!isRightSidebarOpen && (\n              <button\n                onClick={() => setIsRightSidebarOpen(true)}\n                className=\"absolute right-0 top-2 z-50 bg-background border border-[#2a2f36] border-r-0 text-gray-400 hover:text-white transition-colors p-1.5 rounded-l-md shadow-lg cursor-pointer\"\n                title=\"Open Order Panel\"\n              >\n                <ChevronLeft size={20} />\n              </button>\n            )}\n          </div>\n\n          {/* Status bar only for center and right areas */}\n          <StatusBar\n            openPositions={openPositions}\n            onCloseAll={handleCloseAll}\n          />\n        </ResizablePanel>\n      </ResizablePanelGroup>\n      <ModifyPositionModal />\n      <OrderPlacedToast\n        order={orderToast}\n        onClose={handleOrderToastClose}\n      />\n      {marketClosedToast && ReactDOM.createPortal(\n        <div className=\"fixed bottom-4 left-4 z-[99999] bg-[#0b0e14] text-[#d1d5db] rounded-md shadow-lg border border-amber-500/60 w-[320px] overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-300\">\n          <div className=\"p-4 relative\">\n            <button\n              onClick={() => setMarketClosedToast(null)}\n              className=\"absolute top-2 right-2 text-[#9ca3af] hover:text-white transition-colors\"\n            >\n              √ó\n            </button>\n            <div className=\"flex items-start gap-3\">\n              <div className=\"mt-0.5 text-amber-400\">‚ö†</div>\n              <div className=\"flex-1\">\n                <h3 className=\"text-white font-medium text-[14px] leading-tight mb-1\">Market closed</h3>\n                <p className=\"text-[13px] text-[#d1d5db]\">{marketClosedToast}</p>\n              </div>\n            </div>\n          </div>\n        </div>,\n        document.body\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8373, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/app/terminal/page.tsx"],"sourcesContent":["'use client';\n\nimport TradingTerminal from '../../components/trading/TradingTerminal';\nimport { useAuth } from '@/context/AuthContext';\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { LoadingScreen } from '@/components/ui/loading-wave';\n\nexport default function TerminalPage() {\n  return <TradingTerminal />;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQe,SAAS;IACtB,qBAAO,8OAAC,2JAAe;;;;;AACzB"}}]
}