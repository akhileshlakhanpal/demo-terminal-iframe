{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/lib/api.ts"],"sourcesContent":["/**\n * API Client for Backend Communication\n * \n * NOTE: This should point to the LOCAL backend server (localhost:5000)\n * NOT to the external MetaAPI (metaapi.zuperior.com)\n * The MetaAPI is only accessed by the backend server, not the frontend.\n */\n\n// Use NEXT_PUBLIC_BACKEND_API_URL for backend API, or default to localhost:5000\n// IMPORTANT: In Next.js, NEXT_PUBLIC_* variables are embedded at build time\n// Make sure to set NEXT_PUBLIC_BACKEND_API_URL in Vercel environment variables before building\nconst getBackendUrl = () => {\n  // Use NEXT_PUBLIC_BACKEND_API_URL if set\n  if (process.env.NEXT_PUBLIC_BACKEND_API_URL) {\n    return process.env.NEXT_PUBLIC_BACKEND_API_URL;\n  }\n\n  // Default to localhost:5000 (only for local development)\n  // In production, this should never be reached if NEXT_PUBLIC_BACKEND_API_URL is set in Vercel\n  return 'http://localhost:5000';\n};\n\nconst API_BASE_URL = getBackendUrl();\n\n// Production: Console logs removed\n\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  message?: string;\n  data?: T;\n  user?: {\n    name?: string;\n    email?: string;\n    id?: string;\n    [key: string]: any;\n  };\n  token?: string;\n  errors?: string[];\n  mt5Account?: {\n    accountId?: string;\n    [key: string]: any;\n  };\n  [key: string]: any; // Allow for other fields like 'positions', 'pendingOrders'\n}\n\nclass ApiClient {\n  public baseURL: string;\n\n  constructor(baseURL: string) {\n    this.baseURL = baseURL;\n  }\n\n  /**\n   * Get the current base URL, re-evaluating environment variables at runtime\n   * This ensures production builds use the correct API URL from environment variables\n   * In Next.js, NEXT_PUBLIC_* variables are embedded at build time and available at runtime\n   * ALWAYS use this method instead of this.baseURL to ensure correct URL in production\n   */\n  getBaseURL(): string {\n    // Check if we're in production (Vercel deployment or any non-localhost domain)\n    const isProduction = typeof window !== 'undefined' &&\n      (window.location.hostname.includes('vercel.app') ||\n        window.location.hostname.includes('vercel.com') ||\n        (!window.location.hostname.includes('localhost') &&\n          !window.location.hostname.includes('127.0.0.1') &&\n          !window.location.hostname.includes('192.168')));\n\n    // CRITICAL: If we're in production, ALWAYS use production URL\n    // This ensures it works even if env var wasn't set during build\n    if (isProduction) {\n      const productionBackendUrl = 'https://zup-terminal-backend.onrender.com';\n      return productionBackendUrl;\n    }\n\n    // For local development, check env var first, then fallback to localhost\n    const backendUrl = process.env.NEXT_PUBLIC_BACKEND_API_URL;\n    if (backendUrl && typeof backendUrl === 'string' && backendUrl.trim() !== '') {\n      return backendUrl.trim();\n    }\n\n    // Fallback to localhost for local development only\n    return this.baseURL || 'http://localhost:5000';\n  }\n\n  /**\n   * Get authentication token from localStorage or cookie\n   */\n  getToken(): string | null {\n    if (typeof window === 'undefined') return null;\n\n    // Try to get from localStorage first\n    const token = localStorage.getItem('token');\n    if (token) return token;\n\n    // Could also check cookies if needed\n    return null;\n  }\n\n  /**\n   * Set authentication token\n   */\n  setToken(token: string): void {\n    if (typeof window === 'undefined') return;\n    localStorage.setItem('token', token);\n  }\n\n  /**\n   * Clear authentication token\n   */\n  clearToken(): void {\n    if (typeof window === 'undefined') return;\n    localStorage.removeItem('token');\n  }\n\n  /**\n   * Make API request\n   */\n  private async request<T>(\n    endpoint: string,\n    options: RequestInit = {}\n  ): Promise<ApiResponse<T>> {\n    const token = this.getToken();\n\n    const headers: HeadersInit = {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    };\n\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    // Demo Mode: Short-circuit requests for demo accounts\n    if (endpoint.includes('demo-')) {\n      return { success: true, data: [] as any } as ApiResponse<T>;\n    }\n\n    try {\n      // CRITICAL: Always use getBaseURL() which checks runtime env vars\n      // This ensures production uses the correct URL even if build was done before env var was set\n      const baseURL = this.getBaseURL();\n      const url = `${baseURL}${endpoint}`;\n\n      const response = await fetch(url, {\n        ...options,\n        headers,\n        credentials: 'include', // Include cookies for httpOnly cookies from backend\n      });\n\n      // Check if response is ok before trying to parse JSON\n      if (!response.ok) {\n        let errorMessage = `Request failed with status ${response.status}`;\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n        } catch {\n          // If JSON parsing fails, use status text\n          errorMessage = response.statusText || errorMessage;\n        }\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json();\n      return data;\n    } catch (error: any) {\n      // Handle network errors (backend not running, CORS, etc.)\n      if (error.name === 'TypeError' && error.message === 'Failed to fetch') {\n        const currentBaseURL = this.getBaseURL();\n        throw new Error(`Backend server is not reachable at ${currentBaseURL}. Please ensure the server is running.`);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * GET request\n   */\n  async get<T>(endpoint: string): Promise<ApiResponse<T>> {\n    return this.request<T>(endpoint, { method: 'GET' });\n  }\n\n  /**\n   * POST request\n   */\n  async post<T>(endpoint: string, body?: any): Promise<ApiResponse<T>> {\n    return this.request<T>(endpoint, {\n      method: 'POST',\n      body: JSON.stringify(body),\n    });\n  }\n\n  /**\n   * PUT request\n   */\n  async put<T>(endpoint: string, body?: any): Promise<ApiResponse<T>> {\n    return this.request<T>(endpoint, {\n      method: 'PUT',\n      body: JSON.stringify(body),\n    });\n  }\n\n  /**\n   * DELETE request\n   */\n  async delete<T>(endpoint: string): Promise<ApiResponse<T>> {\n    return this.request<T>(endpoint, { method: 'DELETE' });\n  }\n}\n\n// Export singleton instance\nexport const apiClient = new ApiClient(API_BASE_URL);\n\n// Auth API methods\nexport const authApi = {\n  login: (email: string, password: string) =>\n    apiClient.post('/api/auth/login', { email, password }),\n\n  register: (email: string, password: string, name?: string, phone?: string) =>\n    apiClient.post('/api/auth/register', { email, password, name, phone }),\n\n  logout: () => apiClient.post('/api/auth/logout'),\n\n  getCurrentUser: () => apiClient.get('/api/auth/me'),\n\n  ssoLogin: (token: string, clientId: string) =>\n    apiClient.post('/api/auth/sso-login', { token, clientId }),\n};\n\n// Orders API methods\nexport interface PlaceMarketOrderParams {\n  accountId: string;\n  symbol: string;\n  side: 'buy' | 'sell';\n  volume: number;\n  stopLoss?: number;\n  takeProfit?: number;\n}\n\nexport interface PlacePendingOrderParams {\n  accountId: string;\n  symbol: string;\n  side: 'buy' | 'sell';\n  volume: number;\n  price: number;\n  orderType: 'limit' | 'stop';\n  stopLoss?: number;\n  takeProfit?: number;\n}\n\nexport interface ModifyPendingOrderParams {\n  accountId: string;\n  orderId: string;\n  price?: number;\n  volume?: number;\n  stopLoss?: number;\n  takeProfit?: number;\n}\n\nexport const ordersApi = {\n  placeMarketOrder: (params: PlaceMarketOrderParams) =>\n    apiClient.post('/api/orders/market', params),\n\n  placePendingOrder: (params: PlacePendingOrderParams) =>\n    apiClient.post('/api/orders/pending', params),\n\n  modifyPendingOrder: (params: ModifyPendingOrderParams) =>\n    apiClient.put(`/api/orders/pending/${params.orderId}`, {\n      accountId: params.accountId,\n      price: params.price,\n      volume: params.volume,\n      stopLoss: params.stopLoss,\n      takeProfit: params.takeProfit,\n    }),\n};\n\nexport interface ClosePositionParams {\n  accountId: string;\n  positionId: string | number;\n  symbol?: string;\n  volume?: number;\n}\n\nexport interface CloseAllParams {\n  accountId: string;\n}\n\nexport interface ModifyPositionParams {\n  accountId: string;\n  positionId: string | number;\n  stopLoss?: number;\n  takeProfit?: number;\n  comment?: string;\n}\n\nexport const positionsApi = {\n  closePosition: (params: ClosePositionParams) =>\n    apiClient.post(`/api/positions/${params.positionId}/close`, {\n      accountId: params.accountId,\n      symbol: params.symbol,\n      volume: params.volume,\n    }),\n\n  closeAll: (params: CloseAllParams) =>\n    apiClient.post('/api/positions/close-all', {\n      accountId: params.accountId,\n    }),\n\n  modifyPosition: (params: ModifyPositionParams) =>\n    apiClient.put(`/api/positions/${params.positionId}/modify`, {\n      accountId: params.accountId,\n      stopLoss: params.stopLoss,\n      takeProfit: params.takeProfit,\n      comment: params.comment,\n    }),\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/context/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { authApi, apiClient } from '../lib/api';\n\ninterface User {\n  id: string;\n  clientId?: string;\n  email: string;\n  name?: string;\n  phone?: string;\n  country?: string;\n  role: string;\n  status: string;\n  emailVerified: boolean;\n  createdAt?: string;\n  lastLoginAt?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  register: (email: string, password: string, name?: string, phone?: string) => Promise<void>;\n  logout: () => Promise<void>;\n  refreshUser: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Check if user is authenticated on mount\n  useEffect(() => {\n    // Demo Mode: Skip checkAuth and set mock user immediately\n    setUser({\n      id: 'demo-user-id',\n      email: 'demo@zuperior.com',\n      name: 'Demo User',\n      role: 'user',\n      status: 'active',\n      emailVerified: true\n    });\n    setIsLoading(false);\n  }, []);\n\n  const checkAuth = async () => {\n    // No-op for demo\n  };\n\n  const login = async (email: string, password: string) => {\n    // No-op for demo\n  };\n\n  const register = async (email: string, password: string, name?: string, phone?: string) => {\n    // No-op for demo\n  };\n\n  const logout = async () => {\n    // No-op for demo\n  };\n\n  const refreshUser = async () => {\n    // No-op for demo\n  };\n\n  const value: AuthContextType = {\n    user,\n    isLoading,\n    isAuthenticated: true, // Always authenticated in demo\n    login,\n    register,\n    logout,\n    refreshUser,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AA6BA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,0CAA0C;IAC1C,IAAA,kNAAS,EAAC;QACR,0DAA0D;QAC1D,QAAQ;YACN,IAAI;YACJ,OAAO;YACP,MAAM;YACN,MAAM;YACN,QAAQ;YACR,eAAe;QACjB;QACA,aAAa;IACf,GAAG,EAAE;IAEL,MAAM,YAAY;IAChB,iBAAiB;IACnB;IAEA,MAAM,QAAQ,OAAO,OAAe;IAClC,iBAAiB;IACnB;IAEA,MAAM,WAAW,OAAO,OAAe,UAAkB,MAAe;IACtE,iBAAiB;IACnB;IAEA,MAAM,SAAS;IACb,iBAAiB;IACnB;IAEA,MAAM,cAAc;IAClB,iBAAiB;IACnB;IAEA,MAAM,QAAyB;QAC7B;QACA;QACA,iBAAiB;QACjB;QACA;QACA;QACA;IACF;IAEA,qBAAO,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/context/AccountContext.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react'\nimport { apiClient } from '@/lib/api'\nimport { useAuth } from './AuthContext'\nimport { useMultiAccountBalancePolling } from '@/hooks/useAccountBalances'\n\nexport interface MT5Account {\n  id: string\n  accountId: string\n  displayAccountId: string\n  accountType: 'Live' | 'Demo'\n  group: string\n  linkedAt: string\n}\n\ninterface AccountContextType {\n  mt5Accounts: MT5Account[]\n  currentAccountId: string | null\n  setCurrentAccountId: (accountId: string | null) => void\n  defaultAccountId: string | null\n  isLoading: boolean\n  isAccountSwitching: boolean\n  error: string | null\n  refreshAccounts: () => Promise<void>\n  balances: Record<string, any>\n  isBalanceLoading: Record<string, boolean>\n  balanceErrors: Record<string, string | null>\n  currentBalance: any | null\n  currentAccount: MT5Account | null\n  refreshBalance: (accountId: string) => void\n  metaApiTokens: Record<string, string> // accountId -> accessToken\n  getMetaApiToken: (accountId: string) => Promise<string | null>\n}\n\nconst AccountContext = createContext<AccountContextType | undefined>(undefined)\n\nexport function AccountProvider({ children }: { children: React.ReactNode }) {\n  const { isAuthenticated, isLoading: isAuthLoading } = useAuth()\n\n  const [mt5Accounts, setMt5Accounts] = useState<MT5Account[]>([])\n  const [currentAccountId, setCurrentAccountIdState] = useState<string | null>(null)\n  const [defaultAccountId, setDefaultAccountId] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const [isAccountSwitching, setIsAccountSwitching] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [metaApiTokens, setMetaApiTokens] = useState<Record<string, string>>({})\n\n  // Get account IDs for balance polling\n  const accountIds = useMemo(() => mt5Accounts.map(account => account.accountId), [mt5Accounts])\n  // Load current account from localStorage or URL params on mount\n  useEffect(() => {\n    // Demo Mode: Force demo account\n    const demoAccountId = 'demo-10001';\n    setCurrentAccountIdState(demoAccountId);\n    setMt5Accounts([{\n      id: 'demo-id',\n      accountId: demoAccountId,\n      displayAccountId: '10001',\n      accountType: 'Demo',\n      group: 'Demo',\n      linkedAt: new Date().toISOString()\n    }]);\n    setIsLoading(false);\n  }, [])\n\n  // Current balance data for easy access (Demo Mode: Static Balance)\n  const balances = useMemo(() => ({\n    'demo-10001': {\n      balance: 10000,\n      equity: 10000,\n      margin: 0,\n      freeMargin: 10000,\n      marginLevel: 0,\n      currency: 'USD',\n      leverage: '1:400'\n    }\n  }), []);\n\n  const isBalanceLoading = useMemo(() => ({ 'demo-10001': false }), []);\n  const balanceErrors = useMemo(() => ({ 'demo-10001': null }), []);\n\n  const currentBalance = useMemo(() => balances['demo-10001'], [balances]);\n  const currentAccount = useMemo(() => mt5Accounts[0] || null, [mt5Accounts]);\n\n  const fetchAccounts = useCallback(async () => {\n    // No-op for demo\n  }, []);\n\n  const refreshAccounts = useCallback(async () => {\n    // No-op for demo\n  }, []);\n\n  const getMetaApiToken = useCallback(async (accountId: string): Promise<string | null> => {\n    // For demo, we might still need a valid token to fetch real-time data if context requires it,\n    // but usually, the socket feed is separate. Let's return a dummy or handle in socket.\n    return 'demo-token';\n  }, []);\n\n  const setCurrentAccountId = useCallback((accountId: string | null) => {\n    // No-op for demo\n  }, []);\n\n  const refreshBalance = useCallback((accountId: string) => {\n    // No-op for demo\n  }, []);\n\n  return (\n    <AccountContext.Provider\n      value={{\n        mt5Accounts,\n        currentAccountId,\n        setCurrentAccountId,\n        defaultAccountId,\n        isLoading,\n        isAccountSwitching,\n        error,\n        refreshAccounts,\n        balances,\n        isBalanceLoading,\n        balanceErrors,\n        currentBalance,\n        currentAccount,\n        refreshBalance,\n        metaApiTokens,\n        getMetaApiToken,\n      }}\n    >\n      {children}\n    </AccountContext.Provider>\n  )\n}\n\nexport function useAccount() {\n  const context = useContext(AccountContext)\n  if (context === undefined) {\n    throw new Error('useAccount must be used within an AccountProvider')\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AAJA;;;;AAmCA,MAAM,+BAAiB,IAAA,sNAAa,EAAiC;AAE9D,SAAS,gBAAgB,EAAE,QAAQ,EAAiC;IACzE,MAAM,EAAE,eAAe,EAAE,WAAW,aAAa,EAAE,GAAG,IAAA,yIAAO;IAE7D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAe,EAAE;IAC/D,MAAM,CAAC,kBAAkB,yBAAyB,GAAG,IAAA,iNAAQ,EAAgB;IAC7E,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAgB;IACxE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAAC;IAC7D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAyB,CAAC;IAE5E,sCAAsC;IACtC,MAAM,aAAa,IAAA,gNAAO,EAAC,IAAM,YAAY,GAAG,CAAC,CAAA,UAAW,QAAQ,SAAS,GAAG;QAAC;KAAY;IAC7F,gEAAgE;IAChE,IAAA,kNAAS,EAAC;QACR,gCAAgC;QAChC,MAAM,gBAAgB;QACtB,yBAAyB;QACzB,eAAe;YAAC;gBACd,IAAI;gBACJ,WAAW;gBACX,kBAAkB;gBAClB,aAAa;gBACb,OAAO;gBACP,UAAU,IAAI,OAAO,WAAW;YAClC;SAAE;QACF,aAAa;IACf,GAAG,EAAE;IAEL,mEAAmE;IACnE,MAAM,WAAW,IAAA,gNAAO,EAAC,IAAM,CAAC;YAC9B,cAAc;gBACZ,SAAS;gBACT,QAAQ;gBACR,QAAQ;gBACR,YAAY;gBACZ,aAAa;gBACb,UAAU;gBACV,UAAU;YACZ;QACF,CAAC,GAAG,EAAE;IAEN,MAAM,mBAAmB,IAAA,gNAAO,EAAC,IAAM,CAAC;YAAE,cAAc;QAAM,CAAC,GAAG,EAAE;IACpE,MAAM,gBAAgB,IAAA,gNAAO,EAAC,IAAM,CAAC;YAAE,cAAc;QAAK,CAAC,GAAG,EAAE;IAEhE,MAAM,iBAAiB,IAAA,gNAAO,EAAC,IAAM,QAAQ,CAAC,aAAa,EAAE;QAAC;KAAS;IACvE,MAAM,iBAAiB,IAAA,gNAAO,EAAC,IAAM,WAAW,CAAC,EAAE,IAAI,MAAM;QAAC;KAAY;IAE1E,MAAM,gBAAgB,IAAA,oNAAW,EAAC;IAChC,iBAAiB;IACnB,GAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,oNAAW,EAAC;IAClC,iBAAiB;IACnB,GAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,oNAAW,EAAC,OAAO;QACzC,8FAA8F;QAC9F,sFAAsF;QACtF,OAAO;IACT,GAAG,EAAE;IAEL,MAAM,sBAAsB,IAAA,oNAAW,EAAC,CAAC;IACvC,iBAAiB;IACnB,GAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,oNAAW,EAAC,CAAC;IAClC,iBAAiB;IACnB,GAAG,EAAE;IAEL,qBACE,8OAAC,eAAe,QAAQ;QACtB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 430, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/context/InstrumentContext.tsx"],"sourcesContent":["\n\"use client\"\n\nimport React, { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react'\nimport { apiClient } from '@/lib/api'\nimport { useAccount } from './AccountContext'\n\nexport interface Instrument {\n    id: string\n    symbol: string\n    name: string\n    description: string\n    category: string\n    group: string\n    digits?: number\n    bid?: string\n    ask?: string\n    change?: string\n    favorite?: boolean\n}\n\ninterface InstrumentContextType {\n    instruments: Instrument[]\n    isLoading: boolean\n    error: string | null\n    categories: string[]\n    refreshInstruments: () => Promise<void>\n    getInstrumentsByCategory: (category: string) => Instrument[]\n    toggleFavorite: (instrumentId: string) => Promise<void>\n    reorderInstruments: (newOrder: Instrument[]) => Promise<void>\n}\n\nconst InstrumentContext = createContext<InstrumentContextType | undefined>(undefined)\n\nexport function InstrumentProvider({ children }: { children: React.ReactNode }) {\n    const { currentAccount, currentAccountId } = useAccount()\n    const [instruments, setInstruments] = useState<Instrument[]>([])\n    const [isLoading, setIsLoading] = useState(false)\n    const [error, setError] = useState<string | null>(null)\n\n    const accountGroup = currentAccount?.group\n\n    const getFavoritesKey = useCallback((accountId: string) => {\n        return `zup-favorites-${accountId}`\n    }, [])\n\n    const fetchInstruments = useCallback(async (groupName: string, accountId?: string) => {\n        if (!groupName) {\n            setInstruments([])\n            return\n        }\n\n        const cacheKey = `zup-instruments-${groupName}-${accountId || 'global'}`\n        const cached = localStorage.getItem(cacheKey)\n\n        let initialData: Instrument[] = []\n        if (cached) {\n            try {\n                const { data } = JSON.parse(cached)\n                initialData = data\n            } catch (e) { }\n        }\n\n        // Apply local favorites override immediately if we have data\n        if (initialData.length > 0 && accountId) {\n            const favKey = getFavoritesKey(accountId)\n            const rawFavs = localStorage.getItem(favKey)\n            const favSet = rawFavs ? new Set(JSON.parse(rawFavs)) : new Set()\n\n            initialData = initialData.map(inst => ({\n                ...inst,\n                favorite: favSet.has(inst.id)\n            }))\n        }\n\n        // Initial render with cached data (and merged favorites)\n        if (initialData.length > 0) {\n            setInstruments(initialData)\n            // If we have cached data, don't set loading state to avoid blocking UI\n            // We still fetch in background\n            setIsLoading(false)\n        } else {\n            setIsLoading(true)\n        }\n        setError(null)\n\n        try {\n            const endpoint = `/api/instruments?group=${encodeURIComponent(groupName)}${accountId ? `&accountId=${accountId}` : ''}`\n            const response = await apiClient.get<Instrument[]>(endpoint)\n\n            if (response.success && response.data && response.data.length > 0) {\n                let freshData = response.data\n\n                // Merge Client-Side Favorites\n                if (accountId) {\n                    const favKey = getFavoritesKey(accountId)\n                    const rawFavs = localStorage.getItem(favKey)\n                    const favSet = rawFavs ? new Set(JSON.parse(rawFavs)) : new Set()\n\n                    freshData = freshData.map(inst => ({\n                        ...inst,\n                        favorite: favSet.has(inst.id)\n                    }))\n                }\n\n                setInstruments(freshData)\n                localStorage.setItem(cacheKey, JSON.stringify({ ts: Date.now(), data: freshData }))\n            } else {\n                // Demo Mode: Use fallback symbols if API fails\n                const fallbackInstruments: Instrument[] = [\n                    { id: 'eurusd', symbol: 'EURUSD', name: 'Euro / US Dollar', description: 'Forex', category: 'Forex', group: 'Demo', digits: 5 },\n                    { id: 'gbpusd', symbol: 'GBPUSD', name: 'Great Britain Pound / US Dollar', description: 'Forex', category: 'Forex', group: 'Demo', digits: 5 },\n                    { id: 'xauusd', symbol: 'XAUUSD', name: 'Gold / US Dollar', description: 'Metals', category: 'Metals', group: 'Demo', digits: 2 },\n                    { id: 'btcusd', symbol: 'BTCUSD', name: 'Bitcoin / US Dollar', description: 'Crypto', category: 'Crypto', group: 'Demo', digits: 2 },\n                    { id: 'ethusd', symbol: 'ETHUSD', name: 'Ethereum / US Dollar', description: 'Crypto', category: 'Crypto', group: 'Demo', digits: 2 },\n                ]\n                setInstruments(fallbackInstruments)\n                setError(null)\n            }\n        } catch (err) {\n            // Demo Mode: Use fallback symbols on error\n            const fallbackInstruments: Instrument[] = [\n                { id: 'eurusd', symbol: 'EURUSD', name: 'Euro / US Dollar', description: 'Forex', category: 'Forex', group: 'Demo', digits: 5 },\n                { id: 'gbpusd', symbol: 'GBPUSD', name: 'Great Britain Pound / US Dollar', description: 'Forex', category: 'Forex', group: 'Demo', digits: 5 },\n                { id: 'xauusd', symbol: 'XAUUSD', name: 'Gold / US Dollar', description: 'Metals', category: 'Metals', group: 'Demo', digits: 2 },\n                { id: 'btcusd', symbol: 'BTCUSD', name: 'Bitcoin / US Dollar', description: 'Crypto', category: 'Crypto', group: 'Demo', digits: 2 },\n                { id: 'ethusd', symbol: 'ETHUSD', name: 'Ethereum / US Dollar', description: 'Crypto', category: 'Crypto', group: 'Demo', digits: 2 },\n            ]\n            setInstruments(fallbackInstruments)\n            setError(null)\n        } finally {\n            setIsLoading(false)\n        }\n    }, [getFavoritesKey])\n\n    useEffect(() => {\n        if (accountGroup) {\n            fetchInstruments(accountGroup, currentAccountId || undefined)\n        }\n    }, [accountGroup, currentAccountId, fetchInstruments])\n\n    const categories = useMemo(() => {\n        const cats = new Set(['Favorites', 'All instruments'])\n        instruments.forEach(item => {\n            if (item.category) cats.add(item.category)\n        })\n        return Array.from(cats)\n    }, [instruments])\n\n    const toggleFavorite = async (instrumentId: string) => {\n        if (!currentAccountId) return\n\n        const favKey = getFavoritesKey(currentAccountId)\n        const rawFavs = localStorage.getItem(favKey)\n        const favSet = rawFavs ? new Set<string>(JSON.parse(rawFavs)) : new Set<string>()\n\n        // Toggle\n        if (favSet.has(instrumentId)) {\n            favSet.delete(instrumentId)\n        } else {\n            favSet.add(instrumentId)\n        }\n\n        // Save to Cache\n        localStorage.setItem(favKey, JSON.stringify(Array.from(favSet)))\n\n        // Update State\n        setInstruments(prev => prev.map(inst =>\n            inst.id === instrumentId ? { ...inst, favorite: favSet.has(instrumentId) } : inst\n        ))\n    }\n\n    const reorderInstruments = async (newOrder: Instrument[]) => {\n        setInstruments(newOrder)\n        // Note: Reordering persistence removed as per user request to avoid DB usage.\n        // If client-side reordering persistence is needed, we would implement `zup-order-<accountId>` here.\n    }\n\n    const refreshInstruments = async () => {\n        if (accountGroup) {\n            await fetchInstruments(accountGroup, currentAccountId || undefined)\n        }\n    }\n\n    const getInstrumentsByCategory = (category: string) => {\n        if (category === 'All instruments') return instruments\n        if (category === 'Favorites') return instruments.filter(i => i.favorite)\n        return instruments.filter(i => i.category === category)\n    }\n\n    return (\n        <InstrumentContext.Provider\n            value={{\n                instruments,\n                isLoading,\n                error,\n                categories,\n                refreshInstruments,\n                getInstrumentsByCategory,\n                toggleFavorite,\n                reorderInstruments\n            }}\n        >\n            {children}\n        </InstrumentContext.Provider>\n    )\n}\n\nexport function useInstruments() {\n    const context = useContext(InstrumentContext)\n    if (context === undefined) {\n        throw new Error('useInstruments must be used within an InstrumentProvider')\n    }\n    return context\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 702, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/context/WebSocketContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useRef, useState, useCallback, ReactNode } from 'react';\n\n// Types\nexport interface QuoteData {\n    type: string;\n    symbol: string;\n    ts: number;\n    bid: number;\n    ask: number;\n    spread?: number;\n    dayHigh?: number;\n    dayLow?: number;\n}\n\ninterface WebSocketContextType {\n    isConnected: boolean;\n    lastQuotes: Record<string, QuoteData>;\n    subscribe: (symbols: string[]) => void;\n    unsubscribe: (symbols: string[]) => void;\n    normalizeSymbol: (symbol: string) => string;\n    ping: number;\n}\n\nconst WebSocketContext = createContext<WebSocketContextType | undefined>(undefined);\n\n// Helper to strip suffixes like .e, .m, etc.\n// \"catch symbol like btcusd eurusd usdjpy\" -> remove non-alphanumeric at end? \n// Usually standard is \"BTCUSD\" 6 chars. \n// Or just split by '.'? The user mentioned \"BTCUSDm\". \n// Let's assume the base is usually the first 6 chars or we strip lowercase suffixes?\n// \"BTCUSDm\" -> \"BTCUSD\". \"BTCUSDe\" -> \"BTCUSD\". \"XAUUSD\" -> 6 chars.\n// Simple heuristic: If length > 6 and ends with lowercase or dot?\n// Or just regex `^([A-Z0-9]+)`.\n// Actually safely: most forex are 6 chars. Crypto can be longer.\n// User said: \"even they end with liek BTCUSDm BTCUSDe or xyz\"\n// I will try to strictly capitalize and remove trailing lowercase letters and dots.\nexport const normalizeSymbol = (symbol: string): string => {\n    if (!symbol) return '';\n    const s = symbol.split('.')[0].trim();\n    // Strip trailing suffixes like m, a, c, f, h, r (case-insensitive)\n    // Matches BTCUSDm, BTCUSDM, BTCUSD.i, etc.\n    return s.replace(/[macfhrMACFHR]+$/, '').toUpperCase();\n};\n\nexport function WebSocketProvider({ children }: { children: ReactNode }) {\n    const [isConnected, setIsConnected] = useState(false);\n    const [lastQuotes, setLastQuotes] = useState<Record<string, QuoteData>>({});\n    const [ping, setPing] = useState<number>(0);\n\n    // Refs for socket management\n    const wsRef = useRef<WebSocket | null>(null);\n    const activeSubscriptions = useRef<Set<string>>(new Set());\n    const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n    const pingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n    const lastPingTimeRef = useRef<number>(0);\n\n    const connect = useCallback(() => {\n        if (wsRef.current) return;\n\n        const url = process.env.NEXT_PUBLIC_WS_URL || 'wss://metaapi.zuperior.com/ws';\n        const socket = new WebSocket(url);\n        wsRef.current = socket;\n\n        socket.onopen = () => {\n\n            setIsConnected(true);\n\n            // Resubscribe to anything we were listening to\n            if (activeSubscriptions.current.size > 0) {\n                const symbols = Array.from(activeSubscriptions.current);\n                sendSubscription(socket, symbols);\n            } else {\n                // Subscribe to a default symbol to heartbeat the connection for ping\n                sendSubscription(socket, ['BTCUSD']);\n            }\n            console.log('[WebSocketContext] Connected. Subscriptions sent.');\n\n            // Start application-level ping\n            if (pingIntervalRef.current) clearInterval(pingIntervalRef.current);\n            pingIntervalRef.current = setInterval(() => {\n                if (socket.readyState === WebSocket.OPEN) {\n                    lastPingTimeRef.current = Date.now();\n                    // Send a ping message if backend supports it, or just use a dummy subscription to trigger a response?\n                    // MetaApi might not have a dedicated 'ping' type.\n                    // But if we use data.ts latency, that works for streaming.\n                    // If no streaming data, ping stays 0.\n                    // Let's stick to data.ts for now, but ensure we handle 'ping' type if server sends it.\n                }\n            }, 10000);\n        };\n\n        socket.onclose = () => {\n\n            setIsConnected(false);\n            wsRef.current = null;\n\n            // Attempt reconnect\n            if (reconnectTimeoutRef.current) clearTimeout(reconnectTimeoutRef.current);\n            reconnectTimeoutRef.current = setTimeout(() => {\n\n                connect();\n            }, 3000); // 3s delay\n        };\n\n        socket.onerror = (err) => {\n            // WebSocket errors are often non-critical (connection issues, network problems)\n            // The WebSocket is used for real-time price updates, but order placement uses REST APIs\n            // Only log once to avoid console spam\n            if (wsRef.current?.readyState !== WebSocket.CLOSED && !(wsRef.current as any)?.hasErrorLogged) {\n                if (wsRef.current) {\n                    (wsRef.current as any).hasErrorLogged = true;\n                }\n            }\n        };\n\n        socket.onmessage = (event) => {\n            try {\n                const data = JSON.parse(event.data);\n\n                if (data.type === 'watch') {\n                    // Update quote cache\n                    // Store by NORMALIZED symbol AND RAW symbol to be safe\n                    const norm = normalizeSymbol(data.symbol);\n                    setLastQuotes(prev => ({\n                        ...prev,\n                        [norm]: data as QuoteData,\n                        [data.symbol]: data as QuoteData\n                    }));\n\n                    // Calculate latency (ping)\n                    if (data.ts) {\n                        const now = Date.now();\n                        // Assuming data.ts is in ms. If it's seconds, multiply by 1000.\n                        // Usually MT5/MetaApi sends ms.\n                        // If delta is huge negative, checking raw values might be needed.\n                        const latency = Math.max(0, now - data.ts);\n\n                        // Smooth the ping visually (optional) or just set it\n                        setPing(latency);\n                    } else {\n                        // Debug: Log if ts is missing\n                        console.log('[WebSocket] Missing TS in watch message:', data);\n                    }\n                } else if (data.type === 'quote') {\n                    // Handle potential alternative message type\n                    console.log('[WebSocket] Quote message:', data);\n                }\n\n                // Debug all messages to find where TS is\n                if (Math.random() < 0.05) console.log('[WebSocket] Sample message:', data);\n            } catch (e) {\n                // Ignore parse errors\n            }\n        };\n\n    }, []);\n\n    const sendSubscription = (socket: WebSocket, symbols: string[]) => {\n        if (socket.readyState === WebSocket.OPEN && symbols.length > 0) {\n            // Send the ACTUAL symbols requested by the UI (raw)\n            // This ensures the broker recognizes specific instrument variants (e.g. BTCUSDm)\n            const uniqueSymbols = Array.from(new Set(symbols));\n\n            const payload = {\n                type: \"sub_symbols\",\n                symbols: uniqueSymbols,\n                streams: [\"watch\"]\n            };\n            socket.send(JSON.stringify(payload));\n        }\n    };\n\n    useEffect(() => {\n        connect();\n        return () => {\n            if (wsRef.current) {\n                wsRef.current.close();\n            }\n            if (reconnectTimeoutRef.current) {\n                clearTimeout(reconnectTimeoutRef.current);\n            }\n            if (pingIntervalRef.current) {\n                clearInterval(pingIntervalRef.current);\n            }\n        };\n    }, [connect]);\n\n    const subscribe = useCallback((symbols: string[]) => {\n        if (!wsRef.current) return;\n\n        // Add to active set (stores raw or normalized? Let's store raw to track what UI wants, but normalize on send)\n        // Actually, if we store raw, redundancy isn't handled.\n        // Let's store normalized in activeSubscriptions to avoid duplicate \"BTCUSD\" and \"BTCUSD.e\" subs.\n\n        const newSymbols: string[] = [];\n        symbols.forEach(s => {\n            if (!activeSubscriptions.current.has(s)) {\n                activeSubscriptions.current.add(s);\n                newSymbols.push(s);\n            }\n        });\n\n        if (newSymbols.length === 0) return;\n\n        sendSubscription(wsRef.current, newSymbols);\n    }, []);\n\n    const unsubscribe = useCallback((symbols: string[]) => {\n        symbols.map(normalizeSymbol).forEach(s => activeSubscriptions.current.delete(s));\n    }, []);\n\n    return (\n        <WebSocketContext.Provider value={{ isConnected, lastQuotes, subscribe, unsubscribe, normalizeSymbol, ping }}>\n            {children}\n        </WebSocketContext.Provider>\n    );\n}\n\nexport function useWebSocket() {\n    const context = useContext(WebSocketContext);\n    if (context === undefined) {\n        throw new Error('useWebSocket must be used within a WebSocketProvider');\n    }\n    return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 897, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/assets/btc.png.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 45, height: 52, blurWidth: 7, blurHeight: 8, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAAuklEQVR42n2PO+tBYQDGz4f4X4rc3nPOm6w2u1wWH0ApVqWsDJgkYRDKBxAGm8GITS6TSVl9Azpe9XMLm/F5nvr1e7Qfh+DPKfD5DAJ+E+k1+L3le6/ZPTqZmGRREOyrklneIB6U/Lt0tGRYcqg5sfoh1KKONYiwK3sIBSTaKGtyato4j1Nctj3UqsWxLagkXmNHRy2bqHUHtelybLmf4wPb0DlP0qh5CWsY/WDfQkXzJmQwzYmP0LcrVw42ebn/9mg3AAAAAElFTkSuQmCC\"};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,yIAAG;IAAE,OAAO;IAAI,QAAQ;IAAI,WAAW;IAAG,YAAY;IAAG,aAAa;AAA4V"}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/ui/FlagIcon.tsx"],"sourcesContent":["import React, { useMemo } from 'react'\nimport eurusdIcon from '../../assets/eurusd.png'\nimport btcIcon from '../../assets/btc.png'\n\n// Map currency/symbol prefixes to ISO 3166-1 alpha-2 Country Codes\nconst COUNTRY_MAP: Record<string, string> = {\n  // Major Forex\n  'EUR': 'EU', // Europe\n  'USD': 'US', // USA\n  'GBP': 'GB', // United Kingdom\n  'JPY': 'JP', // Japan\n  'AUD': 'AU', // Australia\n  'CAD': 'CA', // Canada\n  'CHF': 'CH', // Switzerland\n  'NZD': 'NZ', // New Zealand\n  'CNH': 'CN', // China\n  'HKD': 'HK', // Hong Kong\n  'SGD': 'SG', // Singapore\n  'SEK': 'SE', // Sweden\n  'NOK': 'NO', // Norway\n  'DKK': 'DK', // Denmark\n  'TRY': 'TR', // Turkey\n  'ZAR': 'ZA', // South Africa\n  'MXN': 'MX', // Mexico\n  'BRL': 'BR', // Brazil\n  'INR': 'IN', // India\n  'RUB': 'RU', // Russia\n  'KRW': 'KR', // South Korea\n  'IDR': 'ID', // Indonesia\n  'PLN': 'PL', // Poland\n  'THB': 'TH', // Thailand\n  'MYR': 'MY', // Malaysia\n  'HUF': 'HU', // Hungary\n  'CZK': 'CZ', // Czech Republic\n  'ILS': 'IL', // Israel\n  'CLP': 'CL', // Chile\n  'COP': 'CO', // Colombia\n  'PHP': 'PH', // Philippines\n  'AED': 'AE', // UAE\n  'SAR': 'SA', // Saudi Arabia\n  'TWD': 'TW', // Taiwan\n}\n\n// Indices often start with country code or specific aliases\nconst INDICES_MAP: Record<string, string> = {\n  'US30': 'US',\n  'US100': 'US',\n  'US500': 'US',\n  'USTEC': 'US',\n  'NAS100': 'US',\n  'SPX500': 'US',\n  'GER30': 'DE',\n  'DE30': 'DE',\n  'UK100': 'GB',\n  'JP225': 'JP',\n  'AUS200': 'AU',\n  'EU50': 'EU',\n  'FRA40': 'FR',\n  'IT40': 'IT',\n  'ES35': 'ES',\n  'HK50': 'HK',\n}\n\ninterface FlagIconProps {\n  symbol?: string;\n  type?: string; // Backwards compatibility\n  className?: string;\n}\n\nexport default function FlagIcon({ symbol, type, className = \"\" }: FlagIconProps) {\n  const rawSymbol = (symbol || type || '').toUpperCase().replace('/', '');\n  // Remove common separators like . - _ if they exist before processing? usually raw replacement is fine.\n  const finalSymbol = rawSymbol;\n\n  const baseClass = `relative w-full h-full flex items-center justify-center ${className}`\n  const flagUrl = (code: string) => `https://flagsapi.com/${code}/flat/64.png`\n\n  // ---------------------------------------------------------\n  // 1. Identify Components (Base & Quote)\n  // ---------------------------------------------------------\n\n  let baseElement: React.ReactNode = null;\n  let quoteCode: string | null = null;\n  let baseSymbol = finalSymbol;\n\n  // A. Check Indices (Priority)\n  // Sorted keys by length desc to match 'US100' before 'US'\n  const indexMatch = Object.keys(INDICES_MAP).find(key => finalSymbol.startsWith(key));\n  if (indexMatch) {\n    return (\n      <div className={`${baseClass} rounded-full overflow-hidden border-[1px] border-[#0b0e14]`}>\n        <img src={flagUrl(INDICES_MAP[indexMatch])} alt={indexMatch} className=\"w-full h-full object-cover scale-150\" />\n      </div>\n    )\n  }\n\n  // B. Determine Base & Quote logic\n\n  // Try standard 6-char Pair Logic (Base 3 + Quote 3)\n  // Logic: If the symbol starts with 2 known country codes?\n  if (finalSymbol.length >= 6) {\n    const p1 = finalSymbol.substring(0, 3);\n    const p2 = finalSymbol.substring(3, 6);\n\n    // Known Country Codes Pair (EURUSDm, GBPUSDpro)\n    if (COUNTRY_MAP[p1] && COUNTRY_MAP[p2]) {\n      baseSymbol = p1;\n      quoteCode = COUNTRY_MAP[p2];\n    }\n    // X-Custom + Quote (XAUUSD, BTCUSD)\n    else if (COUNTRY_MAP[p2]) {\n      // e.g. XAUUSD... check if p1 is custom?\n      // Let flow down to Custom Base detection\n      // But we need to know the split\n      baseSymbol = p1;\n      quoteCode = COUNTRY_MAP[p2];\n    }\n    else if (finalSymbol.includes('USD')) {\n      quoteCode = 'US';\n      const idx = finalSymbol.indexOf('USD');\n      if (idx > 0) baseSymbol = finalSymbol.substring(0, idx);\n    }\n    else if (finalSymbol.includes('EUR')) {\n      quoteCode = 'EU';\n      const idx = finalSymbol.indexOf('EUR');\n      if (idx > 0) baseSymbol = finalSymbol.substring(0, idx);\n    }\n  } else {\n    // Short symbol?\n    if (finalSymbol.endsWith('USD')) {\n      quoteCode = 'US';\n      baseSymbol = finalSymbol.replace('USD', '');\n    }\n  }\n\n  // C. Resolve Base Icon\n  if (baseSymbol === 'BTC' || baseSymbol.includes('BTC')) baseElement = <CustomIcon src={btcIcon.src} alt=\"BTC\" className={className} />;\n  else if (baseSymbol === 'ETH' || baseSymbol.includes('ETH')) baseElement = <GenericCryptoIcon symbol=\"ETH\" className={className} />;\n  else if (baseSymbol === 'XAU' || baseSymbol.startsWith('XAU')) baseElement = <GoldIcon className={className} />;\n  else if (baseSymbol === 'XAG' || baseSymbol.startsWith('XAG')) baseElement = <SilverIcon className={className} />;\n  else if (baseSymbol === 'XPD' || baseSymbol.startsWith('XPD')) baseElement = <GenericMetalIcon color=\"#E5E4E2\" className={className} />;\n  else if (baseSymbol === 'XPT' || baseSymbol.startsWith('XPT')) baseElement = <GenericMetalIcon color=\"#E5E4E2\" className={className} />;\n  else if (COUNTRY_MAP[baseSymbol]) {\n    baseElement = <img src={flagUrl(COUNTRY_MAP[baseSymbol])} alt={baseSymbol} className=\"w-full h-full object-cover scale-150\" />;\n  }\n\n  // ---------------------------------------------------------\n  // 2. Render\n  // ---------------------------------------------------------\n\n  // Double Icon\n  if (quoteCode) {\n    const TopLeft = baseElement || (\n      <div className=\"w-full h-full bg-[#1a1e25] flex items-center justify-center\">\n        <span className=\"text-[9px] font-bold text-gray-400\">{baseSymbol.substring(0, 1)}</span>\n      </div>\n    );\n\n    return (\n      <div className={baseClass}>\n        <div className=\"absolute top-0 left-0 w-[70%] h-[70%] rounded-full z-10 overflow-hidden bg-[#141d22] border-[1px] border-[#0b0e14]\">\n          {TopLeft}\n        </div>\n        <div className=\"absolute bottom-0 right-0 w-[70%] h-[70%] rounded-full z-20 overflow-hidden bg-[#141d22] border-[1px] border-[#0b0e14]\">\n          <img src={flagUrl(quoteCode)} alt={quoteCode} className=\"w-full h-full object-cover scale-150\" />\n        </div>\n      </div>\n    );\n  }\n\n  // Single Icon\n  if (baseElement) {\n    if ((baseElement as any).type === 'img') {\n      return (\n        <div className={`${baseClass} rounded-full overflow-hidden border-[1px] border-[#0b0e14]`}>\n          {baseElement}\n        </div>\n      )\n    }\n    return (\n      <div className={`${baseClass} rounded-full overflow-hidden border-[1px] border-[#0b0e14]`}>\n        {React.cloneElement(baseElement as React.ReactElement, { className: 'w-full h-full' } as any)}\n      </div>\n    );\n  }\n\n  // Final Fallback\n  return (\n    <div className={`${baseClass} bg-[#1a1e25] rounded-full flex items-center justify-center border border-gray-700`}>\n      <span className=\"text-[9px] font-bold text-gray-400\">{finalSymbol.substring(0, 1)}</span>\n    </div>\n  )\n}\n\n// Custom Sub-components\nconst CustomIcon = ({ src, alt, className }: any) => (\n  <div className={`relative w-full h-full rounded-full overflow-hidden bg-[#1a1e25] ${className}`}>\n    <img src={src} alt={alt} className=\"w-full h-full object-cover\" />\n  </div>\n)\n\nconst GenericCryptoIcon = ({ symbol, className }: any) => (\n  <div className={`relative w-full h-full rounded-full flex items-center justify-center bg-orange-500/10 text-orange-500 ${className}`}>\n    <span className=\"text-[8px] font-bold\"></span>\n  </div>\n)\n\nconst GoldIcon = ({ className }: any) => (\n  <div className={`relative w-full h-full ${className}`}>\n    {/* Helper to overlap with US flag if it's XAUUSD? Logic implies purely Gold Icon for simplicity or we can check XAUUSD */}\n    <div className=\"w-full h-full rounded-full bg-[#141d22] flex items-center justify-center border-[1px] border-[#e8d3a3]/30\">\n      <div className=\"w-[80%] h-[80%] rounded-full bg-gradient-to-br from-[#e8d3a3] to-[#8b6c42] flex items-center justify-center\">\n        <span className=\"text-[6px] font-bold text-[#3e2e17] leading-none text-center\">Au</span>\n      </div>\n    </div>\n  </div>\n)\n\nconst SilverIcon = ({ className }: any) => (\n  <div className={`relative w-full h-full ${className} rounded-full bg-[#141d22] flex items-center justify-center border-[1px] border-[#C0C0C0]/30`}>\n    <div className=\"w-[80%] h-[80%] rounded-full bg-gradient-to-br from-[#FFFFFF] to-[#C0C0C0] flex items-center justify-center\">\n      <span className=\"text-[6px] font-bold text-[#3e3e3e] leading-none text-center\">Ag</span>\n    </div>\n  </div>\n)\n\nconst GenericMetalIcon = ({ color, className }: any) => (\n  <div className={`relative w-full h-full ${className} rounded-full bg-[#141d22] flex items-center justify-center`}>\n    <div className=\"w-[80%] h-[80%] rounded-full\" style={{ backgroundColor: color }}></div>\n  </div>\n)\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1304, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/panels/SymbolSearchPopup.tsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react'\nimport { FiSearch } from 'react-icons/fi'\nimport { useInstruments } from '../../context/InstrumentContext'\nimport { useWebSocket } from '../../context/WebSocketContext'\nimport FlagIcon from '../ui/FlagIcon'\nimport { cn } from '../../lib/utils'\n\n// Extract for blink logic\nfunction SearchRow({ item, handleSelectSymbol, lastQuote }) {\n  const prevBidRef = useRef(item.bid);\n  const prevAskRef = useRef(item.ask);\n  const [bidColor, setBidColor] = useState('');\n  const [askColor, setAskColor] = useState('');\n  const { toggleFavorite } = useInstruments();\n\n  const quote = lastQuote || {};\n  const bid = quote.bid !== undefined ? quote.bid.toFixed(2) : (item.bid ? Number(item.bid).toFixed(2) : '0.00');\n  const ask = quote.ask !== undefined ? quote.ask.toFixed(2) : (item.ask ? Number(item.ask).toFixed(2) : '0.00');\n\n  useEffect(() => {\n    if (quote.bid && prevBidRef.current !== quote.bid) {\n      const color = quote.bid > prevBidRef.current ? 'text-[#2ebd85]' : 'text-[#f6465d]';\n      setBidColor(color);\n      const timer = setTimeout(() => setBidColor(''), 300);\n      prevBidRef.current = quote.bid;\n      return () => clearTimeout(timer);\n    }\n  }, [quote.bid]);\n\n  useEffect(() => {\n    if (quote.ask && prevAskRef.current !== quote.ask) {\n      const color = quote.ask > prevAskRef.current ? 'text-[#2ebd85]' : 'text-[#f6465d]';\n      setAskColor(color);\n      const timer = setTimeout(() => setAskColor(''), 300);\n      prevAskRef.current = quote.ask;\n      return () => clearTimeout(timer);\n    }\n  }, [quote.ask]);\n\n  return (\n    <tr\n      className=\"border-b border-gray-800 hover:bg-[#1a1e25] cursor-pointer transition-colors group\"\n      onClick={() => handleSelectSymbol(item)}\n    >\n      <td className=\"px-4 py-2.5\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-6 h-6 rounded-full overflow-hidden flex-shrink-0 bg-gray-800 flex items-center justify-center\">\n            <FlagIcon symbol={item.symbol} />\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-white font-bold text-[13px] group-hover:text-blue-400 transition-colors\">{item.symbol}</span>\n          </div>\n        </div>\n      </td>\n      <td className=\"px-4 py-2.5\">\n        <span className=\"text-gray-400 text-[12px] group-hover:text-gray-300\">{item.description || item.name}</span>\n      </td>\n\n      <td className=\"px-4 py-2.5 text-right\">\n        <span className=\"text-[12px] font-medium px-2 py-1 rounded bg-[#f6465d] text-white\">\n          {bid}\n        </span>\n      </td>\n\n      <td className=\"px-4 py-2.5 text-right\">\n        <span className=\"text-[12px] font-medium px-2 py-1 rounded bg-[#2ebd85] text-white\">\n          {ask}\n        </span>\n      </td>\n\n      <td className=\"px-4 py-2.5 text-center\">\n        <button\n          onClick={(e) => {\n            e.stopPropagation();\n            toggleFavorite(item.id);\n          }}\n          className=\"focus:outline-none\"\n        >\n          <svg\n            width=\"14\"\n            height=\"14\"\n            viewBox=\"0 0 24 24\"\n            fill={item.favorite ? \"#f59e0b\" : \"none\"}\n            stroke={item.favorite ? \"#f59e0b\" : \"#4b5563\"}\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            className=\"transition-colors hover:stroke-yellow-500\"\n          >\n            <polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\"></polygon>\n          </svg>\n        </button>\n      </td>\n    </tr>\n  );\n}\n\nexport default function SymbolSearchPopup({ isOpen, onClose, onSelectSymbol, triggerRef }) {\n  const { instruments, categories: dynamicCategories, isLoading, toggleFavorite } = useInstruments()\n  const { subscribe, unsubscribe, lastQuotes, normalizeSymbol } = useWebSocket()\n\n  const [searchTerm, setSearchTerm] = useState('')\n  const [selectedCategory, setSelectedCategory] = useState('Favorites')\n  const [showCategoryDropdown, setShowCategoryDropdown] = useState(false)\n  const [position, setPosition] = useState({ top: 0, left: 0 })\n\n  useEffect(() => {\n    if (isOpen && triggerRef?.current) {\n      const rect = triggerRef.current.getBoundingClientRect()\n      setPosition({\n        top: rect.bottom + 8,\n        left: rect.left\n      })\n    }\n  }, [isOpen, triggerRef])\n\n  const filteredInstruments = instruments.filter(item => {\n    // 1. Filter by Search Term\n    if (searchTerm) {\n      const lowerSearch = searchTerm.toLowerCase();\n      return item.symbol.toLowerCase().includes(lowerSearch) ||\n        (item.name && item.name.toLowerCase().includes(lowerSearch)) ||\n        (item.description && item.description.toLowerCase().includes(lowerSearch));\n    }\n\n    // 2. Filter by Category (only if no search term)\n    if (selectedCategory === 'Favorites') return item.favorite;\n    if (selectedCategory === 'All instruments') return true;\n    return item.category === selectedCategory;\n  })\n\n  // Subscribe to visible (top 50)\n  const visibleInstruments = filteredInstruments.slice(0, 50);\n  useEffect(() => {\n    if (!isOpen) return;\n    const symbols = visibleInstruments.map(i => i.symbol);\n    subscribe(symbols);\n    return () => unsubscribe(symbols);\n  }, [isOpen, visibleInstruments, subscribe, unsubscribe]);\n\n\n  const handleSelectSymbol = (item: any) => {\n    onSelectSymbol(item);\n    onClose();\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-40\" onClick={onClose} />\n\n      <div\n        className={`${triggerRef ? 'fixed' : 'absolute top-full left-0 mt-2'} w-[500px] bg-[#02040d] border border-gray-700 rounded-lg shadow-2xl z-50 flex flex-col max-h-[500px]`}\n        style={triggerRef ? { top: position.top, left: position.left } : {}}\n      >\n        {/* Search Bar */}\n        <div className=\"p-3 border-b border-gray-700 flex-shrink-0\">\n          <div className=\"relative\">\n            <FiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n            <input\n              type=\"text\"\n              placeholder=\"Search symbol\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-9 pr-3 py-2 bg-[#0b0e14] border border-gray-600 rounded text-sm text-white placeholder-gray-400 focus:outline-none focus:border-blue-500\"\n              autoFocus\n            />\n          </div>\n        </div>\n\n        {/* Category Dropdown Section */}\n        <div className=\"px-2 py-2 flex-shrink-0 relative\">\n          <button\n            onClick={() => setShowCategoryDropdown(!showCategoryDropdown)}\n            className=\"w-full flex items-center justify-between px-3 py-2 text-left text-gray-300 hover:bg-[#1a1e25] rounded transition-colors group\"\n          >\n            <span className=\"text-xs font-medium uppercase tracking-wider text-gray-400 group-hover:text-white transition-colors\">{selectedCategory}</span>\n            <svg\n              className={`w-3 h-3 text-gray-400 transition-transform duration-200 ${showCategoryDropdown ? 'rotate-180' : ''}`}\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          </button>\n\n          {/* Dropdown Menu Overlay */}\n          {showCategoryDropdown && (\n            <div className=\"absolute top-full left-2 right-2 mt-1 bg-[#1a1e25] border border-gray-700 rounded-md shadow-xl z-50 py-1 max-h-[250px] overflow-y-auto\">\n              {dynamicCategories.map(cat => (\n                <div\n                  key={cat}\n                  onClick={() => {\n                    setSelectedCategory(cat);\n                    setShowCategoryDropdown(false);\n                    setSearchTerm(''); // Clear search on category switch? Optional but usually good.\n                  }}\n                  className=\"px-3 py-2 text-[12px] text-gray-300 hover:bg-[#2a303c] hover:text-white cursor-pointer flex items-center justify-between\"\n                >\n                  <span>{cat}</span>\n                  {selectedCategory === cat && (\n                    <div className=\"w-1.5 h-1.5 rounded-full bg-blue-500\"></div>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Instruments List */}\n        <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\n          <table className=\"w-full\">\n            <thead className=\"sticky top-0 bg-[#02040d] border-b border-gray-700 z-10\">\n              <tr className=\"text-gray-500 text-[10px] uppercase\">\n                <th className=\"px-4 py-2 text-left font-medium bg-[#02040d]\">Symbol</th>\n                <th className=\"px-4 py-2 text-left font-medium bg-[#02040d]\">Description</th>\n                <th className=\"px-4 py-2 text-right font-medium bg-[#02040d]\">Bid</th>\n                <th className=\"px-4 py-2 text-right font-medium bg-[#02040d]\">Ask</th>\n                <th className=\"px-4 py-2 text-center font-medium w-10 bg-[#02040d]\"></th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredInstruments.map((item, idx) => (\n                <SearchRow\n                  key={`${item.symbol}-${idx}`}\n                  item={item}\n                  handleSelectSymbol={handleSelectSymbol}\n                  lastQuote={lastQuotes[normalizeSymbol(item.symbol)]}\n                />\n              ))}\n              {filteredInstruments.length === 0 && (\n                <tr>\n                  <td colSpan={3} className=\"px-4 py-8 text-center text-gray-500 text-sm\">\n                    No results found\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1795, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n// Format number as currency\nexport function formatCurrency(value: number | undefined | null, decimals: number = 2): string {\n  if (value == null || isNaN(value)) return '0.00';\n  return value.toFixed(decimals);\n}\n\n// Format price change percentage\nexport function formatPercentage(value: number): string {\n  const sign = value >= 0 ? '+' : ''\n  return `${sign}${value.toFixed(2)}%`\n}\n\n// Format large numbers with K, M, B suffixes\nexport function formatCompactNumber(value: number): string {\n  if (value >= 1e9) return `${(value / 1e9).toFixed(2)}B`\n  if (value >= 1e6) return `${(value / 1e6).toFixed(2)}M`\n  if (value >= 1e3) return `${(value / 1e3).toFixed(2)}K`\n  return value.toFixed(2)\n}\n\n// Debounce utility function\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout | null = null\n  return function executedFunction(...args: Parameters<T>) {\n    const later = () => {\n      timeout = null\n      func(...args)\n    }\n    if (timeout) clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n  }\n}\n\n// Format symbol display to ensure suffixes are lowercase\nexport function formatSymbolDisplay(symbol: string): string {\n  if (!symbol) return '';\n  // Match trailing suffixes m, r, e (case-insensitive) and ensure they are lowercase\n  // This logic assumes the suffix is a single character at the end\n  return symbol.replace(/([A-Z0-9]+)([MREmre])$/, (match, p1, p2) => {\n    return `${p1}${p2.toLowerCase()}`;\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAGO,SAAS,eAAe,KAAgC,EAAE,WAAmB,CAAC;IACnF,IAAI,SAAS,QAAQ,MAAM,QAAQ,OAAO;IAC1C,OAAO,MAAM,OAAO,CAAC;AACvB;AAGO,SAAS,iBAAiB,KAAa;IAC5C,MAAM,OAAO,SAAS,IAAI,MAAM;IAChC,OAAO,GAAG,OAAO,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC;AACtC;AAGO,SAAS,oBAAoB,KAAa;IAC/C,IAAI,SAAS,KAAK,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;IACvD,IAAI,SAAS,KAAK,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;IACvD,IAAI,SAAS,KAAK,OAAO,GAAG,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;IACvD,OAAO,MAAM,OAAO,CAAC;AACvB;AAGO,SAAS,SACd,IAAO,EACP,IAAY;IAEZ,IAAI,UAAiC;IACrC,OAAO,SAAS,iBAAiB,GAAG,IAAmB;QACrD,MAAM,QAAQ;YACZ,UAAU;YACV,QAAQ;QACV;QACA,IAAI,SAAS,aAAa;QAC1B,UAAU,WAAW,OAAO;IAC9B;AACF;AAGO,SAAS,oBAAoB,MAAc;IAChD,IAAI,CAAC,QAAQ,OAAO;IACpB,mFAAmF;IACnF,iEAAiE;IACjE,OAAO,OAAO,OAAO,CAAC,0BAA0B,CAAC,OAAO,IAAI;QAC1D,OAAO,GAAG,KAAK,GAAG,WAAW,IAAI;IACnC;AACF"}},
    {"offset": {"line": 1853, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/data-display/websocket-status.tsx"],"sourcesContent":["/**\n * WebSocket Connection Status Indicator\n */\n\nimport React from 'react'\nimport { cn } from '@/lib/utils'\n\ninterface WebSocketStatusProps {\n  className?: string\n  showDetails?: boolean\n  positionsConnected?: boolean // SignalR positions connection status\n}\n\nexport function WebSocketStatus({ className, showDetails = false, positionsConnected = false }: WebSocketStatusProps) {\n  // For now, we'll assume connected if positionsConnected is true\n  // In the future, this can be connected to actual WebSocket hooks\n  const isUserOnline = positionsConnected === true\n\n  return (\n    <div className={cn('flex items-center gap-2', className)}>\n      {/* Simple indicator */}\n      {!showDetails && (\n        <div className=\"flex items-center gap-1\">\n          <span\n            className={cn(\n              'text-[10px] font-medium',\n              isUserOnline\n                ? 'text-green-500'\n                : 'text-red-500'\n            )}\n          >\n            {isUserOnline ? '' : ''}\n          </span>\n          <span className=\"text-[10px] text-white/60\">\n            {isUserOnline ? 'Live' : 'Offline'}\n          </span>\n        </div>\n      )}\n\n      {/* Detailed status - can be implemented later */}\n      {showDetails && (\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex items-center gap-1.5\">\n            <span className={cn('text-xs', isUserOnline ? 'text-green-500' : 'text-red-500')}>\n              {isUserOnline ? '' : ''}\n            </span>\n            <span className=\"text-xs text-white/60\">Prices</span>\n          </div>\n          \n          <div className=\"flex items-center gap-1.5\">\n            <span className={cn('text-xs', isUserOnline ? 'text-green-500' : 'text-red-500')}>\n              {isUserOnline ? '' : ''}\n            </span>\n            <span className=\"text-xs text-white/60\">Charts</span>\n          </div>\n          \n          <div className=\"flex items-center gap-1.5\">\n            <span className={cn('text-xs', isUserOnline ? 'text-green-500' : 'text-red-500')}>\n              {isUserOnline ? '' : ''}\n            </span>\n            <span className=\"text-xs text-white/60\">Trading</span>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;AAGD;;;AAQO,SAAS,gBAAgB,EAAE,SAAS,EAAE,cAAc,KAAK,EAAE,qBAAqB,KAAK,EAAwB;IAClH,gEAAgE;IAChE,iEAAiE;IACjE,MAAM,eAAe,uBAAuB;IAE5C,qBACE,8OAAC;QAAI,WAAW,IAAA,yHAAE,EAAC,2BAA2B;;YAE3C,CAAC,6BACA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAW,IAAA,yHAAE,EACX,2BACA,eACI,mBACA;kCAGL,eAAe,MAAM;;;;;;kCAExB,8OAAC;wBAAK,WAAU;kCACb,eAAe,SAAS;;;;;;;;;;;;YAM9B,6BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAW,IAAA,yHAAE,EAAC,WAAW,eAAe,mBAAmB;0CAC9D,eAAe,MAAM;;;;;;0CAExB,8OAAC;gCAAK,WAAU;0CAAwB;;;;;;;;;;;;kCAG1C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAW,IAAA,yHAAE,EAAC,WAAW,eAAe,mBAAmB;0CAC9D,eAAe,MAAM;;;;;;0CAExB,8OAAC;gCAAK,WAAU;0CAAwB;;;;;;;;;;;;kCAG1C,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAW,IAAA,yHAAE,EAAC,WAAW,eAAe,mBAAmB;0CAC9D,eAAe,MAAM;;;;;;0CAExB,8OAAC;gCAAK,WAAU;0CAAwB;;;;;;;;;;;;;;;;;;;;;;;;AAMpD"}},
    {"offset": {"line": 1990, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/context/PrivacyContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\n\nconst PrivacyContext = createContext({\n    hideBalance: false,\n    toggleHideBalance: () => { },\n});\n\nexport const PrivacyProvider = ({ children }) => {\n    const [hideBalance, setHideBalance] = useState(false);\n\n    // Initialize from localStorage if available\n    useEffect(() => {\n        const saved = localStorage.getItem('hideBalance');\n        if (saved) {\n            setHideBalance(JSON.parse(saved));\n        }\n    }, []);\n\n    const toggleHideBalance = () => {\n        setHideBalance(prev => {\n            const newValue = !prev;\n            localStorage.setItem('hideBalance', JSON.stringify(newValue));\n            return newValue;\n        });\n    };\n\n    return (\n        <PrivacyContext.Provider value={{ hideBalance, toggleHideBalance }}>\n            {children}\n        </PrivacyContext.Provider>\n    );\n};\n\nexport const usePrivacy = () => useContext(PrivacyContext);\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAIA,MAAM,+BAAiB,IAAA,sNAAa,EAAC;IACjC,aAAa;IACb,mBAAmB,KAAQ;AAC/B;AAEO,MAAM,kBAAkB,CAAC,EAAE,QAAQ,EAAE;IACxC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,4CAA4C;IAC5C,IAAA,kNAAS,EAAC;QACN,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACP,eAAe,KAAK,KAAK,CAAC;QAC9B;IACJ,GAAG,EAAE;IAEL,MAAM,oBAAoB;QACtB,eAAe,CAAA;YACX,MAAM,WAAW,CAAC;YAClB,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;YACnD,OAAO;QACX;IACJ;IAEA,qBACI,8OAAC,eAAe,QAAQ;QAAC,OAAO;YAAE;YAAa;QAAkB;kBAC5D;;;;;;AAGb;AAEO,MAAM,aAAa,IAAM,IAAA,mNAAU,EAAC"}},
    {"offset": {"line": 2038, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/context/TradingContext.tsx"],"sourcesContent":["\"use client\";\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useAccount } from './AccountContext';\n\ninterface Order {\n    symbol: string;\n    side: 'buy' | 'sell';\n    volume: string;\n    type: 'market' | 'limit' | 'stop';\n    price?: string;\n    tp?: string;\n    sl?: string;\n}\n\ninterface ModifyModalState {\n    isOpen: boolean;\n    position: any | null;\n}\n\ninterface TradingContextType {\n    lastOrder: Order | null;\n    placeOrder: (order: Order) => void;\n    symbol: string;\n    setSymbol: (symbol: string) => void;\n    modifyModalState: ModifyModalState;\n    setModifyModalState: (state: ModifyModalState) => void;\n    lastModification: any | null;\n    requestModifyPosition: (modification: any) => void;\n    clearLastModification: () => void;\n    addNavbarTab: ((symbol: string) => void) | null;\n    setAddNavbarTab: (fn: (symbol: string) => void) => void;\n}\n\nconst TradingContext = createContext<TradingContextType | undefined>(undefined);\n\nexport function TradingProvider({ children }) {\n    const { currentAccountId } = useAccount();\n    const [lastOrder, setLastOrder] = useState<Order | null>(null);\n\n    // Load last selected symbol for current account from localStorage\n    const [symbol, setSymbolState] = useState<string>(() => {\n        if (typeof window !== 'undefined' && currentAccountId) {\n            const key = `zup-symbol-${currentAccountId}`;\n            return localStorage.getItem(key) || 'EURUSD';\n        }\n        return 'EURUSD';\n    });\n\n    const [modifyModalState, setModifyModalState] = useState<ModifyModalState>({ isOpen: false, position: null });\n    const [lastModification, setLastModification] = useState<any | null>(null);\n    const [addNavbarTab, setAddNavbarTab] = useState<((symbol: string) => void) | null>(null);\n\n    // Update symbol when account changes\n    useEffect(() => {\n        if (typeof window !== 'undefined' && currentAccountId) {\n            const key = `zup-symbol-${currentAccountId}`;\n            const savedSymbol = localStorage.getItem(key);\n            if (savedSymbol) {\n                setSymbolState(savedSymbol);\n            } else {\n                setSymbolState('EURUSD');\n            }\n        }\n    }, [currentAccountId]);\n\n    // Wrapper to persist symbol to localStorage per account\n    const setSymbol = (newSymbol: string) => {\n        // Try to find the matching instrument to preserve casing (e.g. XAUUSDm)\n        // We can't use useInstruments here because it would cause a circular dependency\n        // if InstrumentProvider uses TradingProvider (it doesn't, but let's be safe)\n        // Actually, we can just use the instruments from localStorage cache if available\n        let symbolToSet = newSymbol;\n\n        if (typeof window !== 'undefined') {\n            // Try to find correct casing from cached instruments\n            try {\n                const keys = Object.keys(localStorage);\n                const instrumentKey = keys.find(k => k.startsWith('zup-instruments-'));\n                if (instrumentKey) {\n                    const cached = localStorage.getItem(instrumentKey);\n                    if (cached) {\n                        const { data } = JSON.parse(cached);\n                        if (Array.isArray(data)) {\n                            const match = data.find(inst => inst.symbol.toUpperCase() === newSymbol.toUpperCase());\n                            if (match) {\n                                symbolToSet = match.symbol;\n                            }\n                        }\n                    }\n                }\n            } catch (e) { }\n\n            setSymbolState(symbolToSet);\n            if (currentAccountId) {\n                const key = `zup-symbol-${currentAccountId}`;\n                localStorage.setItem(key, symbolToSet);\n            }\n        } else {\n            setSymbolState(newSymbol);\n        }\n    };\n\n    const placeOrder = (order: Order) => {\n\n        setLastOrder(order);\n    };\n\n    const requestModifyPosition = (modification: any) => {\n        setLastModification(modification);\n    };\n\n    const clearLastModification = () => {\n        setLastModification(null);\n    };\n\n    return (\n        <TradingContext.Provider value={{\n            lastOrder,\n            placeOrder,\n            symbol,\n            setSymbol,\n            modifyModalState,\n            setModifyModalState,\n            lastModification,\n            requestModifyPosition,\n            clearLastModification,\n            addNavbarTab,\n            setAddNavbarTab\n        }}>\n            {children}\n        </TradingContext.Provider>\n    );\n}\n\nexport function useTrading() {\n    const context = useContext(TradingContext);\n    if (context === undefined) {\n        throw new Error('useTrading must be used within a TradingProvider');\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAFA;;;;AAiCA,MAAM,+BAAiB,IAAA,sNAAa,EAAiC;AAE9D,SAAS,gBAAgB,EAAE,QAAQ,EAAE;IACxC,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,+IAAU;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAe;IAEzD,kEAAkE;IAClE,MAAM,CAAC,QAAQ,eAAe,GAAG,IAAA,iNAAQ,EAAS;QAC9C;;QAIA,OAAO;IACX;IAEA,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAmB;QAAE,QAAQ;QAAO,UAAU;IAAK;IAC3G,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAa;IACrE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAoC;IAEpF,qCAAqC;IACrC,IAAA,kNAAS,EAAC;QACN;;IASJ,GAAG;QAAC;KAAiB;IAErB,wDAAwD;IACxD,MAAM,YAAY,CAAC;QACf,wEAAwE;QACxE,gFAAgF;QAChF,6EAA6E;QAC7E,iFAAiF;QACjF,IAAI,cAAc;QAElB;;aAwBO;YACH,eAAe;QACnB;IACJ;IAEA,MAAM,aAAa,CAAC;QAEhB,aAAa;IACjB;IAEA,MAAM,wBAAwB,CAAC;QAC3B,oBAAoB;IACxB;IAEA,MAAM,wBAAwB;QAC1B,oBAAoB;IACxB;IAEA,qBACI,8OAAC,eAAe,QAAQ;QAAC,OAAO;YAC5B;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACJ;kBACK;;;;;;AAGb;AAEO,SAAS;IACZ,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}},
    {"offset": {"line": 2128, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/context/SidebarContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, ReactNode } from 'react';\n\ninterface SidebarContextType {\n    isSidebarExpanded: boolean;\n    setIsSidebarExpanded: (expanded: boolean) => void;\n    toggleSidebar: () => void;\n}\n\nconst SidebarContext = createContext<SidebarContextType | undefined>(undefined);\n\nexport function SidebarProvider({ children }: { children: ReactNode }) {\n    const [isSidebarExpanded, setIsSidebarExpanded] = useState(true);\n\n    const toggleSidebar = () => {\n        setIsSidebarExpanded(prev => !prev);\n    };\n\n    return (\n        <SidebarContext.Provider value={{ isSidebarExpanded, setIsSidebarExpanded, toggleSidebar }}>\n            {children}\n        </SidebarContext.Provider>\n    );\n}\n\nexport function useSidebar() {\n    const context = useContext(SidebarContext);\n    if (context === undefined) {\n        throw new Error('useSidebar must be used within a SidebarProvider');\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAUA,MAAM,+BAAiB,IAAA,sNAAa,EAAiC;AAE9D,SAAS,gBAAgB,EAAE,QAAQ,EAA2B;IACjE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAE3D,MAAM,gBAAgB;QAClB,qBAAqB,CAAA,OAAQ,CAAC;IAClC;IAEA,qBACI,8OAAC,eAAe,QAAQ;QAAC,OAAO;YAAE;YAAmB;YAAsB;QAAc;kBACpF;;;;;;AAGb;AAEO,SAAS;IACZ,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}},
    {"offset": {"line": 2169, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/layout/Navbar.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react'\nimport {\n  FiX,\n  FiPlus,\n  FiChevronDown,\n  FiDollarSign\n} from 'react-icons/fi'\nimport { MdOutlineAccessAlarms, MdApps } from \"react-icons/md\"\nimport { BiUserCircle } from \"react-icons/bi\"\nimport { Bell, User, ChevronDown } from 'lucide-react'\nimport SymbolSearchPopup from '../panels/SymbolSearchPopup'\nimport AccountDropdown from '../panels/AccountDropdown'\nimport PriceAlertsDropdown from '../panels/PriceAlertsDropdown'\nimport ApplicationsDropdown from '../panels/ApplicationsDropdown'\nimport ProfileDropdown from '../panels/ProfileDropdown'\nimport DepositPopup from '../panels/DepositPopup'\nimport FlagIcon from '../ui/FlagIcon'\nimport { WebSocketStatus } from '../data-display/websocket-status'\nimport { Button } from '../ui/button'\nimport IconButton from '../ui/IconButton'\nimport { useAuth } from '../../context/AuthContext'\nimport { usePrivacy } from '../../context/PrivacyContext'\nimport { useAccount } from '../../context/AccountContext'\nimport { formatCurrency, cn } from '../../lib/utils'\nimport { useInstruments } from '../../context/InstrumentContext'\nimport { useTrading } from '../../context/TradingContext'\nimport { apiClient } from '../../lib/api'\n\n// InstrumentTab Component\ninterface Tab {\n  id: string;\n  symbol: string;\n  flagType: string;\n  isActive: boolean;\n}\n\ninterface InstrumentTabProps {\n  tab: Tab;\n  isActive: boolean;\n  onClick: (id: string) => void;\n  onClose: (id: string) => void;\n}\n\nconst InstrumentTab = ({ tab, isActive, onClick, onClose }: InstrumentTabProps) => {\n  const tabClasses = `\n    relative flex text-gray-400 font-semibold items-center h-10 px-3 cursor-pointer group hover:border-b-2 hover:border-white \n    ${isActive ? 'border-b-2 border-white text-white' : ''}\n  `\n\n  return (\n    <div\n      className={tabClasses}\n      onClick={() => onClick(tab.id)}\n      data-test={`instrument-tab-${tab.symbol}`}\n    >\n      {/* Close button in upper right corner */}\n      <button\n        className=\"cursor-pointer absolute top-0 right-0 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded text-yellow-400 hover:border hover:border-yellow-400 hover:bg-gray-800 z-1\"\n        data-test=\"instrument-tab-close\"\n        type=\"button\"\n        onClick={(e) => {\n          e.stopPropagation()\n          onClose(tab.id)\n        }}\n      >\n        <FiX size={14} className=\"stroke-current fill-none\" />\n      </button>\n\n      {/* Tab content */}\n      <div className=\"flex items-center justify-center gap-1.5 h-full\">\n        <div className=\"w-5 h-5\">\n          <FlagIcon symbol={tab.symbol} type={tab.flagType} />\n        </div>\n        <div className=\"text-sm font-medium\" data-test=\"instrument-tab-symbol\">\n          {tab.symbol}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nimport { useSidebar } from '../../context/SidebarContext'\n\ninterface NavbarProps {\n  logoLarge: string;\n  logoSmall: string;\n}\n\nexport default function Navbar({ logoLarge, logoSmall }: NavbarProps) {\n  const { isSidebarExpanded } = useSidebar();\n  const { hideBalance } = usePrivacy();\n  const { user } = useAuth();\n  const {\n    currentAccountId,\n    mt5Accounts,\n    balances,\n    isBalanceLoading,\n    currentBalance\n  } = useAccount();\n\n  const { instruments } = useInstruments();\n\n  // Start with empty tabs, will be initialized by useEffect\n  const [tabs, setTabs] = useState<Tab[]>([]);\n\n  const [currentData, setCurrentData] = useState<any>(null);\n\n  // Direct fetch for selected account\n  const balance = currentBalance?.balance ?? 10000;\n  const equity = currentBalance?.equity ?? 10000;\n  const [positionsConnected] = useState(true) // TODO: Connect to actual WebSocket status\n\n  const [isSymbolSearchOpen, setIsSymbolSearchOpen] = useState(false)\n  const [isAccountDropdownOpen, setIsAccountDropdownOpen] = useState(false)\n  const [isPriceAlertsOpen, setIsPriceAlertsOpen] = useState(false)\n  const [isAppsDropdownOpen, setIsAppsDropdownOpen] = useState(false)\n  const [isProfileDropdownOpen, setIsProfileDropdownOpen] = useState(false)\n  const [isDepositPopupOpen, setIsDepositPopupOpen] = useState(false)\n  const addTabButtonRef = useRef<HTMLButtonElement>(null)\n\n  const { symbol, setSymbol, setAddNavbarTab } = useTrading();\n\n  // Sync active tab with current symbol from TradingContext\n  useEffect(() => {\n    if (tabs.length > 0 && symbol) {\n      // Find tab that matches the current symbol\n      const matchingTab = tabs.find(tab =>\n        tab.symbol.toUpperCase() === symbol.toUpperCase()\n      );\n\n      if (matchingTab && !matchingTab.isActive) {\n        // Update tabs to make the matching tab active\n        setTabs(prevTabs =>\n          prevTabs.map(tab => ({\n            ...tab,\n            isActive: tab.symbol.toUpperCase() === symbol.toUpperCase()\n          }))\n        );\n      }\n    }\n  }, [symbol, tabs.length]); // Only re-run when symbol changes or tabs are initialized\n\n  const handleTabClick = (tabId: string) => {\n    const clickedTab = tabs.find(tab => tab.id === tabId);\n    if (clickedTab) {\n      // Update Order Panel with the clicked symbol\n      setSymbol(clickedTab.symbol);\n    }\n\n    setTabs(prevTabs =>\n      prevTabs.map(tab => ({\n        ...tab,\n        isActive: tab.id === tabId\n      }))\n    )\n  }\n\n  const handleCloseTab = (tabId: string) => {\n    const tabIndex = tabs.findIndex(tab => tab.id === tabId)\n    const isActiveTab = tabs[tabIndex]?.isActive\n\n    const newTabs = tabs.filter(tab => tab.id !== tabId)\n\n    // If we closed the active tab, make the first remaining tab active\n    if (isActiveTab && newTabs.length > 0) {\n      newTabs[0].isActive = true\n    }\n\n    setTabs(newTabs)\n  }\n\n  const handleAddTab = () => {\n    setIsSymbolSearchOpen(true)\n  }\n\n  const handleSelectSymbol = useCallback((symbolData: { symbol: string }) => {\n    // Normalize symbol for comparison (trim and uppercase)\n    const normalizedSymbol = symbolData.symbol.trim().toUpperCase();\n\n\n    const existingTab = tabs.find(tab => tab.symbol.trim().toUpperCase() === normalizedSymbol)\n\n    if (existingTab) {\n      // Tab already exists, just make it active\n      handleTabClick(existingTab.id)\n      return\n    }\n\n    // Create new tab only if it doesn't exist\n    const newId = Date.now().toString()\n    const newTab: Tab = {\n      id: newId,\n      symbol: symbolData.symbol,\n      flagType: symbolData.symbol, // Use symbol as flagType for new logic\n      isActive: true\n    }\n\n    // Update Order Panel with the new symbol\n    setSymbol(symbolData.symbol);\n\n    setTabs(prevTabs =>\n      prevTabs.map(tab => ({ ...tab, isActive: false })).concat([newTab])\n    )\n  }, [tabs, setSymbol]);\n\n  // Register handleSelectSymbol with TradingContext - use ref to avoid infinite loop\n  const handleSelectSymbolRef = useRef(handleSelectSymbol);\n\n  useEffect(() => {\n    handleSelectSymbolRef.current = handleSelectSymbol;\n  }, [handleSelectSymbol]);\n\n  useEffect(() => {\n    setAddNavbarTab(() => (symbol: string) => {\n      handleSelectSymbolRef.current({ symbol });\n    });\n  }, []); // Empty deps - only run once\n\n  return (\n    <nav className=\"bg-background flex-shrink-0 border-t border-x border-gray-800\">\n      <div className=\"flex items-center h-14 px-2\">\n        {/* Logo */}\n        <div className=\"px-2 flex-shrink-0\">\n          <div className='flex items-center'>\n            <div className=\"text-yellow-300 font-semi-bold\">\n              <img\n                src={isSidebarExpanded ? logoLarge : logoSmall}\n                className='h-8'\n                alt=\"Zuperior Navbar\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Instrument Tabs */}\n        <div className=\"flex-1 ml-1 min-w-0 overflow-x-auto navbar-scrollbar\">\n          <div className=\"flex items-center min-w-max\">\n            <div className=\"flex items-center \">\n              <div className=\"flex gap-0\">\n                {tabs.map((tab) => (\n                  <InstrumentTab\n                    key={tab.id}\n                    tab={tab}\n                    isActive={tab.isActive}\n                    onClick={handleTabClick}\n                    onClose={handleCloseTab}\n                  />\n                ))}\n              </div>\n\n              {/* Add Tab Button */}\n              <div className=\"flex items-center h-full relative\">\n                <button\n                  ref={addTabButtonRef}\n                  className=\"cursor-pointer px-2 py-1 text-gray-400 hover:text-white hover:bg-gray-800 rounded-md transition-colors mx-1 flex items-center justify-center h-8 border border-transparent hover:border-gray-400 \"\n                  data-test=\"add-tab-button\"\n                  type=\"button\"\n                  onClick={handleAddTab}\n                >\n                  <FiPlus size={18} className=\"stroke-current fill-white text-white cursor-pointer\" />\n                </button>\n\n                {/* Symbol Search Popup */}\n                <SymbolSearchPopup\n                  isOpen={isSymbolSearchOpen}\n                  onClose={() => setIsSymbolSearchOpen(false)}\n                  onSelectSymbol={handleSelectSymbol}\n                  triggerRef={addTabButtonRef}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Right Section - Demo Mode: Limited Actions */}\n        <div className=\"flex items-center gap-1.5 pr-2 flex-shrink-0\">\n          {/* WebSocket Status (Live indicator) */}\n          <WebSocketStatus showDetails={false} positionsConnected={positionsConnected} />\n\n          {/* Account Indicator (Non-clickable in Demo) */}\n          <div className=\"relative\">\n            <div className=\"flex items-center gap-1.5 px-2 py-1\">\n              <div className=\"flex flex-col items-start\">\n                <div className=\"flex items-center gap-1\">\n                  <span className=\"text-[10px] text-white/60\">\n                    <span className=\"px-1 py-0.5 rounded text-[10px] font-medium bg-info/20 text-info\">\n                      Demo\n                    </span>\n                    &nbsp;\n                    <span className=\"text-[11px]\">Demo User</span>\n                  </span>\n                </div>\n                <span className=\"text-xs font-semibold text-success leading-tight\">\n                  {hideBalance ? \"......\" : `${formatCurrency(balance, 2)} USD`}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* User Placeholder (Non-clickable in Demo) */}\n          <div className=\"relative\">\n            <div className=\"p-1.5 text-gray-400\">\n              <User className=\"h-3.5 w-3.5\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2610, "column": 0}, "map": {"version":3,"sources":["file:///Users/akhilesh/Desktop/PycharmProjects/Terminal/demo-terminal-iframe/src/components/layout/ClientLayout.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { usePathname } from 'next/navigation';\nimport Navbar from './Navbar';\nimport { SidebarProvider, useSidebar } from '../../context/SidebarContext';\n\nfunction LayoutContent({ children }: { children: React.ReactNode }) {\n    const { isSidebarExpanded } = useSidebar();\n    const pathname = usePathname();\n    // Unregister any existing service workers to prevent stale caching from previous versions\n    if (typeof window !== 'undefined' && 'serviceWorker' in navigator) {\n        navigator.serviceWorker.getRegistrations().then(function (registrations) {\n            for (let registration of registrations) {\n                console.log('Unregistering Service Worker:', registration);\n                registration.unregister();\n            }\n        });\n    }\n\n    console.log(\"Demo Terminal Loaded - Version 2.1 CSS Override Active\");\n\n    const isLoginPage = pathname === '/login';\n\n    // For login page, don't show Navbar - let the page handle its own layout\n    if (isLoginPage) {\n        return <>{children}</>;\n    }\n\n    return (\n        <div className=\"h-screen flex flex-col bg-background overflow-hidden gap-1\">\n            <Navbar\n                logoLarge=\"/logo-full.png\"\n                logoSmall=\"/logo-icon.webp\"\n            />\n            <div className=\"flex flex-1 min-h-0 overflow-hidden\">\n                {children}\n            </div>\n        </div>\n    );\n}\n\nimport { WebSocketProvider } from '../../context/WebSocketContext';\nimport { TradingProvider } from '../../context/TradingContext';\n\nexport default function ClientLayout({ children }: { children: React.ReactNode }) {\n    return (\n        <SidebarProvider>\n            <WebSocketProvider>\n                <TradingProvider>\n                    <LayoutContent>{children}</LayoutContent>\n                </TradingProvider>\n            </WebSocketProvider>\n        </SidebarProvider>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AAqCA;AACA;AA3CA;;;;;AAOA,SAAS,cAAc,EAAE,QAAQ,EAAiC;IAC9D,MAAM,EAAE,iBAAiB,EAAE,GAAG,IAAA,+IAAU;IACxC,MAAM,WAAW,IAAA,iJAAW;IAC5B,0FAA0F;IAC1F,IAAI,kDAAkB,eAAe,mBAAmB;;IASxD,QAAQ,GAAG,CAAC;IAEZ,MAAM,cAAc,aAAa;IAEjC,yEAAyE;IACzE,IAAI,aAAa;QACb,qBAAO;sBAAG;;IACd;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC,iJAAM;gBACH,WAAU;gBACV,WAAU;;;;;;0BAEd,8OAAC;gBAAI,WAAU;0BACV;;;;;;;;;;;;AAIjB;;;AAKe,SAAS,aAAa,EAAE,QAAQ,EAAiC;IAC5E,qBACI,8OAAC,oJAAe;kBACZ,cAAA,8OAAC,wJAAiB;sBACd,cAAA,8OAAC,oJAAe;0BACZ,cAAA,8OAAC;8BAAe;;;;;;;;;;;;;;;;;;;;;AAKpC"}}]
}